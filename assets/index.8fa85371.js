var SN=Object.defineProperty,TN=Object.defineProperties;var bN=Object.getOwnPropertyDescriptors;var E0=Object.getOwnPropertySymbols;var xN=Object.prototype.hasOwnProperty,CN=Object.prototype.propertyIsEnumerable;var S0=(t,e,n)=>e in t?SN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,si=(t,e)=>{for(var n in e||(e={}))xN.call(e,n)&&S0(t,n,e[n]);if(E0)for(var n of E0(e))CN.call(e,n)&&S0(t,n,e[n]);return t},uc=(t,e)=>TN(t,bN(e));const AN=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};AN();var Re={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=Symbol.for("react.element"),RN=Symbol.for("react.portal"),NN=Symbol.for("react.fragment"),DN=Symbol.for("react.strict_mode"),PN=Symbol.for("react.profiler"),ON=Symbol.for("react.provider"),LN=Symbol.for("react.context"),MN=Symbol.for("react.forward_ref"),FN=Symbol.for("react.suspense"),$N=Symbol.for("react.memo"),UN=Symbol.for("react.lazy"),T0=Symbol.iterator;function BN(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var qk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hk=Object.assign,Kk={};function ga(t,e,n){this.props=t,this.context=e,this.refs=Kk,this.updater=n||qk}ga.prototype.isReactComponent={};ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wk(){}Wk.prototype=ga.prototype;function sy(t,e,n){this.props=t,this.context=e,this.refs=Kk,this.updater=n||qk}var oy=sy.prototype=new Wk;oy.constructor=sy;Hk(oy,ga.prototype);oy.isPureReactComponent=!0;var b0=Array.isArray,Gk=Object.prototype.hasOwnProperty,ay={current:null},Qk={key:!0,ref:!0,__self:!0,__source:!0};function Yk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Gk.call(e,r)&&!Qk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Nu,type:t,key:s,ref:o,props:i,_owner:ay.current}}function VN(t,e){return{$$typeof:Nu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ly(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nu}function zN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var x0=/\/+/g;function Gf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zN(""+t.key):e.toString(36)}function qc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nu:case RN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gf(o,0):r,b0(i)?(n="",t!=null&&(n=t.replace(x0,"$&/")+"/"),qc(i,e,n,"",function(u){return u})):i!=null&&(ly(i)&&(i=VN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(x0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",b0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gf(s,a);o+=qc(s,e,n,l,i)}else if(l=BN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gf(s,a++),o+=qc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cc(t,e,n){if(t==null)return t;var r=[],i=0;return qc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function jN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},Hc={transition:null},qN={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:Hc,ReactCurrentOwner:ay};ae.Children={map:cc,forEach:function(t,e,n){cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cc(t,function(){e++}),e},toArray:function(t){return cc(t,function(e){return e})||[]},only:function(t){if(!ly(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=ga;ae.Fragment=NN;ae.Profiler=PN;ae.PureComponent=sy;ae.StrictMode=DN;ae.Suspense=FN;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qN;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ay.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Gk.call(e,l)&&!Qk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Nu,type:t.type,key:i,ref:s,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:LN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ON,_context:t},t.Consumer=t};ae.createElement=Yk;ae.createFactory=function(t){var e=Yk.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:MN,render:t}};ae.isValidElement=ly;ae.lazy=function(t){return{$$typeof:UN,_payload:{_status:-1,_result:t},_init:jN}};ae.memo=function(t,e){return{$$typeof:$N,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Hc.transition;Hc.transition={};try{t()}finally{Hc.transition=e}};ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ae.useCallback=function(t,e){return Xt.current.useCallback(t,e)};ae.useContext=function(t){return Xt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Xt.current.useEffect(t,e)};ae.useId=function(){return Xt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Xt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};ae.useRef=function(t){return Xt.current.useRef(t)};ae.useState=function(t){return Xt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Xt.current.useTransition()};ae.version="18.1.0";Re.exports=ae;var vs=Re.exports,dm={},Xk={exports:{}},Tn={},Jk={exports:{}},Zk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,Q){var W=M.length;M.push(Q);e:for(;0<W;){var w=W-1>>>1,I=M[w];if(0<i(I,Q))M[w]=Q,M[W]=I,W=w;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var Q=M[0],W=M.pop();if(W!==Q){M[0]=W;e:for(var w=0,I=M.length,qn=I>>>1;w<qn;){var pn=2*(w+1)-1,tr=M[pn],ye=pn+1,Ft=M[ye];if(0>i(tr,W))ye<I&&0>i(Ft,tr)?(M[w]=Ft,M[ye]=W,w=ye):(M[w]=tr,M[pn]=W,w=pn);else if(ye<I&&0>i(Ft,W))M[w]=Ft,M[ye]=W,w=ye;else break e}}return Q}function i(M,Q){var W=M.sortIndex-Q.sortIndex;return W!==0?W:M.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(M){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=M)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function S(M){if(v=!1,g(M),!p)if(n(l)!==null)p=!0,en(b);else{var Q=n(u);Q!==null&&Mt(S,Q.startTime-M)}}function b(M,Q){p=!1,v&&(v=!1,m(R),R=-1),f=!0;var W=d;try{for(g(Q),h=n(l);h!==null&&(!(h.expirationTime>Q)||M&&!U());){var w=h.callback;if(typeof w=="function"){h.callback=null,d=h.priorityLevel;var I=w(h.expirationTime<=Q);Q=t.unstable_now(),typeof I=="function"?h.callback=I:h===n(l)&&r(l),g(Q)}else r(l);h=n(l)}if(h!==null)var qn=!0;else{var pn=n(u);pn!==null&&Mt(S,pn.startTime-Q),qn=!1}return qn}finally{h=null,d=W,f=!1}}var k=!1,C=null,R=-1,H=5,G=-1;function U(){return!(t.unstable_now()-G<H)}function Y(){if(C!==null){var M=t.unstable_now();G=M;var Q=!0;try{Q=C(!0,M)}finally{Q?te():(k=!1,C=null)}}else k=!1}var te;if(typeof y=="function")te=function(){y(Y)};else if(typeof MessageChannel!="undefined"){var Qe=new MessageChannel,Zt=Qe.port2;Qe.port1.onmessage=Y,te=function(){Zt.postMessage(null)}}else te=function(){E(Y,0)};function en(M){C=M,k||(k=!0,te())}function Mt(M,Q){R=E(function(){M(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,en(b))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var W=d;d=Q;try{return M()}finally{d=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,Q){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=d;d=M;try{return Q()}finally{d=W}},t.unstable_scheduleCallback=function(M,Q,W){var w=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?w+W:w):W=w,M){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=W+I,M={id:c++,callback:Q,priorityLevel:M,startTime:W,expirationTime:I,sortIndex:-1},W>w?(M.sortIndex=W,e(u,M),n(l)===null&&M===n(u)&&(v?(m(R),R=-1):v=!0,Mt(S,W-w))):(M.sortIndex=I,e(l,M),p||f||(p=!0,en(b))),M},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(M){var Q=d;return function(){var W=d;d=Q;try{return M.apply(this,arguments)}finally{d=W}}}})(Zk);Jk.exports=Zk;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE=Re.exports,kn=Jk.exports;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tE=new Set,Bl={};function Xs(t,e){Xo(t,e),Xo(t+"Capture",e)}function Xo(t,e){for(Bl[t]=e,t=0;t<e.length;t++)tE.add(e[t])}var Hr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),fm=Object.prototype.hasOwnProperty,HN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C0={},A0={};function KN(t){return fm.call(A0,t)?!0:fm.call(C0,t)?!1:HN.test(t)?A0[t]=!0:(C0[t]=!0,!1)}function WN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GN(t,e,n,r){if(e===null||typeof e=="undefined"||WN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var uy=/[\-:]([a-z])/g;function cy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uy,cy);St[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uy,cy);St[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uy,cy);St[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function hy(t,e,n,r){var i=St.hasOwnProperty(e)?St[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GN(e,n,i,r)&&(n=null),r||i===null?KN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=eE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hc=Symbol.for("react.element"),vo=Symbol.for("react.portal"),wo=Symbol.for("react.fragment"),dy=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),nE=Symbol.for("react.provider"),rE=Symbol.for("react.context"),fy=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),gm=Symbol.for("react.suspense_list"),py=Symbol.for("react.memo"),ci=Symbol.for("react.lazy"),iE=Symbol.for("react.offscreen"),R0=Symbol.iterator;function Ba(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Qf;function ll(t){if(Qf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qf=e&&e[1]||""}return`
`+Qf+t}var Yf=!1;function Xf(t,e){if(!t||Yf)return"";Yf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ll(t):""}function QN(t){switch(t.tag){case 5:return ll(t.type);case 16:return ll("Lazy");case 13:return ll("Suspense");case 19:return ll("SuspenseList");case 0:case 2:case 15:return t=Xf(t.type,!1),t;case 11:return t=Xf(t.type.render,!1),t;case 1:return t=Xf(t.type,!0),t;default:return""}}function ym(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wo:return"Fragment";case vo:return"Portal";case pm:return"Profiler";case dy:return"StrictMode";case mm:return"Suspense";case gm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rE:return(t.displayName||"Context")+".Consumer";case nE:return(t._context.displayName||"Context")+".Provider";case fy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case py:return e=t.displayName||null,e!==null?e:ym(t.type)||"Memo";case ci:e=t._payload,t=t._init;try{return ym(t(e))}catch{}}return null}function YN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ym(e);case 8:return e===dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XN(t){var e=sE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dc(t){t._valueTracker||(t._valueTracker=XN(t))}function oE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fh(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function vm(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function N0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aE(t,e){e=e.checked,e!=null&&hy(t,"checked",e,!1)}function wm(t,e){aE(t,e);var n=xi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_m(t,e.type,n):e.hasOwnProperty("defaultValue")&&_m(t,e.type,xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function D0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _m(t,e,n){(e!=="number"||fh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ul=Array.isArray;function Lo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Im(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function P0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(ul(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xi(n)}}function lE(t,e){var n=xi(e.value),r=xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function O0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function km(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fc,cE=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fc=fc||document.createElement("div"),fc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JN=["Webkit","ms","Moz","O"];Object.keys(yl).forEach(function(t){JN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yl[e]=yl[t]})});function hE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yl.hasOwnProperty(t)&&yl[t]?(""+e).trim():e+"px"}function dE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=hE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ZN=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Em(t,e){if(e){if(ZN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tm=null;function my(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bm=null,Mo=null,Fo=null;function L0(t){if(t=Ou(t)){if(typeof bm!="function")throw Error(P(280));var e=t.stateNode;e&&(e=_d(e),bm(t.stateNode,t.type,e))}}function fE(t){Mo?Fo?Fo.push(t):Fo=[t]:Mo=t}function pE(){if(Mo){var t=Mo,e=Fo;if(Fo=Mo=null,L0(t),e)for(t=0;t<e.length;t++)L0(e[t])}}function mE(t,e){return t(e)}function gE(){}var Jf=!1;function yE(t,e,n){if(Jf)return t(e,n);Jf=!0;try{return mE(t,e,n)}finally{Jf=!1,(Mo!==null||Fo!==null)&&(gE(),pE())}}function zl(t,e){var n=t.stateNode;if(n===null)return null;var r=_d(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var xm=!1;if(Hr)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){xm=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{xm=!1}function eD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var vl=!1,ph=null,mh=!1,Cm=null,tD={onError:function(t){vl=!0,ph=t}};function nD(t,e,n,r,i,s,o,a,l){vl=!1,ph=null,eD.apply(tD,arguments)}function rD(t,e,n,r,i,s,o,a,l){if(nD.apply(this,arguments),vl){if(vl){var u=ph;vl=!1,ph=null}else throw Error(P(198));mh||(mh=!0,Cm=u)}}function Js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M0(t){if(Js(t)!==t)throw Error(P(188))}function iD(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return M0(i),t;if(s===r)return M0(i),e;s=s.sibling}throw Error(P(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function wE(t){return t=iD(t),t!==null?_E(t):null}function _E(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_E(t);if(e!==null)return e;t=t.sibling}return null}var IE=kn.unstable_scheduleCallback,F0=kn.unstable_cancelCallback,sD=kn.unstable_shouldYield,oD=kn.unstable_requestPaint,Ve=kn.unstable_now,aD=kn.unstable_getCurrentPriorityLevel,gy=kn.unstable_ImmediatePriority,kE=kn.unstable_UserBlockingPriority,gh=kn.unstable_NormalPriority,lD=kn.unstable_LowPriority,EE=kn.unstable_IdlePriority,gd=null,mr=null;function uD(t){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(gd,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:dD,cD=Math.log,hD=Math.LN2;function dD(t){return t>>>=0,t===0?32:31-(cD(t)/hD|0)|0}var pc=64,mc=4194304;function cl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=cl(a):(s&=o,s!==0&&(r=cl(s)))}else o=n&~i,o!==0?r=cl(o):s!==0&&(r=cl(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),i=1<<n,r|=t[n],e&=~i;return r}function fD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xn(s),a=1<<o,l=i[o];l===-1?((a&n)===0||(a&r)!==0)&&(i[o]=fD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Am(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SE(){var t=pc;return pc<<=1,(pc&4194240)===0&&(pc=64),t}function Zf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Du(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function mD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function yy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function TE(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var bE,vy,xE,CE,AE,Rm=!1,gc=[],_i=null,Ii=null,ki=null,jl=new Map,ql=new Map,di=[],gD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $0(t,e){switch(t){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":jl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(e.pointerId)}}function za(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ou(e),e!==null&&vy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function yD(t,e,n,r,i){switch(e){case"focusin":return _i=za(_i,t,e,n,r,i),!0;case"dragenter":return Ii=za(Ii,t,e,n,r,i),!0;case"mouseover":return ki=za(ki,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return jl.set(s,za(jl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ql.set(s,za(ql.get(s)||null,t,e,n,r,i)),!0}return!1}function RE(t){var e=cs(t.target);if(e!==null){var n=Js(e);if(n!==null){if(e=n.tag,e===13){if(e=vE(n),e!==null){t.blockedOn=e,AE(t.priority,function(){xE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tm=r,n.target.dispatchEvent(r),Tm=null}else return e=Ou(n),e!==null&&vy(e),t.blockedOn=n,!1;e.shift()}return!0}function U0(t,e,n){Kc(t)&&n.delete(e)}function vD(){Rm=!1,_i!==null&&Kc(_i)&&(_i=null),Ii!==null&&Kc(Ii)&&(Ii=null),ki!==null&&Kc(ki)&&(ki=null),jl.forEach(U0),ql.forEach(U0)}function ja(t,e){t.blockedOn===e&&(t.blockedOn=null,Rm||(Rm=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,vD)))}function Hl(t){function e(i){return ja(i,t)}if(0<gc.length){ja(gc[0],t);for(var n=1;n<gc.length;n++){var r=gc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_i!==null&&ja(_i,t),Ii!==null&&ja(Ii,t),ki!==null&&ja(ki,t),jl.forEach(e),ql.forEach(e),n=0;n<di.length;n++)r=di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<di.length&&(n=di[0],n.blockedOn===null);)RE(n),n.blockedOn===null&&di.shift()}var $o=Jr.ReactCurrentBatchConfig,vh=!0;function wD(t,e,n,r){var i=fe,s=$o.transition;$o.transition=null;try{fe=1,wy(t,e,n,r)}finally{fe=i,$o.transition=s}}function _D(t,e,n,r){var i=fe,s=$o.transition;$o.transition=null;try{fe=4,wy(t,e,n,r)}finally{fe=i,$o.transition=s}}function wy(t,e,n,r){if(vh){var i=Nm(t,e,n,r);if(i===null)up(t,e,r,wh,n),$0(t,r);else if(yD(i,t,e,n,r))r.stopPropagation();else if($0(t,r),e&4&&-1<gD.indexOf(t)){for(;i!==null;){var s=Ou(i);if(s!==null&&bE(s),s=Nm(t,e,n,r),s===null&&up(t,e,r,wh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else up(t,e,r,null,n)}}var wh=null;function Nm(t,e,n,r){if(wh=null,t=my(r),t=cs(t),t!==null)if(e=Js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wh=t,null}function NE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aD()){case gy:return 1;case kE:return 4;case gh:case lD:return 16;case EE:return 536870912;default:return 16}default:return 16}}var gi=null,_y=null,Wc=null;function DE(){if(Wc)return Wc;var t,e=_y,n=e.length,r,i="value"in gi?gi.value:gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wc=i.slice(t,1<r?1-r:void 0)}function Gc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function B0(){return!1}function bn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yc:B0,this.isPropagationStopped=B0,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),e}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iy=bn(ya),Pu=Oe({},ya,{view:0,detail:0}),ID=bn(Pu),ep,tp,qa,yd=Oe({},Pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ky,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qa&&(qa&&t.type==="mousemove"?(ep=t.screenX-qa.screenX,tp=t.screenY-qa.screenY):tp=ep=0,qa=t),ep)},movementY:function(t){return"movementY"in t?t.movementY:tp}}),V0=bn(yd),kD=Oe({},yd,{dataTransfer:0}),ED=bn(kD),SD=Oe({},Pu,{relatedTarget:0}),np=bn(SD),TD=Oe({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),bD=bn(TD),xD=Oe({},ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CD=bn(xD),AD=Oe({},ya,{data:0}),z0=bn(AD),RD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ND={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DD[t])?!!e[t]:!1}function ky(){return PD}var OD=Oe({},Pu,{key:function(t){if(t.key){var e=RD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ND[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ky,charCode:function(t){return t.type==="keypress"?Gc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LD=bn(OD),MD=Oe({},yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j0=bn(MD),FD=Oe({},Pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ky}),$D=bn(FD),UD=Oe({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),BD=bn(UD),VD=Oe({},yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zD=bn(VD),jD=[9,13,27,32],Ey=Hr&&"CompositionEvent"in window,wl=null;Hr&&"documentMode"in document&&(wl=document.documentMode);var qD=Hr&&"TextEvent"in window&&!wl,PE=Hr&&(!Ey||wl&&8<wl&&11>=wl),q0=String.fromCharCode(32),H0=!1;function OE(t,e){switch(t){case"keyup":return jD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function HD(t,e){switch(t){case"compositionend":return LE(e);case"keypress":return e.which!==32?null:(H0=!0,q0);case"textInput":return t=e.data,t===q0&&H0?null:t;default:return null}}function KD(t,e){if(_o)return t==="compositionend"||!Ey&&OE(t,e)?(t=DE(),Wc=_y=gi=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PE&&e.locale!=="ko"?null:e.data;default:return null}}var WD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WD[t.type]:e==="textarea"}function ME(t,e,n,r){fE(r),e=_h(e,"onChange"),0<e.length&&(n=new Iy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _l=null,Kl=null;function GD(t){WE(t,0)}function vd(t){var e=Eo(t);if(oE(e))return t}function QD(t,e){if(t==="change")return e}var FE=!1;if(Hr){var rp;if(Hr){var ip="oninput"in document;if(!ip){var W0=document.createElement("div");W0.setAttribute("oninput","return;"),ip=typeof W0.oninput=="function"}rp=ip}else rp=!1;FE=rp&&(!document.documentMode||9<document.documentMode)}function G0(){_l&&(_l.detachEvent("onpropertychange",$E),Kl=_l=null)}function $E(t){if(t.propertyName==="value"&&vd(Kl)){var e=[];ME(e,Kl,t,my(t)),yE(GD,e)}}function YD(t,e,n){t==="focusin"?(G0(),_l=e,Kl=n,_l.attachEvent("onpropertychange",$E)):t==="focusout"&&G0()}function XD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vd(Kl)}function JD(t,e){if(t==="click")return vd(e)}function ZD(t,e){if(t==="input"||t==="change")return vd(e)}function eP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:eP;function Wl(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fm.call(e,i)||!Zn(t[i],e[i]))return!1}return!0}function Q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Y0(t,e){var n=Q0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q0(n)}}function UE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?UE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BE(){for(var t=window,e=fh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fh(t.document)}return e}function Sy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tP(t){var e=BE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&UE(n.ownerDocument.documentElement,n)){if(r!==null&&Sy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Y0(n,s);var o=Y0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nP=Hr&&"documentMode"in document&&11>=document.documentMode,Io=null,Dm=null,Il=null,Pm=!1;function X0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pm||Io==null||Io!==fh(r)||(r=Io,"selectionStart"in r&&Sy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Il&&Wl(Il,r)||(Il=r,r=_h(Dm,"onSelect"),0<r.length&&(e=new Iy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Io)))}function vc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ko={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},sp={},VE={};Hr&&(VE=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function wd(t){if(sp[t])return sp[t];if(!ko[t])return t;var e=ko[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in VE)return sp[t]=e[n];return t}var zE=wd("animationend"),jE=wd("animationiteration"),qE=wd("animationstart"),HE=wd("transitionend"),KE=new Map,J0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(t,e){KE.set(t,e),Xs(e,[t])}for(var op=0;op<J0.length;op++){var ap=J0[op],rP=ap.toLowerCase(),iP=ap[0].toUpperCase()+ap.slice(1);Ui(rP,"on"+iP)}Ui(zE,"onAnimationEnd");Ui(jE,"onAnimationIteration");Ui(qE,"onAnimationStart");Ui("dblclick","onDoubleClick");Ui("focusin","onFocus");Ui("focusout","onBlur");Ui(HE,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sP=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function Z0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rD(r,e,void 0,t),t.currentTarget=null}function WE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Z0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Z0(i,a,u),s=l}}}if(mh)throw t=Cm,mh=!1,Cm=null,t}function ke(t,e){var n=e[$m];n===void 0&&(n=e[$m]=new Set);var r=t+"__bubble";n.has(r)||(GE(e,t,2,!1),n.add(r))}function lp(t,e,n){var r=0;e&&(r|=4),GE(n,t,r,e)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Gl(t){if(!t[wc]){t[wc]=!0,tE.forEach(function(n){n!=="selectionchange"&&(sP.has(n)||lp(n,!1,t),lp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wc]||(e[wc]=!0,lp("selectionchange",!1,e))}}function GE(t,e,n,r){switch(NE(e)){case 1:var i=wD;break;case 4:i=_D;break;default:i=wy}n=i.bind(null,e,n,t),i=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function up(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=cs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}yE(function(){var u=s,c=my(n),h=[];e:{var d=KE.get(t);if(d!==void 0){var f=Iy,p=t;switch(t){case"keypress":if(Gc(n)===0)break e;case"keydown":case"keyup":f=LD;break;case"focusin":p="focus",f=np;break;case"focusout":p="blur",f=np;break;case"beforeblur":case"afterblur":f=np;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=V0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ED;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=$D;break;case zE:case jE:case qE:f=bD;break;case HE:f=BD;break;case"scroll":f=ID;break;case"wheel":f=zD;break;case"copy":case"cut":case"paste":f=CD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=j0}var v=(e&4)!==0,E=!v&&t==="scroll",m=v?d!==null?d+"Capture":null:d;v=[];for(var y=u,g;y!==null;){g=y;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,m!==null&&(S=zl(y,m),S!=null&&v.push(Ql(y,S,g)))),E)break;y=y.return}0<v.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:v}))}}if((e&7)===0){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Tm&&(p=n.relatedTarget||n.fromElement)&&(cs(p)||p[Kr]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?cs(p):null,p!==null&&(E=Js(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(v=V0,S="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=j0,S="onPointerLeave",m="onPointerEnter",y="pointer"),E=f==null?d:Eo(f),g=p==null?d:Eo(p),d=new v(S,y+"leave",f,n,c),d.target=E,d.relatedTarget=g,S=null,cs(c)===u&&(v=new v(m,y+"enter",p,n,c),v.target=g,v.relatedTarget=E,S=v),E=S,f&&p)t:{for(v=f,m=p,y=0,g=v;g;g=co(g))y++;for(g=0,S=m;S;S=co(S))g++;for(;0<y-g;)v=co(v),y--;for(;0<g-y;)m=co(m),g--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=co(v),m=co(m)}v=null}else v=null;f!==null&&e_(h,d,f,v,!1),p!==null&&E!==null&&e_(h,E,p,v,!0)}}e:{if(d=u?Eo(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var b=QD;else if(K0(d))if(FE)b=ZD;else{b=XD;var k=YD}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=JD);if(b&&(b=b(t,u))){ME(h,b,n,c);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&_m(d,"number",d.value)}switch(k=u?Eo(u):window,t){case"focusin":(K0(k)||k.contentEditable==="true")&&(Io=k,Dm=u,Il=null);break;case"focusout":Il=Dm=Io=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,X0(h,n,c);break;case"selectionchange":if(nP)break;case"keydown":case"keyup":X0(h,n,c)}var C;if(Ey)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else _o?OE(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(PE&&n.locale!=="ko"&&(_o||R!=="onCompositionStart"?R==="onCompositionEnd"&&_o&&(C=DE()):(gi=c,_y="value"in gi?gi.value:gi.textContent,_o=!0)),k=_h(u,R),0<k.length&&(R=new z0(R,t,null,n,c),h.push({event:R,listeners:k}),C?R.data=C:(C=LE(n),C!==null&&(R.data=C)))),(C=qD?HD(t,n):KD(t,n))&&(u=_h(u,"onBeforeInput"),0<u.length&&(c=new z0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=C))}WE(h,e)})}function Ql(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _h(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zl(t,n),s!=null&&r.unshift(Ql(t,s,i)),s=zl(t,e),s!=null&&r.push(Ql(t,s,i))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function e_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=zl(n,s),l!=null&&o.unshift(Ql(n,l,a))):i||(l=zl(n,s),l!=null&&o.push(Ql(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oP=/\r\n?/g,aP=/\u0000|\uFFFD/g;function t_(t){return(typeof t=="string"?t:""+t).replace(oP,`
`).replace(aP,"")}function _c(t,e,n){if(e=t_(e),t_(t)!==e&&n)throw Error(P(425))}function Ih(){}var Om=null,Lm=null;function Mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fm=typeof setTimeout=="function"?setTimeout:void 0,lP=typeof clearTimeout=="function"?clearTimeout:void 0,n_=typeof Promise=="function"?Promise:void 0,uP=typeof queueMicrotask=="function"?queueMicrotask:typeof n_!="undefined"?function(t){return n_.resolve(null).then(t).catch(cP)}:Fm;function cP(t){setTimeout(function(){throw t})}function cp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hl(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var va=Math.random().toString(36).slice(2),sr="__reactFiber$"+va,Yl="__reactProps$"+va,Kr="__reactContainer$"+va,$m="__reactEvents$"+va,hP="__reactListeners$"+va,dP="__reactHandles$"+va;function cs(t){var e=t[sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=r_(t);t!==null;){if(n=t[sr])return n;t=r_(t)}return e}t=n,n=t.parentNode}return null}function Ou(t){return t=t[sr]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function _d(t){return t[Yl]||null}var Um=[],So=-1;function Bi(t){return{current:t}}function Se(t){0>So||(t.current=Um[So],Um[So]=null,So--)}function _e(t,e){So++,Um[So]=t.current,t.current=e}var Ci={},Pt=Bi(Ci),cn=Bi(!1),Ts=Ci;function Jo(t,e){var n=t.type.contextTypes;if(!n)return Ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hn(t){return t=t.childContextTypes,t!=null}function kh(){Se(cn),Se(Pt)}function i_(t,e,n){if(Pt.current!==Ci)throw Error(P(168));_e(Pt,e),_e(cn,n)}function QE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(P(108,YN(t)||"Unknown",i));return Oe({},n,r)}function Eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ci,Ts=Pt.current,_e(Pt,t),_e(cn,cn.current),!0}function s_(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=QE(t,e,Ts),r.__reactInternalMemoizedMergedChildContext=t,Se(cn),Se(Pt),_e(Pt,t)):Se(cn),_e(cn,n)}var Dr=null,Id=!1,hp=!1;function YE(t){Dr===null?Dr=[t]:Dr.push(t)}function fP(t){Id=!0,YE(t)}function Vi(){if(!hp&&Dr!==null){hp=!0;var t=0,e=fe;try{var n=Dr;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,Id=!1}catch(i){throw Dr!==null&&(Dr=Dr.slice(t+1)),IE(gy,Vi),i}finally{fe=e,hp=!1}}return null}var pP=Jr.ReactCurrentBatchConfig;function Kn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Sh=Bi(null),Th=null,To=null,Ty=null;function by(){Ty=To=Th=null}function xy(t){var e=Sh.current;Se(Sh),t._currentValue=e}function Bm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Uo(t,e){Th=t,Ty=To=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(an=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Ty!==t)if(t={context:t,memoizedValue:e,next:null},To===null){if(Th===null)throw Error(P(308));To=t,Th.dependencies={lanes:0,firstContext:t}}else To=To.next=t;return e}var Qn=null,hi=!1;function Cy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e){var n=t.updateQueue;n!==null&&(n=n.shared,BS(t)?(t=n.interleaved,t===null?(e.next=e,Qn===null?Qn=[n]:Qn.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(t=n.pending,t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function Qc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yy(t,n)}}function o_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bh(t,e,n,r){var i=t.updateQueue;hi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,v=a;switch(d=e,f=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Oe({},h,d);break e;case 2:hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Cs|=o,t.lanes=o,t.memoizedState=h}}function a_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(P(191,i));i.call(r)}}}var JE=new eE.Component().refs;function Vm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kd={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wt(),i=Ti(t),s=Vr(r,i);s.payload=e,n!=null&&(s.callback=n),Ei(t,s),e=Ln(t,i,r),e!==null&&Qc(e,t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wt(),i=Ti(t),s=Vr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),Ei(t,s),e=Ln(t,i,r),e!==null&&Qc(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),r=Ti(t),i=Vr(n,r);i.tag=2,e!=null&&(i.callback=e),Ei(t,i),e=Ln(t,r,n),e!==null&&Qc(e,t,r)}};function l_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wl(n,r)||!Wl(i,s):!0}function ZE(t,e,n){var r=!1,i=Ci,s=e.contextType;return typeof s=="object"&&s!==null?s=Fn(s):(i=hn(e)?Ts:Pt.current,r=e.contextTypes,s=(r=r!=null)?Jo(t,i):Ci),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function u_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kd.enqueueReplaceState(e,e.state,null)}function zm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=JE,Cy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fn(s):(s=hn(e)?Ts:Pt.current,i.context=Jo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kd.enqueueReplaceState(i,i.state,null),bh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}var bo=[],xo=0,xh=null,Ch=0,Cn=[],An=0,bs=null,Lr=1,Mr="";function es(t,e){bo[xo++]=Ch,bo[xo++]=xh,xh=t,Ch=e}function eS(t,e,n){Cn[An++]=Lr,Cn[An++]=Mr,Cn[An++]=bs,bs=t;var r=Lr;t=Mr;var i=32-Xn(r)-1;r&=~(1<<i),n+=1;var s=32-Xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Lr=1<<32-Xn(e)+i|n<<i|r,Mr=s+t}else Lr=1<<s|n<<i|r,Mr=t}function Ay(t){t.return!==null&&(es(t,1),eS(t,1,0))}function Ry(t){for(;t===xh;)xh=bo[--xo],bo[xo]=null,Ch=bo[--xo],bo[xo]=null;for(;t===bs;)bs=Cn[--An],Cn[An]=null,Mr=Cn[--An],Cn[An]=null,Lr=Cn[--An],Cn[An]=null}var _n=null,on=null,xe=!1,Gn=null;function tS(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,on=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:Lr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,on=null,!0):!1;default:return!1}}function jm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qm(t){if(xe){var e=on;if(e){var n=e;if(!c_(t,e)){if(jm(t))throw Error(P(418));e=Or(n.nextSibling);var r=_n;e&&c_(t,e)?tS(r,n):(t.flags=t.flags&-4097|2,xe=!1,_n=t)}}else{if(jm(t))throw Error(P(418));t.flags=t.flags&-4097|2,xe=!1,_n=t}}}function h_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function Ha(t){if(t!==_n)return!1;if(!xe)return h_(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mm(t.type,t.memoizedProps)),e&&(e=on)){if(jm(t)){for(t=on;t;)t=Or(t.nextSibling);throw Error(P(418))}for(;e;)tS(t,e),e=Or(e.nextSibling)}if(h_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=_n?Or(t.stateNode.nextSibling):null;return!0}function Zo(){on=_n=null,xe=!1}function Ny(t){Gn===null?Gn=[t]:Gn.push(t)}function Ka(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===JE&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function Ic(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d_(t){var e=t._init;return e(t._payload)}function nS(t){function e(m,y){if(t){var g=m.deletions;g===null?(m.deletions=[y],m.flags|=16):g.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Ai(m,y),m.index=0,m.sibling=null,m}function s(m,y,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<y?(m.flags|=2,y):g):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,g,S){return y===null||y.tag!==6?(y=yp(g,m.mode,S),y.return=m,y):(y=i(y,g),y.return=m,y)}function l(m,y,g,S){var b=g.type;return b===wo?c(m,y,g.props.children,S,g.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ci&&d_(b)===y.type)?(S=i(y,g.props),S.ref=Ka(m,y,g),S.return=m,S):(S=eh(g.type,g.key,g.props,null,m.mode,S),S.ref=Ka(m,y,g),S.return=m,S)}function u(m,y,g,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=vp(g,m.mode,S),y.return=m,y):(y=i(y,g.children||[]),y.return=m,y)}function c(m,y,g,S,b){return y===null||y.tag!==7?(y=_s(g,m.mode,S,b),y.return=m,y):(y=i(y,g),y.return=m,y)}function h(m,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=yp(""+y,m.mode,g),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hc:return g=eh(y.type,y.key,y.props,null,m.mode,g),g.ref=Ka(m,null,y),g.return=m,g;case vo:return y=vp(y,m.mode,g),y.return=m,y;case ci:var S=y._init;return h(m,S(y._payload),g)}if(ul(y)||Ba(y))return y=_s(y,m.mode,g,null),y.return=m,y;Ic(m,y)}return null}function d(m,y,g,S){var b=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return b!==null?null:a(m,y,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case hc:return g.key===b?l(m,y,g,S):null;case vo:return g.key===b?u(m,y,g,S):null;case ci:return b=g._init,d(m,y,b(g._payload),S)}if(ul(g)||Ba(g))return b!==null?null:c(m,y,g,S,null);Ic(m,g)}return null}function f(m,y,g,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(g)||null,a(y,m,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hc:return m=m.get(S.key===null?g:S.key)||null,l(y,m,S,b);case vo:return m=m.get(S.key===null?g:S.key)||null,u(y,m,S,b);case ci:var k=S._init;return f(m,y,g,k(S._payload),b)}if(ul(S)||Ba(S))return m=m.get(g)||null,c(y,m,S,b,null);Ic(y,S)}return null}function p(m,y,g,S){for(var b=null,k=null,C=y,R=y=0,H=null;C!==null&&R<g.length;R++){C.index>R?(H=C,C=null):H=C.sibling;var G=d(m,C,g[R],S);if(G===null){C===null&&(C=H);break}t&&C&&G.alternate===null&&e(m,C),y=s(G,y,R),k===null?b=G:k.sibling=G,k=G,C=H}if(R===g.length)return n(m,C),xe&&es(m,R),b;if(C===null){for(;R<g.length;R++)C=h(m,g[R],S),C!==null&&(y=s(C,y,R),k===null?b=C:k.sibling=C,k=C);return xe&&es(m,R),b}for(C=r(m,C);R<g.length;R++)H=f(C,m,R,g[R],S),H!==null&&(t&&H.alternate!==null&&C.delete(H.key===null?R:H.key),y=s(H,y,R),k===null?b=H:k.sibling=H,k=H);return t&&C.forEach(function(U){return e(m,U)}),xe&&es(m,R),b}function v(m,y,g,S){var b=Ba(g);if(typeof b!="function")throw Error(P(150));if(g=b.call(g),g==null)throw Error(P(151));for(var k=b=null,C=y,R=y=0,H=null,G=g.next();C!==null&&!G.done;R++,G=g.next()){C.index>R?(H=C,C=null):H=C.sibling;var U=d(m,C,G.value,S);if(U===null){C===null&&(C=H);break}t&&C&&U.alternate===null&&e(m,C),y=s(U,y,R),k===null?b=U:k.sibling=U,k=U,C=H}if(G.done)return n(m,C),xe&&es(m,R),b;if(C===null){for(;!G.done;R++,G=g.next())G=h(m,G.value,S),G!==null&&(y=s(G,y,R),k===null?b=G:k.sibling=G,k=G);return xe&&es(m,R),b}for(C=r(m,C);!G.done;R++,G=g.next())G=f(C,m,R,G.value,S),G!==null&&(t&&G.alternate!==null&&C.delete(G.key===null?R:G.key),y=s(G,y,R),k===null?b=G:k.sibling=G,k=G);return t&&C.forEach(function(Y){return e(m,Y)}),xe&&es(m,R),b}function E(m,y,g,S){if(typeof g=="object"&&g!==null&&g.type===wo&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case hc:e:{for(var b=g.key,k=y;k!==null;){if(k.key===b){if(b=g.type,b===wo){if(k.tag===7){n(m,k.sibling),y=i(k,g.props.children),y.return=m,m=y;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ci&&d_(b)===k.type){n(m,k.sibling),y=i(k,g.props),y.ref=Ka(m,k,g),y.return=m,m=y;break e}n(m,k);break}else e(m,k);k=k.sibling}g.type===wo?(y=_s(g.props.children,m.mode,S,g.key),y.return=m,m=y):(S=eh(g.type,g.key,g.props,null,m.mode,S),S.ref=Ka(m,y,g),S.return=m,m=S)}return o(m);case vo:e:{for(k=g.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){n(m,y.sibling),y=i(y,g.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=vp(g,m.mode,S),y.return=m,m=y}return o(m);case ci:return k=g._init,E(m,y,k(g._payload),S)}if(ul(g))return p(m,y,g,S);if(Ba(g))return v(m,y,g,S);Ic(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,g),y.return=m,m=y):(n(m,y),y=yp(g,m.mode,S),y.return=m,m=y),o(m)):n(m,y)}return E}var ea=nS(!0),rS=nS(!1),Lu={},gr=Bi(Lu),Xl=Bi(Lu),Jl=Bi(Lu);function hs(t){if(t===Lu)throw Error(P(174));return t}function Dy(t,e){switch(_e(Jl,e),_e(Xl,t),_e(gr,Lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:km(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=km(e,t)}Se(gr),_e(gr,e)}function ta(){Se(gr),Se(Xl),Se(Jl)}function iS(t){hs(Jl.current);var e=hs(gr.current),n=km(e,t.type);e!==n&&(_e(Xl,t),_e(gr,n))}function Py(t){Xl.current===t&&(Se(gr),Se(Xl))}var Ne=Bi(0);function Ah(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dp=[];function Oy(){for(var t=0;t<dp.length;t++)dp[t]._workInProgressVersionPrimary=null;dp.length=0}var Yc=Jr.ReactCurrentDispatcher,fp=Jr.ReactCurrentBatchConfig,xs=0,Pe=null,Ye=null,it=null,Rh=!1,kl=!1,Zl=0,mP=0;function xt(){throw Error(P(321))}function Ly(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function My(t,e,n,r,i,s){if(xs=s,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yc.current=t===null||t.memoizedState===null?wP:_P,t=n(r,i),kl){s=0;do{if(kl=!1,Zl=0,25<=s)throw Error(P(301));s+=1,it=Ye=null,e.updateQueue=null,Yc.current=IP,t=n(r,i)}while(kl)}if(Yc.current=Nh,e=Ye!==null&&Ye.next!==null,xs=0,it=Ye=Pe=null,Rh=!1,e)throw Error(P(300));return t}function Fy(){var t=Zl!==0;return Zl=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Pe.memoizedState=it=t:it=it.next=t,it}function $n(){if(Ye===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=it===null?Pe.memoizedState:it.next;if(e!==null)it=e,Ye=t;else{if(t===null)throw Error(P(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},it===null?Pe.memoizedState=it=t:it=it.next=t}return it}function eu(t,e){return typeof e=="function"?e(t):e}function pp(t){var e=$n(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((xs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Pe.lanes|=c,Cs|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Zn(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Pe.lanes|=s,Cs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mp(t){var e=$n(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Zn(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function sS(){}function oS(t,e){var n=Pe,r=$n(),i=e(),s=!Zn(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,$y(uS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,tu(9,lS.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(P(349));(xs&30)!==0||aS(n,e,i)}return i}function aS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lS(t,e,n,r){e.value=n,e.getSnapshot=r,cS(e)&&Ln(t,1,-1)}function uS(t,e,n){return n(function(){cS(e)&&Ln(t,1,-1)})}function cS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function f_(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:t},e.queue=t,t=t.dispatch=vP.bind(null,Pe,t),[e.memoizedState,t]}function tu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hS(){return $n().memoizedState}function Xc(t,e,n,r){var i=rr();Pe.flags|=t,i.memoizedState=tu(1|e,n,void 0,r===void 0?null:r)}function Ed(t,e,n,r){var i=$n();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,r!==null&&Ly(r,o.deps)){i.memoizedState=tu(e,n,s,r);return}}Pe.flags|=t,i.memoizedState=tu(1|e,n,s,r)}function p_(t,e){return Xc(8390656,8,t,e)}function $y(t,e){return Ed(2048,8,t,e)}function dS(t,e){return Ed(4,2,t,e)}function fS(t,e){return Ed(4,4,t,e)}function pS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mS(t,e,n){return n=n!=null?n.concat([t]):null,Ed(4,4,pS.bind(null,e,t),n)}function Uy(){}function gS(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ly(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yS(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ly(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vS(t,e,n){return(xs&21)===0?(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n):(Zn(n,e)||(n=SE(),Pe.lanes|=n,Cs|=n,t.baseState=!0),e)}function gP(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=fp.transition;fp.transition={};try{t(!1),e()}finally{fe=n,fp.transition=r}}function wS(){return $n().memoizedState}function yP(t,e,n){var r=Ti(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_S(t)?IS(e,n):(kS(t,e,n),n=Wt(),t=Ln(t,r,n),t!==null&&ES(t,e,r))}function vP(t,e,n){var r=Ti(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_S(t))IS(e,i);else{kS(t,e,i);var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Zn(a,o))return}catch{}finally{}n=Wt(),t=Ln(t,r,n),t!==null&&ES(t,e,r)}}function _S(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function IS(t,e){kl=Rh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kS(t,e,n){BS(t)?(t=e.interleaved,t===null?(n.next=n,Qn===null?Qn=[e]:Qn.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(t=e.pending,t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function ES(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yy(t,n)}}var Nh={readContext:Fn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},wP={readContext:Fn,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:p_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xc(4194308,4,pS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xc(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yP.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:f_,useDebugValue:Uy,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=f_(!1),e=t[0];return t=gP.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,i=rr();if(xe){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),Ze===null)throw Error(P(349));(xs&30)!==0||aS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,p_(uS.bind(null,r,s,t),[t]),r.flags|=2048,tu(9,lS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rr(),e=Ze.identifierPrefix;if(xe){var n=Mr,r=Lr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_P={readContext:Fn,useCallback:gS,useContext:Fn,useEffect:$y,useImperativeHandle:mS,useInsertionEffect:dS,useLayoutEffect:fS,useMemo:yS,useReducer:pp,useRef:hS,useState:function(){return pp(eu)},useDebugValue:Uy,useDeferredValue:function(t){var e=$n();return vS(e,Ye.memoizedState,t)},useTransition:function(){var t=pp(eu)[0],e=$n().memoizedState;return[t,e]},useMutableSource:sS,useSyncExternalStore:oS,useId:wS,unstable_isNewReconciler:!1},IP={readContext:Fn,useCallback:gS,useContext:Fn,useEffect:$y,useImperativeHandle:mS,useInsertionEffect:dS,useLayoutEffect:fS,useMemo:yS,useReducer:mp,useRef:hS,useState:function(){return mp(eu)},useDebugValue:Uy,useDeferredValue:function(t){var e=$n();return Ye===null?e.memoizedState=t:vS(e,Ye.memoizedState,t)},useTransition:function(){var t=mp(eu)[0],e=$n().memoizedState;return[t,e]},useMutableSource:sS,useSyncExternalStore:oS,useId:wS,unstable_isNewReconciler:!1};function By(t,e){try{var n="",r=e;do n+=QN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function Hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kP=typeof WeakMap=="function"?WeakMap:Map;function SS(t,e,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ph||(Ph=!0,eg=r),Hm(t,e)},n}function TS(t,e,n){n=Vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hm(t,e),typeof r!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function m_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=LP.bind(null,t,e,n),e.then(t,t))}function g_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y_(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vr(-1,1),e.tag=2,Ei(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var bS,Km,xS,CS;bS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Km=function(){};xS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hs(gr.current);var s=null;switch(n){case"input":i=vm(t,i),r=vm(t,r),s=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":i=Im(t,i),r=Im(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ih)}Em(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};CS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wa(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EP(t,e,n){var r=e.pendingProps;switch(Ry(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return hn(e.type)&&kh(),Ct(e),null;case 3:return r=e.stateNode,ta(),Se(cn),Se(Pt),Oy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Gn!==null&&(rg(Gn),Gn=null))),Km(t,e),Ct(e),null;case 5:Py(e);var i=hs(Jl.current);if(n=e.type,t!==null&&e.stateNode!=null)xS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return Ct(e),null}if(t=hs(gr.current),Ha(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sr]=e,r[Yl]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<hl.length;i++)ke(hl[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":N0(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":P0(r,s),ke("invalid",r)}Em(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&_c(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_c(r.textContent,a,t),i=["children",""+a]):Bl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":dc(r),D0(r,s,!0);break;case"textarea":dc(r),O0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ih)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sr]=e,t[Yl]=r,bS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sm(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<hl.length;i++)ke(hl[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":N0(t,r),i=vm(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),ke("invalid",t);break;case"textarea":P0(t,r),i=Im(t,r),ke("invalid",t);break;default:i=r}Em(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vl(t,l):typeof l=="number"&&Vl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&hy(t,s,l,o))}switch(n){case"input":dc(t),D0(t,r,!1);break;case"textarea":dc(t),O0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Lo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ih)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)CS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=hs(Jl.current),hs(gr.current),Ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[sr]=e,(s=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:_c(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_c(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sr]=e,e.stateNode=r}return Ct(e),null;case 13:if(Se(Ne),r=e.memoizedState,xe&&on!==null&&(e.mode&1)!==0&&(e.flags&128)===0){for(r=on;r;)r=Or(r.nextSibling);return Zo(),e.flags|=98560,e}if(r!==null&&r.dehydrated!==null){if(r=Ha(e),t===null){if(!r)throw Error(P(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[sr]=e}else Zo(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return Ct(e),null}return Gn!==null&&(rg(Gn),Gn=null),(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?Ha(e):n=t.memoizedState!==null,r!==n&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Ne.current&1)!==0?Je===0&&(Je=3):Ky())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return ta(),Km(t,e),t===null&&Gl(e.stateNode.containerInfo),Ct(e),null;case 10:return xy(e.type._context),Ct(e),null;case 17:return hn(e.type)&&kh(),Ct(e),null;case 19:if(Se(Ne),s=e.memoizedState,s===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Wa(s,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Ah(t),o!==null){for(e.flags|=128,Wa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>na&&(e.flags|=128,r=!0,Wa(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ah(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xe)return Ct(e),null}else 2*Ve()-s.renderingStartTime>na&&n!==1073741824&&(e.flags|=128,r=!0,Wa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,n=Ne.current,_e(Ne,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return Hy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(gn&1073741824)!==0&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}var SP=Jr.ReactCurrentOwner,an=!1;function Ut(t,e,n,r){e.child=t===null?rS(e,null,n,r):ea(e,t.child,n,r)}function v_(t,e,n,r,i){n=n.render;var s=e.ref;return Uo(e,i),r=My(t,e,n,r,s,i),n=Fy(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(xe&&n&&Ay(e),e.flags|=1,Ut(t,e,r,i),e.child)}function w_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,AS(t,e,s,r,i)):(t=eh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wl,n(o,r)&&t.ref===e.ref)return Wr(t,e,i)}return e.flags|=1,t=Ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function AS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Wl(s,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(an=!0);else return e.lanes=t.lanes,Wr(t,e,i)}return Wm(t,e,n,r,i)}function RS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Ao,gn),gn|=n;else if((n&1073741824)!==0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(Ao,gn),gn|=r;else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(Ao,gn),gn|=t,null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(Ao,gn),gn|=r;return Ut(t,e,i,n),e.child}function NS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wm(t,e,n,r,i){var s=hn(n)?Ts:Pt.current;return s=Jo(e,s),Uo(e,i),n=My(t,e,n,r,s,i),r=Fy(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(xe&&r&&Ay(e),e.flags|=1,Ut(t,e,n,i),e.child)}function __(t,e,n,r,i){if(hn(n)){var s=!0;Eh(e)}else s=!1;if(Uo(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),ZE(e,n,r),zm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fn(u):(u=hn(n)?Ts:Pt.current,u=Jo(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&u_(e,o,r,u),hi=!1;var d=e.memoizedState;o.state=d,bh(e,r,o,i),l=e.memoizedState,a!==r||d!==l||cn.current||hi?(typeof c=="function"&&(Vm(e,n,c,r),l=e.memoizedState),(a=hi||l_(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kn(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=hn(n)?Ts:Pt.current,l=Jo(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&u_(e,o,r,l),hi=!1,d=e.memoizedState,o.state=d,bh(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||cn.current||hi?(typeof f=="function"&&(Vm(e,n,f,r),p=e.memoizedState),(u=hi||l_(e,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Gm(t,e,n,r,s,i)}function Gm(t,e,n,r,i,s){NS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&s_(e,n,!1),Wr(t,e,s);r=e.stateNode,SP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ea(e,t.child,null,s),e.child=ea(e,null,a,s)):Ut(t,e,a,s),e.memoizedState=r.state,i&&s_(e,n,!0),e.child}function DS(t){var e=t.stateNode;e.pendingContext?i_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i_(t,e.context,!1),Dy(t,e.containerInfo)}function I_(t,e,n,r,i){return Zo(),Ny(i),e.flags|=256,Ut(t,e,n,r),e.child}var kc={dehydrated:null,treeContext:null,retryLane:0};function Ec(t){return{baseLanes:t,cachePool:null,transitions:null}}function k_(t,e){return{baseLanes:t.baseLanes|e,cachePool:null,transitions:t.transitions}}function PS(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(Ne,i&1),t===null)return qm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Mh(i,r,0,null),t=_s(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ec(n),e.memoizedState=kc,t):Qm(e,i));if(i=t.memoizedState,i!==null){if(a=i.dehydrated,a!==null){if(o)return e.flags&256?(e.flags&=-257,Sc(t,e,n,Error(P(422)))):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Mh({mode:"visible",children:r.children},i,0,null),s=_s(s,i,n,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&ea(e,t.child,null,n),e.child.memoizedState=Ec(n),e.memoizedState=kc,s);if((e.mode&1)===0)e=Sc(t,e,n,null);else if(a.data==="$!")e=Sc(t,e,n,Error(P(419)));else if(r=(n&t.childLanes)!==0,an||r){if(r=Ze,r!==null){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}r=(s&(r.suspendedLanes|n))!==0?0:s,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ln(t,r,-1))}Ky(),e=Sc(t,e,n,Error(P(421)))}else a.data==="$?"?(e.flags|=128,e.child=t.child,e=MP.bind(null,t),a._reactRetry=e,e=null):(n=i.treeContext,on=Or(a.nextSibling),_n=e,xe=!0,Gn=null,n!==null&&(Cn[An++]=Lr,Cn[An++]=Mr,Cn[An++]=bs,Lr=n.id,Mr=n.overflow,bs=e),e=Qm(e,e.pendingProps.children),e.flags|=4096);return e}return s?(r=S_(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?Ec(n):k_(i,n),s.childLanes=t.childLanes&~n,e.memoizedState=kc,r):(n=E_(t,e,r.children,n),e.memoizedState=null,n)}return s?(r=S_(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?Ec(n):k_(i,n),s.childLanes=t.childLanes&~n,e.memoizedState=kc,r):(n=E_(t,e,r.children,n),e.memoizedState=null,n)}function Qm(t,e){return e=Mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function E_(t,e,n,r){var i=t.child;return t=i.sibling,n=Ai(i,{mode:"visible",children:n}),(e.mode&1)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function S_(t,e,n,r,i){var s=e.mode;t=t.child;var o=t.sibling,a={mode:"hidden",children:n};return(s&1)===0&&e.child!==t?(n=e.child,n.childLanes=0,n.pendingProps=a,e.deletions=null):(n=Ai(t,a),n.subtreeFlags=t.subtreeFlags&14680064),o!==null?r=Ai(o,r):(r=_s(r,s,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function Sc(t,e,n,r){return r!==null&&Ny(r),ea(e,t.child,null,n),t=Qm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function T_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bm(t.return,e,n)}function gp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function OS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ut(t,e,r.children,n),r=Ne.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T_(t,n,e);else if(t.tag===19)T_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ne,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ah(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ah(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gp(e,!0,n,null,s);break;case"together":gp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cs|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TP(t,e,n){switch(e.tag){case 3:DS(e),Zo();break;case 5:iS(e);break;case 1:hn(e.type)&&Eh(e);break;case 4:Dy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(Sh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ne,Ne.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?PS(t,e,n):(_e(Ne,Ne.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);_e(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return OS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,RS(t,e,n)}return Wr(t,e,n)}function bP(t,e){switch(Ry(e),e.tag){case 1:return hn(e.type)&&kh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ta(),Se(cn),Se(Pt),Oy(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Py(e),null;case 13:if(Se(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ne),null;case 4:return ta(),null;case 10:return xy(e.type._context),null;case 22:case 23:return Hy(),null;case 24:return null;default:return null}}var Tc=!1,At=!1,xP=typeof WeakSet=="function"?WeakSet:Set,z=null;function Co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Ym(t,e,n){try{n()}catch(r){Le(t,e,r)}}var b_=!1;function CP(t,e){if(Om=vh,t=BE(),Sy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lm={focusedElem:t,selectionRange:n},vh=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,E=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Kn(e.type,v),E);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=e.stateNode.containerInfo;if(g.nodeType===1)g.textContent="";else if(g.nodeType===9){var S=g.body;S!=null&&(S.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(b){Le(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return p=b_,b_=!1,p}function El(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ym(e,n,s)}i=i.next}while(i!==r)}}function Sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LS(t){var e=t.alternate;e!==null&&(t.alternate=null,LS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[Yl],delete e[$m],delete e[hP],delete e[dP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MS(t){return t.tag===5||t.tag===3||t.tag===4}function x_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ih));else if(r!==4&&(t=t.child,t!==null))for(Jm(t,e,n),t=t.sibling;t!==null;)Jm(t,e,n),t=t.sibling}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}var gt=null,Wn=!1;function oi(t,e,n){for(n=n.child;n!==null;)FS(t,e,n),n=n.sibling}function FS(t,e,n){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(gd,n)}catch{}switch(n.tag){case 5:At||Co(n,e);case 6:var r=gt,i=Wn;gt=null,oi(t,e,n),gt=r,Wn=i,gt!==null&&(Wn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Wn?(t=gt,n=n.stateNode,t.nodeType===8?cp(t.parentNode,n):t.nodeType===1&&cp(t,n),Hl(t)):cp(gt,n.stateNode));break;case 4:r=gt,i=Wn,gt=n.stateNode.containerInfo,Wn=!0,oi(t,e,n),gt=r,Wn=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Ym(n,e,o),i=i.next}while(i!==r)}oi(t,e,n);break;case 1:if(!At&&(Co(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Le(n,e,a)}oi(t,e,n);break;case 21:oi(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,oi(t,e,n),At=r):oi(t,e,n);break;default:oi(t,e,n)}}function C_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xP),e.forEach(function(r){var i=FP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Wn=!1;break e;case 3:gt=a.stateNode.containerInfo,Wn=!0;break e;case 4:gt=a.stateNode.containerInfo,Wn=!0;break e}a=a.return}if(gt===null)throw Error(P(160));FS(s,o,i),gt=null,Wn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Le(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$S(e,t),e=e.sibling}function $S(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),nr(t),r&4){try{El(3,t,t.return),Sd(3,t)}catch(p){Le(t,t.return,p)}try{El(5,t,t.return)}catch(p){Le(t,t.return,p)}}break;case 1:Hn(e,t),nr(t),r&512&&n!==null&&Co(n,n.return);break;case 5:if(Hn(e,t),nr(t),r&512&&n!==null&&Co(n,n.return),t.flags&32){var i=t.stateNode;try{Vl(i,"")}catch(p){Le(t,t.return,p)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aE(i,s),Sm(a,o);var u=Sm(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?dE(i,h):c==="dangerouslySetInnerHTML"?cE(i,h):c==="children"?Vl(i,h):hy(i,c,h,u)}switch(a){case"input":wm(i,s);break;case"textarea":lE(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Lo(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Lo(i,!!s.multiple,s.defaultValue,!0):Lo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yl]=s}catch(p){Le(t,t.return,p)}}break;case 6:if(Hn(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(P(162));u=t.stateNode,c=t.memoizedProps;try{u.nodeValue=c}catch(p){Le(t,t.return,p)}}break;case 3:if(Hn(e,t),nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hl(e.containerInfo)}catch(p){Le(t,t.return,p)}break;case 4:Hn(e,t),nr(t);break;case 13:Hn(e,t),nr(t),u=t.child,u.flags&8192&&u.memoizedState!==null&&(u.alternate===null||u.alternate.memoizedState===null)&&(jy=Ve()),r&4&&C_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(At=(c=At)||u,Hn(e,t),At=c):Hn(e,t),nr(t),r&8192){c=t.memoizedState!==null;e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hE("display",o))}catch(p){Le(t,t.return,p)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(p){Le(t,t.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(c&&!u&&(t.mode&1)!==0)for(z=t,t=t.child;t!==null;){for(u=z=t;z!==null;){switch(c=z,h=c.child,c.tag){case 0:case 11:case 14:case 15:El(4,c,c.return);break;case 1:if(Co(c,c.return),s=c.stateNode,typeof s.componentWillUnmount=="function"){d=c,f=c.return;try{i=d,s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(p){Le(d,f,p)}}break;case 5:Co(c,c.return);break;case 22:if(c.memoizedState!==null){R_(u);continue}}h!==null?(h.return=c,z=h):R_(u)}t=t.sibling}}break;case 19:Hn(e,t),nr(t),r&4&&C_(t);break;case 21:break;default:Hn(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(MS(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vl(i,""),r.flags&=-33);var s=x_(t);Zm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=x_(t);Jm(t,a,o);break;default:throw Error(P(161))}}catch(l){Le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AP(t,e,n){z=t,US(t)}function US(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Tc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||At;a=Tc;var u=At;if(Tc=o,(At=l)&&!u)for(z=i;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?N_(i):l!==null?(l.return=o,z=l):N_(i);for(;s!==null;)z=s,US(s),s=s.sibling;z=i,Tc=a,At=u}A_(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,z=s):A_(t)}}function A_(t){for(;z!==null;){var e=z;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:At||Sd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&a_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}a_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Hl(h)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(P(163))}At||e.flags&512&&Xm(e)}catch(d){Le(e,e.return,d)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function R_(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function N_(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sd(4,e)}catch(l){Le(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Le(e,i,l)}}var s=e.return;try{Xm(e)}catch(l){Le(e,s,l)}break;case 5:var o=e.return;try{Xm(e)}catch(l){Le(e,o,l)}}}catch(l){Le(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var RP=Math.ceil,Dh=Jr.ReactCurrentDispatcher,Vy=Jr.ReactCurrentOwner,On=Jr.ReactCurrentBatchConfig,he=0,Ze=null,Ke=null,_t=0,gn=0,Ao=Bi(0),Je=0,nu=null,Cs=0,Td=0,zy=0,Sl=null,sn=null,jy=0,na=1/0,Ar=null,Ph=!1,eg=null,Si=null,bc=!1,yi=null,Oh=0,Tl=0,tg=null,Jc=-1,Zc=0;function Wt(){return(he&6)!==0?Ve():Jc!==-1?Jc:Jc=Ve()}function Ti(t){return(t.mode&1)===0?1:(he&2)!==0&&_t!==0?_t&-_t:pP.transition!==null?(Zc===0&&(Zc=SE()),Zc):(t=fe,t!==0||(t=window.event,t=t===void 0?16:NE(t.type)),t)}function Ln(t,e,n){if(50<Tl)throw Tl=0,tg=null,Error(P(185));var r=bd(t,e);return r===null?null:(Du(r,e,n),((he&2)===0||r!==Ze)&&(r===Ze&&((he&2)===0&&(Td|=e),Je===4&&fi(r,_t)),dn(r,n),e===1&&he===0&&(t.mode&1)===0&&(na=Ve()+500,Id&&Vi())),r)}function bd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function BS(t){return(Ze!==null||Qn!==null)&&(t.mode&1)!==0&&(he&2)===0}function dn(t,e){var n=t.callbackNode;pD(t,e);var r=yh(t,t===Ze?_t:0);if(r===0)n!==null&&F0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&F0(n),e===1)t.tag===0?fP(D_.bind(null,t)):YE(D_.bind(null,t)),uP(function(){he===0&&Vi()}),n=null;else{switch(TE(r)){case 1:n=gy;break;case 4:n=kE;break;case 16:n=gh;break;case 536870912:n=EE;break;default:n=gh}n=GS(n,VS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VS(t,e){if(Jc=-1,Zc=0,(he&6)!==0)throw Error(P(327));var n=t.callbackNode;if(Bo()&&t.callbackNode!==n)return null;var r=yh(t,t===Ze?_t:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Lh(t,r);else{e=r;var i=he;he|=2;var s=jS();(Ze!==t||_t!==e)&&(Ar=null,na=Ve()+500,ws(t,e));do try{PP();break}catch(a){zS(t,a)}while(1);by(),Dh.current=s,he=i,Ke!==null?e=0:(Ze=null,_t=0,e=Je)}if(e!==0){if(e===2&&(i=Am(t),i!==0&&(r=i,e=ng(t,i))),e===1)throw n=nu,ws(t,0),fi(t,r),dn(t,Ve()),n;if(e===6)fi(t,r);else{if(i=t.current.alternate,(r&30)===0&&!NP(i)&&(e=Lh(t,r),e===2&&(s=Am(t),s!==0&&(r=s,e=ng(t,s))),e===1))throw n=nu,ws(t,0),fi(t,r),dn(t,Ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:ts(t,sn,Ar);break;case 3:if(fi(t,r),(r&130023424)===r&&(e=jy+500-Ve(),10<e)){if(yh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fm(ts.bind(null,t,sn,Ar),e);break}ts(t,sn,Ar);break;case 4:if(fi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RP(r/1960))-r,10<r){t.timeoutHandle=Fm(ts.bind(null,t,sn,Ar),r);break}ts(t,sn,Ar);break;case 5:ts(t,sn,Ar);break;default:throw Error(P(329))}}}return dn(t,Ve()),t.callbackNode===n?VS.bind(null,t):null}function ng(t,e){var n=Sl;return t.current.memoizedState.isDehydrated&&(ws(t,e).flags|=256),t=Lh(t,e),t!==2&&(e=sn,sn=n,e!==null&&rg(e)),t}function rg(t){sn===null?sn=t:sn.push.apply(sn,t)}function NP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fi(t,e){for(e&=~zy,e&=~Td,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function D_(t){if((he&6)!==0)throw Error(P(327));Bo();var e=yh(t,0);if((e&1)===0)return dn(t,Ve()),null;var n=Lh(t,e);if(t.tag!==0&&n===2){var r=Am(t);r!==0&&(e=r,n=ng(t,r))}if(n===1)throw n=nu,ws(t,0),fi(t,e),dn(t,Ve()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,sn,Ar),dn(t,Ve()),null}function qy(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(na=Ve()+500,Id&&Vi())}}function As(t){yi!==null&&yi.tag===0&&(he&6)===0&&Bo();var e=he;he|=1;var n=On.transition,r=fe;try{if(On.transition=null,fe=1,t)return t()}finally{fe=r,On.transition=n,he=e,(he&6)===0&&Vi()}}function Hy(){gn=Ao.current,Se(Ao)}function ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lP(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Ry(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kh();break;case 3:ta(),Se(cn),Se(Pt),Oy();break;case 5:Py(r);break;case 4:ta();break;case 13:Se(Ne);break;case 19:Se(Ne);break;case 10:xy(r.type._context);break;case 22:case 23:Hy()}n=n.return}if(Ze=t,Ke=t=Ai(t.current,null),_t=gn=e,Je=0,nu=null,zy=Td=Cs=0,sn=Sl=null,Qn!==null){for(e=0;e<Qn.length;e++)if(n=Qn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Qn=null}return t}function zS(t,e){do{var n=Ke;try{if(by(),Yc.current=Nh,Rh){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rh=!1}if(xs=0,it=Ye=Pe=null,kl=!1,Zl=0,Vy.current=null,n===null||n.return===null){Je=1,nu=e,Ke=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=g_(o);if(f!==null){f.flags&=-257,y_(f,o,a,s,e),f.mode&1&&m_(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if((e&1)===0){m_(s,u,e),Ky();break e}l=Error(P(426))}}else if(xe&&a.mode&1){var E=g_(o);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),y_(E,o,a,s,e),Ny(l);break e}}s=l,Je!==4&&(Je=2),Sl===null?Sl=[s]:Sl.push(s),l=By(l,a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=SS(a,l,e);o_(a,m);break e;case 1:s=l;var y=a.type,g=a.stateNode;if((a.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Si===null||!Si.has(g)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=TS(a,s,e);o_(a,S);break e}}a=a.return}while(a!==null)}HS(n)}catch(b){e=b,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function jS(){var t=Dh.current;return Dh.current=Nh,t===null?Nh:t}function Ky(){(Je===0||Je===3||Je===2)&&(Je=4),Ze===null||(Cs&268435455)===0&&(Td&268435455)===0||fi(Ze,_t)}function Lh(t,e){var n=he;he|=2;var r=jS();(Ze!==t||_t!==e)&&(Ar=null,ws(t,e));do try{DP();break}catch(i){zS(t,i)}while(1);if(by(),he=n,Dh.current=r,Ke!==null)throw Error(P(261));return Ze=null,_t=0,Je}function DP(){for(;Ke!==null;)qS(Ke)}function PP(){for(;Ke!==null&&!sD();)qS(Ke)}function qS(t){var e=WS(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?HS(t):Ke=e,Vy.current=null}function HS(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=EP(n,e,gn),n!==null){Ke=n;return}}else{if(n=bP(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ke=null;return}}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Je===0&&(Je=5)}function ts(t,e,n){var r=fe,i=On.transition;try{On.transition=null,fe=1,OP(t,e,n,r)}finally{On.transition=i,fe=r}return null}function OP(t,e,n,r){do Bo();while(yi!==null);if((he&6)!==0)throw Error(P(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mD(t,s),t===Ze&&(Ke=Ze=null,_t=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||bc||(bc=!0,GS(gh,function(){return Bo(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=On.transition,On.transition=null;var o=fe;fe=1;var a=he;he|=4,Vy.current=null,CP(t,n),$S(n,t),tP(Lm),vh=!!Om,Lm=Om=null,t.current=n,AP(n),oD(),he=a,fe=o,On.transition=s}else t.current=n;if(bc&&(bc=!1,yi=t,Oh=i),s=t.pendingLanes,s===0&&(Si=null),uD(n.stateNode),dn(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)r(e[n]);if(Ph)throw Ph=!1,t=eg,eg=null,t;return(Oh&1)!==0&&t.tag!==0&&Bo(),s=t.pendingLanes,(s&1)!==0?t===tg?Tl++:(Tl=0,tg=t):Tl=0,Vi(),null}function Bo(){if(yi!==null){var t=TE(Oh),e=On.transition,n=fe;try{if(On.transition=null,fe=16>t?16:t,yi===null)var r=!1;else{if(t=yi,yi=null,Oh=0,(he&6)!==0)throw Error(P(331));var i=he;for(he|=4,z=t.current;z!==null;){var s=z,o=s.child;if((z.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(z=u;z!==null;){var c=z;switch(c.tag){case 0:case 11:case 15:El(8,c,s)}var h=c.child;if(h!==null)h.return=c,z=h;else for(;z!==null;){c=z;var d=c.sibling,f=c.return;if(LS(c),c===u){z=null;break}if(d!==null){d.return=f,z=d;break}z=f}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}z=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:El(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,z=m;break e}z=s.return}}var y=t.current;for(z=y;z!==null;){o=z;var g=o.child;if((o.subtreeFlags&2064)!==0&&g!==null)g.return=o,z=g;else e:for(o=y;z!==null;){if(a=z,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Sd(9,a)}}catch(b){Le(a,a.return,b)}if(a===o){z=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,z=S;break e}z=a.return}}if(he=i,Vi(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(gd,t)}catch{}r=!0}return r}finally{fe=n,On.transition=e}}return!1}function P_(t,e,n){e=By(n,e),e=SS(t,e,1),Ei(t,e),e=Wt(),t=bd(t,1),t!==null&&(Du(t,1,e),dn(t,e))}function Le(t,e,n){if(t.tag===3)P_(t,t,n);else for(;e!==null;){if(e.tag===3){P_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Si===null||!Si.has(r))){t=By(n,t),t=TS(e,t,1),Ei(e,t),t=Wt(),e=bd(e,1),e!==null&&(Du(e,1,t),dn(e,t));break}}e=e.return}}function LP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(_t&n)===n&&(Je===4||Je===3&&(_t&130023424)===_t&&500>Ve()-jy?ws(t,0):zy|=n),dn(t,e)}function KS(t,e){e===0&&((t.mode&1)===0?e=1:(e=mc,mc<<=1,(mc&130023424)===0&&(mc=4194304)));var n=Wt();t=bd(t,e),t!==null&&(Du(t,e,n),dn(t,n))}function MP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),KS(t,n)}function FP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),KS(t,n)}var WS;WS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)an=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return an=!1,TP(t,e,n);an=(t.flags&131072)!==0}else an=!1,xe&&(e.flags&1048576)!==0&&eS(e,Ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=Jo(e,Pt.current);Uo(e,n),i=My(null,e,r,t,i,n);var s=Fy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(s=!0,Eh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cy(e),i.updater=kd,e.stateNode=i,i._reactInternals=e,zm(e,r,t,n),e=Gm(null,e,r,!0,s,n)):(e.tag=0,xe&&s&&Ay(e),Ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=UP(r),t=Kn(r,t),i){case 0:e=Wm(null,e,r,t,n);break e;case 1:e=__(null,e,r,t,n);break e;case 11:e=v_(null,e,r,t,n);break e;case 14:e=w_(null,e,r,Kn(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),Wm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),__(t,e,r,i,n);case 3:e:{if(DS(e),t===null)throw Error(P(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XE(t,e),bh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Error(P(423)),e=I_(t,e,r,n,i);break e}else if(r!==i){i=Error(P(424)),e=I_(t,e,r,n,i);break e}else for(on=Or(e.stateNode.containerInfo.firstChild),_n=e,xe=!0,Gn=null,n=rS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zo(),r===i){e=Wr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return iS(e),t===null&&qm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mm(r,i)?o=null:s!==null&&Mm(r,s)&&(e.flags|=32),NS(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&qm(e),null;case 13:return PS(t,e,n);case 4:return Dy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ea(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),v_(t,e,r,i,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(Sh,r._currentValue),r._currentValue=o,s!==null)if(Zn(s.value,o)){if(s.children===i.children&&!cn.current){e=Wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Vr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Bm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(P(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Bm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Uo(e,n),i=Fn(i),r=r(i),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,i=Kn(r,e.pendingProps),i=Kn(r.type,i),w_(t,e,r,i,n);case 15:return AS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,hn(r)?(t=!0,Eh(e)):t=!1,Uo(e,n),ZE(e,r,i),zm(e,r,i,n),Gm(null,e,r,!0,t,n);case 19:return OS(t,e,n);case 22:return RS(t,e,n)}throw Error(P(156,e.tag))};function GS(t,e){return IE(t,e)}function $P(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new $P(t,e,n,r)}function Wy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UP(t){if(typeof t=="function")return Wy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fy)return 11;if(t===py)return 14}return 2}function Ai(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Wy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wo:return _s(n.children,i,s,e);case dy:o=8,i|=8;break;case pm:return t=Nn(12,n,e,i|2),t.elementType=pm,t.lanes=s,t;case mm:return t=Nn(13,n,e,i),t.elementType=mm,t.lanes=s,t;case gm:return t=Nn(19,n,e,i),t.elementType=gm,t.lanes=s,t;case iE:return Mh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nE:o=10;break e;case rE:o=9;break e;case fy:o=11;break e;case py:o=14;break e;case ci:o=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Nn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _s(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function Mh(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=iE,t.lanes=n,t.stateNode={},t}function yp(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function vp(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zf(0),this.expirationTimes=Zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gy(t,e,n,r,i,s,o,a,l){return t=new BP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cy(s),t}function VP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function QS(t){if(!t)return Ci;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(hn(n))return QE(t,n,e)}return e}function YS(t,e,n,r,i,s,o,a,l){return t=Gy(n,r,!0,t,i,s,o,a,l),t.context=QS(null),n=t.current,r=Wt(),i=Ti(n),s=Vr(r,i),s.callback=e!=null?e:null,Ei(n,s),t.current.lanes=i,Du(t,i,r),dn(t,r),t}function xd(t,e,n,r){var i=e.current,s=Wt(),o=Ti(i);return n=QS(n),e.context===null?e.context=n:e.pendingContext=n,e=Vr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),Ei(i,e),t=Ln(i,o,s),t!==null&&Qc(t,i,o),o}function Fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qy(t,e){O_(t,e),(t=t.alternate)&&O_(t,e)}function zP(){return null}var XS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yy(t){this._internalRoot=t}Cd.prototype.render=Yy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));xd(t,e,null,null)};Cd.prototype.unmount=Yy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){xd(null,t,null,null)}),e[Kr]=null}};function Cd(t){this._internalRoot=t}Cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=CE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<di.length&&e!==0&&e<di[n].priority;n++);di.splice(n,0,t),n===0&&RE(t)}};function Xy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function L_(){}function jP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Fh(o);s.call(u)}}var o=YS(e,r,t,0,null,!1,!1,"",L_);return t._reactRootContainer=o,t[Kr]=o.current,Gl(t.nodeType===8?t.parentNode:t),As(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Fh(l);a.call(u)}}var l=Gy(t,0,!1,null,null,!1,!1,"",L_);return t._reactRootContainer=l,t[Kr]=l.current,Gl(t.nodeType===8?t.parentNode:t),As(function(){xd(e,l,n,r)}),l}function Rd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Fh(o);a.call(l)}}xd(e,o,t,i)}else o=jP(n,e,t,i,r);return Fh(o)}bE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cl(e.pendingLanes);n!==0&&(yy(e,n|1),dn(e,Ve()),(he&6)===0&&(na=Ve()+500,Vi()))}break;case 13:var r=Wt();As(function(){return Ln(t,1,r)}),Qy(t,1)}};vy=function(t){if(t.tag===13){var e=Wt();Ln(t,134217728,e),Qy(t,134217728)}};xE=function(t){if(t.tag===13){var e=Wt(),n=Ti(t);Ln(t,n,e),Qy(t,n)}};CE=function(){return fe};AE=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};bm=function(t,e,n){switch(e){case"input":if(wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_d(r);if(!i)throw Error(P(90));oE(r),wm(r,i)}}}break;case"textarea":lE(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};mE=qy;gE=As;var qP={usingClientEntryPoint:!1,Events:[Ou,Eo,_d,fE,pE,qy]},Ga={findFiberByHostInstance:cs,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},HP={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||zP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{gd=xc.inject(HP),mr=xc}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qP;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xy(e))throw Error(P(200));return VP(t,e,null,n)};Tn.createRoot=function(t,e){if(!Xy(t))throw Error(P(299));var n=!1,r="",i=XS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gy(t,1,!1,null,null,n,!1,r,i),t[Kr]=e.current,Gl(t.nodeType===8?t.parentNode:t),new Yy(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=wE(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return As(t)};Tn.hydrate=function(t,e,n){if(!Ad(e))throw Error(P(200));return Rd(null,t,e,!0,n)};Tn.hydrateRoot=function(t,e,n){if(!Xy(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=XS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=YS(e,null,t,1,n!=null?n:null,i,!1,s,o),t[Kr]=e.current,Gl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cd(e)};Tn.render=function(t,e,n){if(!Ad(e))throw Error(P(200));return Rd(null,t,e,!1,n)};Tn.unmountComponentAtNode=function(t){if(!Ad(t))throw Error(P(40));return t._reactRootContainer?(As(function(){Rd(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1};Tn.unstable_batchedUpdates=qy;Tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ad(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Rd(t,e,n,!1,r)};Tn.version="18.1.0-next-22edb9f77-20220426";function JS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JS)}catch(t){console.error(t)}}JS(),Xk.exports=Tn;var M_=Xk.exports;dm.createRoot=M_.createRoot,dm.hydrateRoot=M_.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},KP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw Error();const d=s<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const p=u<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},WP=function(t){const e=ZS(t);return eT.encodeByteArray(e,!0)},$h=function(t){return WP(t).replace(/\./g,"")},GP=function(t){try{return eT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!QP(n)||(t[n]=Uh(t[n],e[n]));return t}function QP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[$h(JSON.stringify(n)),$h(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nT(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function Jy(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XP(){return typeof self=="object"&&self.self===self}function Zy(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JP(){return be().indexOf("Electron/")>=0}function ev(){const t=be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZP(){return be().indexOf("MSAppHost/")>=0}function eO(){return!Jy()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rs(){return typeof indexedDB=="object"}function tO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function nO(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="FirebaseError";class Gt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rO,Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,br.prototype.create)}}class br{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?iO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gt(i,a,r)}}function iO(t,e){return t.replace(sO,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function oO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ig(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if($_(s)&&$_(o)){if(!ig(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ro(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function dl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rT(t,e){const n=new aO(t,e);return n.subscribe.bind(n)}class aO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wp),i.error===void 0&&(i.error=wp),i.complete===void 0&&(i.complete=wp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t){return t&&t._delegate?t._delegate:t}class ut{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hO(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cO(t){return t===ns?void 0:t}function hO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=[];var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const iT={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},fO=ce.INFO,pO={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},mO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=pO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dd{constructor(e){this.name=e,this._logLevel=fO,this._logHandler=mO,this._userLogHandler=null,tv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}function gO(t){tv.forEach(e=>{e.setLogLevel(t)})}function yO(t,e){for(const n of tv){let r=null;e&&e.level&&(r=iT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:ce[s].toLowerCase(),message:a,args:o,type:i.name})}}}const vO=(t,e)=>e.some(n=>t instanceof n);let U_,B_;function wO(){return U_||(U_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _O(){return B_||(B_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sT=new WeakMap,sg=new WeakMap,oT=new WeakMap,_p=new WeakMap,nv=new WeakMap;function IO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sT.set(n,t)}).catch(()=>{}),nv.set(e,t),e}function kO(t){if(sg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sg.set(t,e)}let og={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EO(t){og=t(og)}function SO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ip(this),e,...n);return oT.set(r,e.sort?e.sort():[e]),zr(r)}:_O().includes(t)?function(...e){return t.apply(Ip(this),e),zr(sT.get(this))}:function(...e){return zr(t.apply(Ip(this),e))}}function TO(t){return typeof t=="function"?SO(t):(t instanceof IDBTransaction&&kO(t),vO(t,wO())?new Proxy(t,og):t)}function zr(t){if(t instanceof IDBRequest)return IO(t);if(_p.has(t))return _p.get(t);const e=TO(t);return e!==t&&(_p.set(t,e),nv.set(e,t)),e}const Ip=t=>nv.get(t);function _a(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(zr(o.result),l.oldVersion,l.newVersion,zr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function Vo(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),zr(n).then(()=>{})}const bO=["get","getKey","getAll","getAllKeys","count"],xO=["put","add","delete","clear"],kp=new Map;function V_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kp.get(e))return kp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=xO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bO.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return kp.set(e,s),s}EO(t=>uc(si({},t),{get:(e,n,r)=>V_(e,n)||t.get(e,n,r),has:(e,n)=>!!V_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ag="@firebase/app",z_="0.7.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Dd("@firebase/app"),RO="@firebase/app-compat",NO="@firebase/analytics-compat",DO="@firebase/analytics",PO="@firebase/app-check-compat",OO="@firebase/app-check",LO="@firebase/auth",MO="@firebase/auth-compat",FO="@firebase/database",$O="@firebase/database-compat",UO="@firebase/functions",BO="@firebase/functions-compat",VO="@firebase/installations",zO="@firebase/installations-compat",jO="@firebase/messaging",qO="@firebase/messaging-compat",HO="@firebase/performance",KO="@firebase/performance-compat",WO="@firebase/remote-config",GO="@firebase/remote-config-compat",QO="@firebase/storage",YO="@firebase/storage-compat",XO="@firebase/firestore",JO="@firebase/firestore-compat",ZO="firebase",eL="9.8.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="[DEFAULT]",tL={[ag]:"fire-core",[RO]:"fire-core-compat",[DO]:"fire-analytics",[NO]:"fire-analytics-compat",[OO]:"fire-app-check",[PO]:"fire-app-check-compat",[LO]:"fire-auth",[MO]:"fire-auth-compat",[FO]:"fire-rtdb",[$O]:"fire-rtdb-compat",[UO]:"fire-fn",[BO]:"fire-fn-compat",[VO]:"fire-iid",[zO]:"fire-iid-compat",[jO]:"fire-fcm",[qO]:"fire-fcm-compat",[HO]:"fire-perf",[KO]:"fire-perf-compat",[WO]:"fire-rc",[GO]:"fire-rc-compat",[QO]:"fire-gcs",[YO]:"fire-gcs-compat",[XO]:"fire-fst",[JO]:"fire-fst-compat","fire-js":"fire-js",[ZO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Map,ru=new Map;function Bh(t,e){try{t.container.addComponent(e)}catch(n){rv.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function aT(t,e){t.container.addOrOverwriteComponent(e)}function fn(t){const e=t.name;if(ru.has(e))return rv.debug(`There were multiple attempts to register component ${e}.`),!1;ru.set(e,t);for(const n of Ri.values())Bh(n,t);return!0}function Pd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nL(t,e,n=Ns){Pd(t,e).clearInstance(n)}function rL(){ru.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},Ni=new br("app","Firebase",iL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=eL;function lT(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ns,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Ni.create("bad-app-name",{appName:String(r)});const i=Ri.get(r);if(i){if(ig(t,i.options)&&ig(n,i.config))return i;throw Ni.create("duplicate-app",{appName:r})}const s=new dO(r);for(const a of ru.values())s.addComponent(a);const o=new sL(t,n,s);return Ri.set(r,o),o}function oL(t=Ns){const e=Ri.get(t);if(!e)throw Ni.create("no-app",{appName:t});return e}function aL(){return Array.from(Ri.values())}async function uT(t){const e=t.name;Ri.has(e)&&(Ri.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Nt(t,e,n){var r;let i=(r=tL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rv.warn(a.join(" "));return}fn(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function cT(t,e){if(t!==null&&typeof t!="function")throw Ni.create("invalid-log-argument");yO(t,e)}function hT(t){gO(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL="firebase-heartbeat-database",uL=1,iu="firebase-heartbeat-store";let Ep=null;function dT(){return Ep||(Ep=_a(lL,uL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(iu)}}}).catch(t=>{throw Ni.create("storage-open",{originalErrorMessage:t.message})})),Ep}async function cL(t){var e;try{return(await dT()).transaction(iu).objectStore(iu).get(fT(t))}catch(n){throw Ni.create("storage-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message})}}async function j_(t,e){var n;try{const i=(await dT()).transaction(iu,"readwrite");return await i.objectStore(iu).put(e,fT(t)),i.done}catch(r){throw Ni.create("storage-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message})}}function fT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=1024,dL=30*24*60*60*1e3;class fL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=q_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=dL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=q_(),{heartbeatsToSend:n,unsentEntries:r}=pL(this._heartbeatsCache.heartbeats),i=$h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function q_(){return new Date().toISOString().substring(0,10)}function pL(t,e=hL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),H_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rs()?tO().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await cL(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function H_(t){return $h(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){fn(new ut("platform-logger",e=>new CO(e),"PRIVATE")),fn(new ut("heartbeat",e=>new fL(e),"PRIVATE")),Nt(ag,z_,t),Nt(ag,z_,"esm2017"),Nt("fire-js","")}gL("");var yL=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:zi,_DEFAULT_ENTRY_NAME:Ns,_addComponent:Bh,_addOrOverwriteComponent:aT,_apps:Ri,_clearComponents:rL,_components:ru,_getProvider:Pd,_registerComponent:fn,_removeServiceInstance:nL,deleteApp:uT,getApp:oL,getApps:aL,initializeApp:lT,onLog:cT,registerVersion:Nt,setLogLevel:hT,FirebaseError:Gt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this._delegate=e,this.firebase=n,Bh(e,new ut("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),uT(this._delegate)))}_getService(e,n=Ns){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ns){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Bh(this._delegate,e)}_addOrOverwriteComponent(e){aT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},K_=new br("app-compat","Firebase",wL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Nt,setLogLevel:hT,onLog:cT,apps:null,SDK_VERSION:zi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:yL}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Ns,!F_(e,u))throw K_.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const h=lT(u,c);if(F_(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,h=c.replace("-compat","");if(fn(u)&&u.type==="PUBLIC"){const d=(f=i())=>{if(typeof f[h]!="function")throw K_.create("invalid-app-argument",{appName:c});return f[h]()};u.serviceProps!==void 0&&Uh(d,u.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){const t=_L(vL);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:pT,extendNamespace:e,createSubscribe:rT,ErrorFactory:br,deepExtend:Uh});function e(n){Uh(t,n)}return t}const IL=pT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Dd("@firebase/app-compat"),kL="@firebase/app-compat",EL="0.1.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t){Nt(kL,EL,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(XP()&&self.firebase!==void 0){W_.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&W_.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const ot=IL;SL();var TL="firebase",bL="9.8.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ot.registerVersion(TL,bL,"app-compat");var xL=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},j,iv=iv||{},ee=xL||self;function Vh(){}function lg(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Mu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function CL(t){return Object.prototype.hasOwnProperty.call(t,Sp)&&t[Sp]||(t[Sp]=++AL)}var Sp="closure_uid_"+(1e9*Math.random()>>>0),AL=0;function RL(t,e,n){return t.call.apply(t.bind,arguments)}function NL(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function It(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?It=RL:It=NL,It.apply(null,arguments)}function Cc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function bt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ji(){this.s=this.s,this.o=this.o}var DL=0;ji.prototype.s=!1;ji.prototype.na=function(){!this.s&&(this.s=!0,this.M(),DL!=0)&&CL(this)};ji.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},gT=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function PL(t){e:{var e=SM;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function G_(t){return Array.prototype.concat.apply([],arguments)}function sv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function zh(t){return/^[\s\xa0]*$/.test(t)}var Q_=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function jt(t,e){return t.indexOf(e)!=-1}function Tp(t,e){return t<e?-1:t>e?1:0}var qt;e:{var Y_=ee.navigator;if(Y_){var X_=Y_.userAgent;if(X_){qt=X_;break e}}qt=""}function ov(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function yT(t){const e={};for(const n in t)e[n]=t[n];return e}var J_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<J_.length;s++)n=J_[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function av(t){return av[" "](t),t}av[" "]=Vh;function OL(t){var e=FL;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var LL=jt(qt,"Opera"),ra=jt(qt,"Trident")||jt(qt,"MSIE"),wT=jt(qt,"Edge"),ug=wT||ra,_T=jt(qt,"Gecko")&&!(jt(qt.toLowerCase(),"webkit")&&!jt(qt,"Edge"))&&!(jt(qt,"Trident")||jt(qt,"MSIE"))&&!jt(qt,"Edge"),ML=jt(qt.toLowerCase(),"webkit")&&!jt(qt,"Edge");function IT(){var t=ee.document;return t?t.documentMode:void 0}var jh;e:{var bp="",xp=function(){var t=qt;if(_T)return/rv:([^\);]+)(\)|;)/.exec(t);if(wT)return/Edge\/([\d\.]+)/.exec(t);if(ra)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(ML)return/WebKit\/(\S+)/.exec(t);if(LL)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(xp&&(bp=xp?xp[1]:""),ra){var Cp=IT();if(Cp!=null&&Cp>parseFloat(bp)){jh=String(Cp);break e}}jh=bp}var FL={};function $L(){return OL(function(){let t=0;const e=Q_(String(jh)).split("."),n=Q_("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=Tp(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||Tp(i[2].length==0,s[2].length==0)||Tp(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var cg;if(ee.document&&ra){var Z_=IT();cg=Z_||parseInt(jh,10)||void 0}else cg=void 0;var UL=cg,BL=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ee.addEventListener("test",Vh,e),ee.removeEventListener("test",Vh,e)}catch{}return t}();function Dt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};function su(t,e){if(Dt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(_T){e:{try{av(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:VL[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&su.Z.h.call(this)}}bt(su,Dt);var VL={2:"touch",3:"pen",4:"mouse"};su.prototype.h=function(){su.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Fu="closure_listenable_"+(1e6*Math.random()|0),zL=0;function jL(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++zL,this.ca=this.fa=!1}function Od(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ld(t){this.src=t,this.g={},this.h=0}Ld.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=dg(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new jL(e,this.src,s,!!r,i),e.fa=n,t.push(e)),e};function hg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=mT(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Od(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}var lv="closure_lm_"+(1e6*Math.random()|0),Ap={};function kT(t,e,n,r,i){if(r&&r.once)return ST(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kT(t,e[s],n,r,i);return null}return n=hv(n),t&&t[Fu]?t.N(e,n,Mu(r)?!!r.capture:!!r,i):ET(t,e,n,!1,r,i)}function ET(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Mu(i)?!!i.capture:!!i,a=cv(t);if(a||(t[lv]=a=new Ld(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=qL(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)BL||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function qL(){function t(n){return e.call(t.src,t.listener,n)}var e=HL;return t}function ST(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ST(t,e[s],n,r,i);return null}return n=hv(n),t&&t[Fu]?t.O(e,n,Mu(r)?!!r.capture:!!r,i):ET(t,e,n,!0,r,i)}function TT(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)TT(t,e[s],n,r,i);else r=Mu(r)?!!r.capture:!!r,n=hv(n),t&&t[Fu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=dg(s,n,r,i),-1<n&&(Od(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=cv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dg(e,n,r,i)),(n=-1<t?e[t]:null)&&uv(n))}function uv(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Fu])hg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cv(e))?(hg(n,t),n.h==0&&(n.src=null,e[lv]=null)):Od(t)}}}function bT(t){return t in Ap?Ap[t]:Ap[t]="on"+t}function HL(t,e){if(t.ca)t=!0;else{e=new su(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&uv(t),t=n.call(r,e)}return t}function cv(t){return t=t[lv],t instanceof Ld?t:null}var Rp="__closure_events_fn_"+(1e9*Math.random()>>>0);function hv(t){return typeof t=="function"?t:(t[Rp]||(t[Rp]=function(e){return t.handleEvent(e)}),t[Rp])}function ct(){ji.call(this),this.i=new Ld(this),this.P=this,this.I=null}bt(ct,ji);ct.prototype[Fu]=!0;ct.prototype.removeEventListener=function(t,e,n,r){TT(this,t,e,n,r)};function kt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Dt(e,t);else if(e instanceof Dt)e.target=e.target||t;else{var i=e;e=new Dt(r,t),vT(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ac(o,r,!0,e)&&i}if(o=e.g=t,i=Ac(o,r,!0,e)&&i,i=Ac(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Ac(o,r,!1,e)&&i}ct.prototype.M=function(){if(ct.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Od(n[r]);delete t.g[e],t.h--}}this.I=null};ct.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ct.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ac(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&hg(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var dv=ee.JSON.stringify;function KL(){var t=CT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class WL{constructor(){this.h=this.g=null}add(e,n){const r=xT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var xT=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new GL,t=>t.reset());class GL{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function QL(t){ee.setTimeout(()=>{throw t},0)}function fv(t,e){fg||YL(),pg||(fg(),pg=!0),CT.add(t,e)}var fg;function YL(){var t=ee.Promise.resolve(void 0);fg=function(){t.then(XL)}}var pg=!1,CT=new WL;function XL(){for(var t;t=KL();){try{t.h.call(t.g)}catch(n){QL(n)}var e=xT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}pg=!1}function Md(t,e){ct.call(this),this.h=t||1,this.g=e||ee,this.j=It(this.kb,this),this.l=Date.now()}bt(Md,ct);j=Md.prototype;j.da=!1;j.S=null;j.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kt(this,"tick"),this.da&&(pv(this),this.start()))}};j.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function pv(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}j.M=function(){Md.Z.M.call(this),pv(this),delete this.g};function mv(t,e,n){if(typeof t=="function")n&&(t=It(t,n));else if(t&&typeof t.handleEvent=="function")t=It(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function AT(t){t.g=mv(()=>{t.g=null,t.i&&(t.i=!1,AT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class JL extends ji{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AT(this)}M(){super.M(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ou(t){ji.call(this),this.h=t,this.g={}}bt(ou,ji);var e1=[];function RT(t,e,n,r){Array.isArray(n)||(n&&(e1[0]=n.toString()),n=e1);for(var i=0;i<n.length;i++){var s=kT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function NT(t){ov(t.g,function(e,n){this.g.hasOwnProperty(n)&&uv(e)},t),t.g={}}ou.prototype.M=function(){ou.Z.M.call(this),NT(this)};ou.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Fd(){this.g=!0}Fd.prototype.Aa=function(){this.g=!1};function ZL(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function eM(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function No(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+nM(t,n)+(r?" "+r:"")})}function tM(t,e){t.info(function(){return"TIMEOUT: "+e})}Fd.prototype.info=function(){};function nM(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return dv(n)}catch{return e}}var Zs={},t1=null;function $d(){return t1=t1||new ct}Zs.Ma="serverreachability";function DT(t){Dt.call(this,Zs.Ma,t)}bt(DT,Dt);function au(t){const e=$d();kt(e,new DT(e))}Zs.STAT_EVENT="statevent";function PT(t,e){Dt.call(this,Zs.STAT_EVENT,t),this.stat=e}bt(PT,Dt);function Kt(t){const e=$d();kt(e,new PT(e,t))}Zs.Na="timingevent";function OT(t,e){Dt.call(this,Zs.Na,t),this.size=e}bt(OT,Dt);function $u(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}var Ud={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},LT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gv(){}gv.prototype.h=null;function n1(t){return t.h||(t.h=t.i())}function MT(){}var Uu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yv(){Dt.call(this,"d")}bt(yv,Dt);function vv(){Dt.call(this,"c")}bt(vv,Dt);var mg;function Bd(){}bt(Bd,gv);Bd.prototype.g=function(){return new XMLHttpRequest};Bd.prototype.i=function(){return{}};mg=new Bd;function Bu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ou(this),this.P=rM,t=ug?125:void 0,this.W=new Md(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new FT}function FT(){this.i=null,this.g="",this.h=!1}var rM=45e3,gg={},qh={};j=Bu.prototype;j.setTimeout=function(t){this.P=t};function yg(t,e,n){t.K=1,t.v=zd(Gr(e)),t.s=n,t.U=!0,$T(t,null)}function $T(t,e){t.F=Date.now(),Vu(t),t.A=Gr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),HT(n.h,"t",r),t.C=0,n=t.l.H,t.h=new FT,t.g=hb(t.l,n?e:null,!t.s),0<t.O&&(t.L=new JL(It(t.Ia,t,t.g),t.O)),RT(t.V,t.g,"readystatechange",t.gb),e=t.H?yT(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),au(),ZL(t.j,t.u,t.A,t.m,t.X,t.s)}j.gb=function(t){t=t.target;const e=this.L;e&&Fr(t)==3?e.l():this.Ia(t)};j.Ia=function(t){try{if(t==this.g)e:{const c=Fr(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||ug||this.g&&(this.h.h||this.g.ga()||o1(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?au(3):au(2)),Vd(this);var n=this.g.ba();this.N=n;t:if(UT(this)){var r=o1(this.g);t="";var i=r.length,s=Fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){ds(this),bl(this);var o="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,eM(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zh(a)){var u=a;break t}}u=null}if(n=u)No(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vg(this,n);else{this.i=!1,this.o=3,Kt(12),ds(this),bl(this);break e}}this.U?(BT(this,c,o),ug&&this.i&&c==3&&(RT(this.V,this.W,"tick",this.fb),this.W.start())):(No(this.j,this.m,o,null),vg(this,o)),c==4&&ds(this),this.i&&!this.I&&(c==4?ab(this.l,this):(this.i=!1,Vu(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Kt(12)):(this.o=0,Kt(13)),ds(this),bl(this)}}}catch{}finally{}};function UT(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function BT(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=iM(t,n),i==qh){e==4&&(t.o=4,Kt(14),r=!1),No(t.j,t.m,null,"[Incomplete Response]");break}else if(i==gg){t.o=4,Kt(15),No(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else No(t.j,t.m,i,null),vg(t,i);UT(t)&&i!=qh&&i!=gg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Kt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),xv(e),e.L=!0,Kt(11))):(No(t.j,t.m,n,"[Invalid Chunked Response]"),ds(t),bl(t))}j.fb=function(){if(this.g){var t=Fr(this.g),e=this.g.ga();this.C<e.length&&(Vd(this),BT(this,t,e),this.i&&t!=4&&Vu(this))}};function iM(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?qh:(n=Number(e.substring(n,r)),isNaN(n)?gg:(r+=1,r+n>e.length?qh:(e=e.substr(r,n),t.C=r+n,e)))}j.cancel=function(){this.I=!0,ds(this)};function Vu(t){t.Y=Date.now()+t.P,VT(t,t.P)}function VT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=$u(It(t.eb,t),e)}function Vd(t){t.B&&(ee.clearTimeout(t.B),t.B=null)}j.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(tM(this.j,this.A),this.K!=2&&(au(),Kt(17)),ds(this),this.o=2,bl(this)):VT(this,this.Y-t)};function bl(t){t.l.G==0||t.I||ab(t.l,t)}function ds(t){Vd(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,pv(t.W),NT(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function vg(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||wg(n.i,t))){if(n.I=t.N,!t.J&&wg(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Gh(n),Hd(n);else break e;bv(n),Kt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=$u(It(n.ab,n),6e3));if(1>=GT(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else fs(n,11)}else if((t.J||n.g==t)&&Gh(n),!zh(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.U=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.J=u[1],n.la=u[2];const c=u[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=u[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(jt(p,"spdy")||jt(p,"quic")||jt(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Iv(s,s.h),s.h=null))}if(r.D){const v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.sa=v,Ce(r.F,r.D,v))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=cb(r,r.H?r.la:null,r.W),o.J){QT(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(Vd(a),Vu(a)),r.g=o}else sb(r);0<n.l.length&&Kd(n)}else u[0]!="stop"&&u[0]!="close"||fs(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?fs(n,7):Tv(n):u[0]!="noop"&&n.j&&n.j.wa(u),n.A=0)}}au(4)}catch{}}function sM(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(lg(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function wv(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(lg(t)||typeof t=="string")gT(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(lg(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=sM(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Ia(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ia)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}j=Ia.prototype;j.R=function(){_v(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};j.T=function(){return _v(this),this.g.concat()};function _v(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Ds(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Ds(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}j.get=function(t,e){return Ds(this.h,t)?this.h[t]:e};j.set=function(t,e){Ds(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};j.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Ds(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var zT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function oM(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ps(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ps){this.g=e!==void 0?e:t.g,Hh(this,t.j),this.s=t.s,Kh(this,t.i),Wh(this,t.m),this.l=t.l,e=t.h;var n=new lu;n.i=e.i,e.g&&(n.g=new Ia(e.g),n.h=e.h),r1(this,n),this.o=t.o}else t&&(n=String(t).match(zT))?(this.g=!!e,Hh(this,n[1]||"",!0),this.s=xl(n[2]||""),Kh(this,n[3]||"",!0),Wh(this,n[4]),this.l=xl(n[5]||"",!0),r1(this,n[6]||"",!0),this.o=xl(n[7]||"")):(this.g=!!e,this.h=new lu(null,this.g))}Ps.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fl(e,i1,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(fl(e,i1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(fl(n,n.charAt(0)=="/"?hM:cM,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",fl(n,fM)),t.join("")};function Gr(t){return new Ps(t)}function Hh(t,e,n){t.j=n?xl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Kh(t,e,n){t.i=n?xl(e,!0):e}function Wh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function r1(t,e,n){e instanceof lu?(t.h=e,pM(t.h,t.g)):(n||(e=fl(e,dM)),t.h=new lu(e,t.g))}function Ce(t,e,n){t.h.set(e,n)}function zd(t){return Ce(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function aM(t){return t instanceof Ps?Gr(t):new Ps(t,void 0)}function lM(t,e,n,r){var i=new Ps(null,void 0);return t&&Hh(i,t),e&&Kh(i,e),n&&Wh(i,n),r&&(i.l=r),i}function xl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,uM),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uM(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var i1=/[#\/\?@]/g,cM=/[#\?:]/g,hM=/[#\?]/g,dM=/[#\?@]/g,fM=/#/g;function lu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function qi(t){t.g||(t.g=new Ia,t.h=0,t.i&&oM(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}j=lu.prototype;j.add=function(t,e){qi(this),this.i=null,t=ka(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function jT(t,e){qi(t),e=ka(t,e),Ds(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Ds(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&_v(t)))}function qT(t,e){return qi(t),e=ka(t,e),Ds(t.g.h,e)}j.forEach=function(t,e){qi(this),this.g.forEach(function(n,r){gT(n,function(i){t.call(e,i,r,this)},this)},this)};j.T=function(){qi(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};j.R=function(t){qi(this);var e=[];if(typeof t=="string")qT(this,t)&&(e=G_(e,this.g.get(ka(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=G_(e,t[n])}return e};j.set=function(t,e){return qi(this),this.i=null,t=ka(this,t),qT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};j.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function HT(t,e,n){jT(t,e),0<n.length&&(t.i=null,t.g.set(ka(t,e),sv(n)),t.h+=n.length)}j.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};function ka(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function pM(t,e){e&&!t.j&&(qi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(jT(this,r),HT(this,i,n))},t)),t.j=e}var mM=class{constructor(t,e){this.h=t,this.g=e}};function KT(t){this.l=t||gM,ee.PerformanceNavigationTiming?(t=ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ee.g&&ee.g.Ea&&ee.g.Ea()&&ee.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var gM=10;function WT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function GT(t){return t.h?1:t.g?t.g.size:0}function wg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Iv(t,e){t.g?t.g.add(e):t.h=e}function QT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}KT.prototype.cancel=function(){if(this.i=YT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function YT(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return sv(t.i)}function kv(){}kv.prototype.stringify=function(t){return ee.JSON.stringify(t,void 0)};kv.prototype.parse=function(t){return ee.JSON.parse(t,void 0)};function yM(){this.g=new kv}function vM(t,e,n){const r=n||"";try{wv(t,function(i,s){let o=i;Mu(i)&&(o=dv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wM(t,e){const n=new Fd;if(ee.Image){const r=new Image;r.onload=Cc(Rc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Cc(Rc,n,r,"TestLoadImage: error",!1,e),r.onabort=Cc(Rc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cc(Rc,n,r,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Rc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function zu(t){this.l=t.$b||null,this.j=t.ib||!1}bt(zu,gv);zu.prototype.g=function(){return new jd(this.l,this.j)};zu.prototype.i=function(t){return function(){return t}}({});function jd(t,e){ct.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ev,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt(jd,ct);var Ev=0;j=jd.prototype;j.open=function(t,e){if(this.readyState!=Ev)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uu(this)};j.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ee).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ju(this)),this.readyState=Ev};j.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uu(this)),this.g&&(this.readyState=3,uu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ee.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XT(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function XT(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}j.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ju(this):uu(this),this.readyState==3&&XT(this)}};j.Ua=function(t){this.g&&(this.response=this.responseText=t,ju(this))};j.Ta=function(t){this.g&&(this.response=t,ju(this))};j.ha=function(){this.g&&ju(this)};function ju(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uu(t)}j.setRequestHeader=function(t,e){this.v.append(t,e)};j.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};j.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function uu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(jd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var _M=ee.JSON.parse;function Ge(t){ct.call(this),this.headers=new Ia,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=JT,this.K=this.L=!1}bt(Ge,ct);var JT="",IM=/^https?$/i,kM=["POST","PUT"];j=Ge.prototype;j.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mg.g(),this.C=this.u?n1(this.u):n1(mg),this.g.onreadystatechange=It(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){s1(this,s);return}t=n||"";const i=new Ia(this.headers);r&&wv(r,function(s,o){i.set(o,s)}),r=PL(i.T()),n=ee.FormData&&t instanceof ee.FormData,!(0<=mT(kM,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tb(this),0<this.B&&((this.K=EM(this.g))?(this.g.timeout=this.B,this.g.ontimeout=It(this.pa,this)):this.A=mv(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){s1(this,s)}};function EM(t){return ra&&$L()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function SM(t){return t.toLowerCase()=="content-type"}j.pa=function(){typeof iv!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))};function s1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ZT(t),qd(t)}function ZT(t){t.D||(t.D=!0,kt(t,"complete"),kt(t,"error"))}j.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kt(this,"complete"),kt(this,"abort"),qd(this))};j.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qd(this,!0)),Ge.Z.M.call(this)};j.Fa=function(){this.s||(this.F||this.v||this.l?eb(this):this.cb())};j.cb=function(){eb(this)};function eb(t){if(t.h&&typeof iv!="undefined"&&(!t.C[1]||Fr(t)!=4||t.ba()!=2)){if(t.v&&Fr(t)==4)mv(t.Fa,0,t);else if(kt(t,"readystatechange"),Fr(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(zT)[1]||null;if(!i&&ee.self&&ee.self.location){var s=ee.self.location.protocol;i=s.substr(0,s.length-1)}r=!IM.test(i?i.toLowerCase():"")}n=r}if(n)kt(t,"complete"),kt(t,"success");else{t.m=6;try{var o=2<Fr(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",ZT(t)}}finally{qd(t)}}}}function qd(t,e){if(t.g){tb(t);const n=t.g,r=t.C[0]?Vh:null;t.g=null,t.C=null,e||kt(t,"ready");try{n.onreadystatechange=r}catch{}}}function tb(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}function Fr(t){return t.g?t.g.readyState:0}j.ba=function(){try{return 2<Fr(this)?this.g.status:-1}catch{return-1}};j.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};j.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),_M(e)}};function o1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case JT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}j.Da=function(){return this.m};j.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function TM(t){let e="";return ov(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Sv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=TM(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ce(t,e,n))}function Qa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nb(t){this.za=0,this.l=[],this.h=new Fd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qa("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qa("baseRetryDelayMs",5e3,t),this.$a=Qa("retryDelaySeedMs",1e4,t),this.Ya=Qa("forwardChannelMaxRetries",2,t),this.ra=Qa("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new KT(t&&t.concurrentRequestLimit),this.Ca=new yM,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}j=nb.prototype;j.ma=8;j.G=1;function Tv(t){if(rb(t),t.G==3){var e=t.V++,n=Gr(t.F);Ce(n,"SID",t.J),Ce(n,"RID",e),Ce(n,"TYPE","terminate"),qu(t,n),e=new Bu(t,t.h,e,void 0),e.K=2,e.v=zd(Gr(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon&&(n=ee.navigator.sendBeacon(e.v.toString(),"")),!n&&ee.Image&&(new Image().src=e.v,n=!0),n||(e.g=hb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Vu(e)}ub(t)}j.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Hd(t){t.g&&(xv(t),t.g.cancel(),t.g=null)}function rb(t){Hd(t),t.u&&(ee.clearTimeout(t.u),t.u=null),Gh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ee.clearTimeout(t.m),t.m=null)}function Np(t,e){t.l.push(new mM(t.Za++,e)),t.G==3&&Kd(t)}function Kd(t){WT(t.i)||t.m||(t.m=!0,fv(t.Ha,t),t.C=0)}function bM(t,e){return GT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=$u(It(t.Ha,t,e),lb(t,t.C)),t.C++,!0)}j.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Bu(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=yT(s),vT(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ib(this,i,e),n=Gr(this.F),Ce(n,"RID",t),Ce(n,"CVER",22),this.D&&Ce(n,"X-HTTP-Session-Id",this.D),qu(this,n),this.o&&s&&Sv(n,this.o,s),Iv(this.i,i),this.Ra&&Ce(n,"TYPE","init"),this.ja?(Ce(n,"$req",e),Ce(n,"SID","null"),i.$=!0,yg(i,n,null)):yg(i,n,e),this.G=2}}else this.G==3&&(t?a1(this,t):this.l.length==0||WT(this.i)||a1(this))};function a1(t,e){var n;e?n=e.m:n=t.V++;const r=Gr(t.F);Ce(r,"SID",t.J),Ce(r,"RID",n),Ce(r,"AID",t.U),qu(t,r),t.o&&t.s&&Sv(r,t.o,t.s),n=new Bu(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ib(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Iv(t.i,n),yg(n,r,e)}function qu(t,e){t.j&&wv({},function(n,r){Ce(e,r,n)})}function ib(t,e,n){n=Math.min(t.l.length,n);var r=t.j?It(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].h;const c=i[l].g;if(u-=s,0>u)s=Math.max(0,i[l].h-100),a=!1;else try{vM(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function sb(t){t.g||t.u||(t.Y=1,fv(t.Ga,t),t.A=0)}function bv(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=$u(It(t.Ga,t),lb(t,t.A)),t.A++,!0)}j.Ga=function(){if(this.u=null,ob(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=$u(It(this.bb,this),t)}};j.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Kt(10),Hd(this),ob(this))};function xv(t){t.B!=null&&(ee.clearTimeout(t.B),t.B=null)}function ob(t){t.g=new Bu(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Gr(t.oa);Ce(e,"RID","rpc"),Ce(e,"SID",t.J),Ce(e,"CI",t.N?"0":"1"),Ce(e,"AID",t.U),qu(t,e),Ce(e,"TYPE","xmlhttp"),t.o&&t.s&&Sv(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=zd(Gr(e)),n.s=null,n.U=!0,$T(n,t)}j.ab=function(){this.v!=null&&(this.v=null,Hd(this),bv(this),Kt(19))};function Gh(t){t.v!=null&&(ee.clearTimeout(t.v),t.v=null)}function ab(t,e){var n=null;if(t.g==e){Gh(t),xv(t),t.g=null;var r=2}else if(wg(t.i,e))n=e.D,QT(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=$d(),kt(r,new OT(r,n)),Kd(t)}else sb(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&bM(t,e)||r==2&&bv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:fs(t,5);break;case 4:fs(t,10);break;case 3:fs(t,6);break;default:fs(t,2)}}}function lb(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function fs(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=It(t.jb,t);n||(n=new Ps("//www.google.com/images/cleardot.gif"),ee.location&&ee.location.protocol=="http"||Hh(n,"https"),zd(n)),wM(n.toString(),r)}else Kt(2);t.G=0,t.j&&t.j.va(e),ub(t),rb(t)}j.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Kt(2)):(this.h.info("Failed to ping google.com"),Kt(1))};function ub(t){t.G=0,t.I=-1,t.j&&((YT(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,sv(t.l),t.l.length=0),t.j.ua())}function cb(t,e,n){let r=aM(n);if(r.i!="")e&&Kh(r,e+"."+r.i),Wh(r,r.m);else{const i=ee.location;r=lM(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ov(t.aa,function(i,s){Ce(r,s,i)}),e=t.D,n=t.sa,e&&n&&Ce(r,e,n),Ce(r,"VER",t.ma),qu(t,r),r}function hb(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Ge(new zu({ib:!0})):new Ge(t.qa),e.L=t.H,e}function db(){}j=db.prototype;j.xa=function(){};j.wa=function(){};j.va=function(){};j.ua=function(){};j.Oa=function(){};function Qh(){if(ra&&!(10<=Number(UL)))throw Error("Environmental error: no available transport.")}Qh.prototype.g=function(t,e){return new En(t,e)};function En(t,e){ct.call(this),this.g=new nb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!zh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zh(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ea(this)}bt(En,ct);En.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),fv(It(t.hb,t,e))),Kt(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=cb(t,null,t.W),Kd(t)};En.prototype.close=function(){Tv(this.g)};En.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Np(this.g,e)}else this.v?(e={},e.__data__=dv(t),Np(this.g,e)):Np(this.g,t)};En.prototype.M=function(){this.g.j=null,delete this.j,Tv(this.g),delete this.g,En.Z.M.call(this)};function fb(t){yv.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}bt(fb,yv);function pb(){vv.call(this),this.status=1}bt(pb,vv);function Ea(t){this.g=t}bt(Ea,db);Ea.prototype.xa=function(){kt(this.g,"a")};Ea.prototype.wa=function(t){kt(this.g,new fb(t))};Ea.prototype.va=function(t){kt(this.g,new pb)};Ea.prototype.ua=function(){kt(this.g,"b")};Qh.prototype.createWebChannel=Qh.prototype.g;En.prototype.send=En.prototype.u;En.prototype.open=En.prototype.m;En.prototype.close=En.prototype.close;Ud.NO_ERROR=0;Ud.TIMEOUT=8;Ud.HTTP_ERROR=6;LT.COMPLETE="complete";MT.EventType=Uu;Uu.OPEN="a";Uu.CLOSE="b";Uu.ERROR="c";Uu.MESSAGE="d";ct.prototype.listen=ct.prototype.N;Ge.prototype.listenOnce=Ge.prototype.O;Ge.prototype.getLastError=Ge.prototype.La;Ge.prototype.getLastErrorCode=Ge.prototype.Da;Ge.prototype.getStatus=Ge.prototype.ba;Ge.prototype.getResponseJson=Ge.prototype.Qa;Ge.prototype.getResponseText=Ge.prototype.ga;Ge.prototype.send=Ge.prototype.ea;var xM=function(){return new Qh},CM=function(){return $d()},Dp=Ud,AM=LT,RM=Zs,l1={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},NM=zu,Nc=MT,DM=Ge;const u1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="9.8.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new Dd("@firebase/firestore");function _g(){return Di.logLevel}function PM(t){Di.setLogLevel(t)}function D(t,...e){if(Di.logLevel<=ce.DEBUG){const n=e.map(Cv);Di.debug(`Firestore (${Sa}): ${t}`,...n)}}function We(t,...e){if(Di.logLevel<=ce.ERROR){const n=e.map(Cv);Di.error(`Firestore (${Sa}): ${t}`,...n)}}function cu(t,...e){if(Di.logLevel<=ce.WARN){const n=e.map(Cv);Di.warn(`Firestore (${Sa}): ${t}`,...n)}}function Cv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t="Unexpected state"){const e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+t;throw We(e),new Error(e)}function J(t,e){t||q()}function OM(t,e){t||q()}function B(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends Gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class MM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FM{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new at;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new at,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new at)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string"),new mb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new st(e)}}class $M{constructor(e,n,r){this.type="FirstParty",this.user=st.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class UM{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new $M(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VM{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{s.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J(typeof n.token=="string"),this.p=n.token,new BM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=zM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function ia(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function yb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new N(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new N(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new N(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ae(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new Ae(0,0))}static max(){return new X(new Ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(),r===void 0?r=e.length-n:r>e.length-n&&q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ue extends hu{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new N(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const jM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends hu{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return jM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new N(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new N(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new N(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new N(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.path=e}static fromPath(e){return new F(ue.fromString(e))}static fromName(e){return new F(ue.fromString(e).popFirst(5))}static empty(){return new F(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Ig(t){return t.fields.find(e=>e.kind===2)}function rs(t){return t.fields.filter(e=>e.kind!==2)}vb.UNKNOWN_ID=-1;class qM{constructor(e,n){this.fieldPath=e,this.kind=n}}class Yh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yh(0,Sn.min())}}function wb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Sn(i,F.empty(),e)}function _b(t){return new Sn(t.readTime,t.key,-1)}class Sn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sn(X.min(),F.empty(),-1)}static max(){return new Sn(X.max(),F.empty(),-1)}}function Av(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==Ib)throw t;D("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,r)=>{n(e)})}static reject(e){return new T((n,r)=>{r(e)})}static waitFor(e){return new T((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=T.resolve(!1);for(const r of e)n=n.next(i=>i?T.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new T((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new T((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.T=new at,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{n.error?this.T.reject(new Cl(e,n.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Rv(r.target.error);this.T.reject(new Cl(e,i))}}static open(e,n,r,i){try{return new Wd(n,e.transaction(i,r))}catch(s){throw new Cl(n,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new KM(n)}}class Yn{constructor(e,n,r){this.name=e,this.version=n,this.P=r,Yn.v(be())===12.2&&We("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),is(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!Rs())return!1;if(Yn.S())return!0;const e=be(),n=Yn.v(e),r=0<n&&n<10,i=Yn.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.C)==="YES"}static N(e,n){return e.store(n)}static v(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async k(e){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Cl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new N(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new N(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Cl(e,o))},i.onupgradeneeded=s=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.P.O(o,i.transaction,s.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.M&&(this.db.onversionchange=n=>this.M(n)),this.db}F(e){this.M=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Wd.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.R(),u)).catch(u=>(a.abort(u),T.reject(u))).toPromise();return l.catch(()=>{}),await a.A,l}catch(a){const l=a.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",a.message,"Retrying:",l),this.close(),!l)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}class HM{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return is(this.$.delete())}}class Cl extends N{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ki(t){return t.name==="IndexedDbTransactionError"}class KM{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),is(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),is(this.store.add(e))}get(e){return is(this.store.get(e)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),is(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),is(this.store.count())}K(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new T((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new T((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}W(e,n){D("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Y(e){const n=this.cursor({});return new T((r,i)=>{n.onerror=s=>{const o=Rv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new T((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new HM(a),u=n(a.primaryKey,a.value,l);if(u instanceof T){const c=u.catch(h=>(l.done(),T.reject(h)));r.push(c)}l.isDone?i():l.U===null?a.continue():a.continue(l.U)}}).next(()=>T.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function is(t){return new T((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Rv(r.target.error);n(i)}})}let c1=!1;function Rv(t){const e=Yn.v(be());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new N("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return c1||(c1=!0,setTimeout(()=>{throw r},0)),r}}return t}class WM{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}Z(e){D("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{D("IndexBackiller",`Documents written: ${await this.X.tt()}`)}catch(n){Ki(n)?D("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Hi(n)}await this.Z(1)})}}class GM{constructor(e,n){this.localStore=e,this.persistence=n}async tt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.et(n,e))}et(e,n){const r=new Set;let i=n,s=!0;return T.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return D("IndexBackiller",`Processing collection: ${o}`),this.nt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}nt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.st(i,s)).next(a=>(D("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}st(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=_b(s);Av(o,r)>0&&(r=o)}),new Sn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Eb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.ot=-1;class Fe{constructor(e,n){this.comparator=e,this.root=n||yt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:yt.RED,this.left=i!=null?i:yt.EMPTY,this.right=s!=null?s:yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new yt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();const e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}}yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(t,e,n,r,i){return this}insert(t,e,n){return new yt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d1(this.data.getIterator())}getIteratorFrom(e){return new d1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ge(this.comparator);return n.data=e,n}}class d1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ho(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new In([])}unionWith(e){let n=new ge(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new tt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const YM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(J(!!t),typeof t=="string"){let e=0;const n=YM.exec(t);if(J(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sb(t){const e=t.mapValue.fields.__previous_value__;return Nv(e)?Sb(e):e}function du(t){const e=Pi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n,r,i,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Qr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){return t==null}function fu(t){return t===0&&1/t==-1/0}function Tb(t){return typeof t=="number"&&Number.isInteger(t)&&!fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},th={nullValue:"NULL_VALUE"};function Ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nv(t)?4:bb(t)?9007199254740991:10:q()}function kr(t,e){if(t===e)return!0;const n=Ls(t);if(n!==Ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return du(t).isEqual(du(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Pi(r.timestampValue),o=Pi(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Os(r.bytesValue).isEqual(Os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Me(r.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(r.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Me(r.integerValue)===Me(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Me(r.doubleValue),o=Me(i.doubleValue);return s===o?fu(s)===fu(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return ia(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(h1(s)!==h1(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!kr(s[a],o[a])))return!1;return!0}(t,e);default:return q()}}function pu(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=Ls(t),r=Ls(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Me(i.integerValue||i.doubleValue),a=Me(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return f1(t.timestampValue,e.timestampValue);case 4:return f1(du(t),du(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Os(i),a=Os(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=ie(o[l],a[l]);if(u!==0)return u}return ie(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ie(Me(i.latitude),Me(s.latitude));return o!==0?o:ie(Me(i.longitude),Me(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Oi(o[l],a[l]);if(u)return u}return ie(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===vi.mapValue&&s===vi.mapValue)return 0;if(i===vi.mapValue)return 1;if(s===vi.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=ie(a[c],u[c]);if(h!==0)return h;const d=Oi(o[a[c]],l[u[c]]);if(d!==0)return d}return ie(a.length,u.length)}(t.mapValue,e.mapValue);default:throw q()}}function f1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=Pi(t),r=Pi(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function zo(t){return kg(t)}function kg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Pi(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Os(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=kg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${kg(r.fields[a])}`;return s+"}"}(t.mapValue):q();var e,n}function Ms(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Eg(t){return!!t&&"integerValue"in t}function mu(t){return!!t&&"arrayValue"in t}function p1(t){return!!t&&"nullValue"in t}function m1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nh(t){return!!t&&"mapValue"in t}function Al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Al(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function JM(t){return"nullValue"in t?th:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ms(Qr.empty(),F.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:q()}function ZM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ms(Qr.empty(),F.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?vi:q()}function g1(t,e){const n=Oi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function y1(t,e){const n=Oi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Al(n)}setAll(e){let n=ze.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Al(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vt(Al(this.value))}}function xb(t){const e=[];return eo(t.fields,(n,r)=>{const i=new ze([n]);if(nh(r)){const s=xb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new we(e,0,X.min(),X.min(),vt.empty(),0)}static newFoundDocument(e,n,r){return new we(e,1,n,X.min(),r,0)}static newNoDocument(e,n){return new we(e,2,n,X.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new we(e,3,n,X.min(),vt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof we&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new we(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function v1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new eF(t,e,n,r,i,s,o)}function Fs(t){const e=B(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+zo(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zo(r)).join(",")),e.ut=n}return e.ut}function tF(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${zo(r.value)}`;var r}).join(", ")}]`),Hu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>zo(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>zo(n)).join(",")),`Target(${e})`}function Ku(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!uF(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!kr(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!k1(t.startAt,e.startAt)&&k1(t.endAt,e.endAt)}function Xh(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Jh(t,e){return t.filters.filter(n=>n instanceof wt&&n.field.isEqual(e))}function w1(t,e,n){let r=th,i=!0;for(const s of Jh(t,e)){let o=th,a=!0;switch(s.op){case"<":case"<=":o=JM(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=th}g1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];g1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function _1(t,e,n){let r=vi,i=!0;for(const s of Jh(t,e)){let o=vi,a=!0;switch(s.op){case">=":case">":o=ZM(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=vi}y1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];y1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class wt extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,r):new nF(e,n,r):n==="array-contains"?new sF(e,r):n==="in"?new oF(e,r):n==="not-in"?new aF(e,r):n==="array-contains-any"?new lF(e,r):new wt(e,n,r)}static ct(e,n,r){return n==="in"?new rF(e,r):new iF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(Oi(n,this.value)):n!==null&&Ls(this.value)===Ls(n)&&this.at(Oi(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class nF extends wt{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.at(n)}}class rF extends wt{constructor(e,n){super(e,"in",n),this.keys=Cb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iF extends wt{constructor(e,n){super(e,"not-in",n),this.keys=Cb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Cb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}class sF extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mu(n)&&pu(n.arrayValue,this.value)}}class oF extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pu(this.value.arrayValue,n)}}class aF extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!pu(this.value.arrayValue,n)}}class lF extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pu(this.value.arrayValue,r))}}class Li{constructor(e,n){this.position=e,this.inclusive=n}}class jo{constructor(e,n="asc"){this.field=e,this.dir=n}}function uF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function I1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=F.comparator(F.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function k1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.lt=null,this.ft=null,this.startAt,this.endAt}}function Ab(t,e,n,r,i,s,o,a){return new Zr(t,e,n,r,i,s,o,a)}function Ta(t){return new Zr(t)}function cF(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Pv(t){for(const e of t.filters)if(e.ht())return e.field;return null}function Ov(t){return t.collectionGroup!==null}function sa(t){const e=B(t);if(e.lt===null){e.lt=[];const n=Pv(e),r=Dv(e);if(n!==null&&r===null)n.isKeyField()||e.lt.push(new jo(n)),e.lt.push(new jo(ze.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new jo(ze.keyField(),s))}}}return e.lt}function Un(t){const e=B(t);if(!e.ft)if(e.limitType==="F")e.ft=v1(e.path,e.collectionGroup,sa(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of sa(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new jo(s.field,o))}const r=e.endAt?new Li(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Li(e.startAt.position,e.startAt.inclusive):null;e.ft=v1(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.ft}function Rb(t,e,n){return new Zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wu(t,e){return Ku(Un(t),Un(e))&&t.limitType===e.limitType}function Nb(t){return`${Fs(Un(t))}|lt:${t.limitType}`}function Sg(t){return`Query(target=${tF(Un(t))}; limitType=${t.limitType})`}function Lv(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):F.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=I1(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,sa(n),r)||n.endAt&&!function(i,s,o){const a=I1(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,sa(n),r))}(t,e)}function Db(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pb(t){return(e,n)=>{let r=!1;for(const i of sa(t)){const s=hF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function hF(t,e,n){const r=t.field.isKeyField()?F.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Oi(a,l):q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(e)?"-0":e}}function Lb(t){return{integerValue:""+t}}function Mb(t,e){return Tb(e)?Lb(e):Ob(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function dF(t,e,n){return t instanceof oa?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof $s?$b(t,e):t instanceof Us?Ub(t,e):function(r,i){const s=Fb(r,i),o=E1(s)+E1(r._t);return Eg(s)&&Eg(r._t)?Lb(o):Ob(r.wt,o)}(t,e)}function fF(t,e,n){return t instanceof $s?$b(t,e):t instanceof Us?Ub(t,e):n}function Fb(t,e){return t instanceof aa?Eg(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class oa extends Gd{}class $s extends Gd{constructor(e){super(),this.elements=e}}function $b(t,e){const n=Bb(e);for(const r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Us extends Gd{constructor(e){super(),this.elements=e}}function Ub(t,e){let n=Bb(e);for(const r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}class aa extends Gd{constructor(e,n){super(),this.wt=e,this._t=n}}function E1(t){return Me(t.integerValue||t.doubleValue)}function Bb(t){return mu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.field=e,this.transform=n}}function pF(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof $s&&r instanceof $s||n instanceof Us&&r instanceof Us?ia(n.elements,r.elements,kr):n instanceof aa&&r instanceof aa?kr(n._t,r._t):n instanceof oa&&r instanceof oa}(t.transform,e.transform)}class mF{constructor(e,n){this.version=e,this.transformResults=n}}class De{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new De}static exists(e){return new De(void 0,e)}static updateTime(e){return new De(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qd{}function Vb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xa(t.key,De.none()):new ba(t.key,t.data,De.none());{const n=t.data,r=vt.empty();let i=new ge(ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ei(t.key,r,new In(i.toArray()),De.none())}}function gF(t,e,n){t instanceof ba?function(r,i,s){const o=r.value.clone(),a=T1(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ei?function(r,i,s){if(!rh(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=T1(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(zb(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Rl(t,e,n,r){return t instanceof ba?function(i,s,o,a){if(!rh(i.precondition,s))return o;const l=i.value.clone(),u=b1(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ei?function(i,s,o,a){if(!rh(i.precondition,s))return o;const l=b1(i.fieldTransforms,a,s),u=s.data;return u.setAll(zb(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return rh(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function yF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Fb(r.transform,i||null);s!=null&&(n===null&&(n=vt.empty()),n.set(r.field,s))}return n||null}function S1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ia(n,r,(i,s)=>pF(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ba extends Qd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ei extends Qd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function T1(t,e,n){const r=new Map;J(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fF(o,a,n[i]))}return r}function b1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,dF(s,o,e))}return r}class xa extends Qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mv extends Qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,le;function jb(t){switch(t){default:return q();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function qb(t){if(t===void 0)return We("GRPC error has no .code"),x.UNKNOWN;switch(t){case je.OK:return x.OK;case je.CANCELLED:return x.CANCELLED;case je.UNKNOWN:return x.UNKNOWN;case je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case je.INTERNAL:return x.INTERNAL;case je.UNAVAILABLE:return x.UNAVAILABLE;case je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case je.NOT_FOUND:return x.NOT_FOUND;case je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case je.ABORTED:return x.ABORTED;case je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case je.DATA_LOSS:return x.DATA_LOSS;default:return q()}}(le=je||(je={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Eb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=new Fe(F.comparator);function un(){return wF}const Hb=new Fe(F.comparator);function pl(...t){let e=Hb;for(const n of t)e=e.insert(n.key,n);return e}function Kb(t){let e=Hb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function dr(){return Nl()}function Wb(){return Nl()}function Nl(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const _F=new Fe(F.comparator),IF=new ge(F.comparator);function se(...t){let e=IF;for(const n of t)e=e.add(n);return e}const kF=new ge(ie);function Yd(){return kF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,n)),new Qu(X.min(),r,Yd(),un(),se())}}class Yu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Yu(tt.EMPTY_BYTE_STRING,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,i){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=i}}class Gb{constructor(e,n){this.targetId=e,this.It=n}}class Qb{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class x1{constructor(){this.Tt=0,this.Et=A1(),this.At=tt.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=se(),n=se(),r=se();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q()}}),new Yu(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=A1()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class EF{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=un(),this.Bt=C1(),this.Lt=new ge(ie)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,i)=>{this.jt(i)&&n(i)})}zt(e){const n=e.targetId,r=e.It.count,i=this.Ht(n);if(i){const s=i.target;if(Xh(s))if(r===0){const o=new F(s.path);this.Kt(n,o,we.newNoDocument(o,X.min()))}else J(r===1);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&Xh(a.target)){const l=new F(a.target.path);this.$t.get(l)!==null||this.Xt(o,l)||this.Kt(o,l,we.newNoDocument(l,e))}s.vt&&(n.set(o,s.St()),s.Dt())}});let r=se();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ht(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new Qu(e,n,this.Lt,this.$t,r);return this.$t=un(),this.Bt=C1(),this.Lt=new ge(ie),i}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,n)?i.Ct(n,1):i.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new x1,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new ge(ie),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=this.Ht(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new x1),this.Mt.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Mt.getRemoteKeysForTarget(e).has(n)}}function C1(){return new Fe(F.comparator)}function A1(){return new Fe(F.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),TF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class bF{constructor(e,n){this.databaseId=e,this.dt=n}}function gu(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yb(t,e){return t.dt?e.toBase64():e.toUint8Array()}function xF(t,e){return gu(t,e.toTimestamp())}function lt(t){return J(!!t),X.fromTimestamp(function(e){const n=Pi(e);return new Ae(n.seconds,n.nanos)}(t))}function Fv(t,e){return function(n){return new ue(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Xb(t){const e=ue.fromString(t);return J(sx(e)),e}function yu(t,e){return Fv(t.databaseId,e.path)}function yr(t,e){const n=Xb(e);if(n.get(1)!==t.databaseId.projectId)throw new N(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new N(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(Zb(n))}function Tg(t,e){return Fv(t.databaseId,e)}function Jb(t){const e=Xb(t);return e.length===4?ue.emptyPath():Zb(e)}function vu(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Zb(t){return J(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function R1(t,e,n){return{name:yu(t,e),fields:n.value.mapValue.fields}}function ex(t,e,n){const r=yr(t,e.name),i=lt(e.updateTime),s=new vt({mapValue:{fields:e.fields}}),o=we.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function CF(t,e){return"found"in e?function(n,r){J(!!r.found),r.found.name,r.found.updateTime;const i=yr(n,r.found.name),s=lt(r.found.updateTime),o=new vt({mapValue:{fields:r.found.fields}});return we.newFoundDocument(i,s,o)}(t,e):"missing"in e?function(n,r){J(!!r.missing),J(!!r.readTime);const i=yr(n,r.missing),s=lt(r.readTime);return we.newNoDocument(i,s)}(t,e):q()}function AF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.dt?(J(u===void 0||typeof u=="string"),tt.fromBase64String(u||"")):(J(u===void 0||u instanceof Uint8Array),tt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?x.UNKNOWN:qb(l.code);return new N(u,l.message||"")}(o);n=new Qb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yr(t,r.document.name),s=lt(r.document.updateTime),o=new vt({mapValue:{fields:r.document.fields}}),a=we.newFoundDocument(i,s,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new ih(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yr(t,r.document),s=r.readTime?lt(r.readTime):X.min(),o=we.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ih([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yr(t,r.document),s=r.removedTargetIds||[];n=new ih([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new vF(i),o=r.targetId;n=new Gb(o,s)}}return n}function wu(t,e){let n;if(e instanceof ba)n={update:R1(t,e.key,e.value)};else if(e instanceof xa)n={delete:yu(t,e.key)};else if(e instanceof ei)n={update:R1(t,e.key,e.data),updateMask:MF(e.fieldMask)};else{if(!(e instanceof Mv))return q();n={verify:yu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof oa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $s)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Us)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof aa)return{fieldPath:s.field.canonicalString(),increment:o._t};throw q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:xF(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:q()}(t,e.precondition)),n}function bg(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?De.updateTime(lt(i.updateTime)):i.exists!==void 0?De.exists(i.exists):De.none()}(e.currentDocument):De.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)J(o.setToServerValue==="REQUEST_TIME"),a=new oa;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new $s(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new Us(u)}else"increment"in o?a=new aa(s,o.increment):q();const l=ze.fromServerFormat(o.fieldPath);return new Gu(l,a)}(t,i)):[];if(e.update){e.update.name;const i=yr(t,e.update.name),s=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new In(l.map(u=>ze.fromServerFormat(u)))}(e.updateMask);return new ei(i,s,o,n,r)}return new ba(i,s,n,r)}if(e.delete){const i=yr(t,e.delete);return new xa(i,n)}if(e.verify){const i=yr(t,e.verify);return new Mv(i,n)}return q()}function RF(t,e){return t&&t.length>0?(J(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?lt(r.updateTime):lt(i);return s.isEqual(X.min())&&(s=lt(i)),new mF(s,r.transformResults||[])}(n,e))):[]}function tx(t,e){return{documents:[Tg(t,e.path)]}}function nx(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Tg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Tg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(m1(h.value))return{unaryFilter:{field:fo(h.field),op:"IS_NAN"}};if(p1(h.value))return{unaryFilter:{field:fo(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(m1(h.value))return{unaryFilter:{field:fo(h.field),op:"IS_NOT_NAN"}};if(p1(h.value))return{unaryFilter:{field:fo(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(h.field),op:PF(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:fo(c.field),direction:DF(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(l,u){return l.dt||Hu(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function rx(t){let e=Jb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){J(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=ix(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new jo(Do(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Hu(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new Li(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new Li(d,h)}(n.endAt)),Ab(e,i,o,s,a,"F",l,u)}function NF(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return q()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function ix(t){return t?t.unaryFilter!==void 0?[LF(t)]:t.fieldFilter!==void 0?[OF(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>ix(e)).reduce((e,n)=>e.concat(n)):q():[]}function DF(t){return SF[t]}function PF(t){return TF[t]}function fo(t){return{fieldPath:t.canonicalString()}}function Do(t){return ze.fromServerFormat(t.fieldPath)}function OF(t){return wt.create(Do(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}function LF(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Do(t.unaryFilter.field);return wt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Do(t.unaryFilter.field);return wt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Do(t.unaryFilter.field);return wt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Do(t.unaryFilter.field);return wt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return q()}}function MF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=N1(e)),e=FF(t.get(n),e);return N1(e)}function FF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function N1(t){return t+""}function fr(t){const e=t.length;if(J(e>=2),e===2)return J(t.charAt(0)===""&&t.charAt(1)===""),ue.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&q(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:q()}s=o+2}return new ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t,e){return[t,Qt(e)]}function ox(t,e,n){return[t,Qt(e),n]}const $F={},UF=["prefixPath","collectionGroup","readTime","documentId"],BF=["prefixPath","collectionGroup","documentId"],VF=["collectionGroup","readTime","prefixPath","documentId"],zF=["canonicalId","targetId"],jF=["targetId","path"],qF=["path","targetId"],HF=["collectionId","parent"],KF=["indexId","uid"],WF=["uid","sequenceNumber"],GF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QF=["indexId","uid","orderedDocumentKey"],YF=["userId","collectionPath","documentId"],XF=["userId","collectionPath","largestBatchId"],JF=["userId","collectionGroup","largestBatchId"],ax=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZF=[...ax,"documentOverlays"],lx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ux=lx,e$=[...ux,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends kb{constructor(e,n){super(),this.ee=e,this.currentSequenceNumber=n}}function dt(t,e){const n=B(t);return Yn.N(n.ee,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Wb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Vb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,(n,r)=>S1(n,r))&&ia(this.baseMutations,e.baseMutations,(n,r)=>S1(n,r))}}class Uv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){J(e.mutations.length===r.length);let i=_F;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Uv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r,i,s=X.min(),o=X.min(),a=tt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.ne=e}}function t$(t,e){let n;if(e.document)n=ex(t.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=F.fromSegments(e.noDocument.path),i=Vs(e.noDocument.readTime);n=we.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{const r=F.fromSegments(e.unknownDocument.path),i=Vs(e.unknownDocument.version);n=we.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ae(r[0],r[1]);return X.fromTimestamp(i)}(e.readTime)),n}function P1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:yu(i,s.key),fields:s.data.value.mapValue.fields,updateTime:gu(i,s.version.toTimestamp())}}(t.ne,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Bs(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:n.path.toArray(),version:Bs(e.version)}}return r}function Zh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Bs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vs(t){const e=new Ae(t.seconds,t.nanoseconds);return X.fromTimestamp(e)}function ss(t,e){const n=(e.baseMutations||[]).map(s=>bg(t.ne,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>bg(t.ne,s)),i=Ae.fromMillis(e.localWriteTimeMs);return new $v(e.batchId,i,n,r)}function ml(t){const e=Vs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Vs(t.lastLimboFreeSnapshotVersion):X.min();let r;var i;return t.query.documents!==void 0?(J((i=t.query).documents.length===1),r=Un(Ta(Jb(i.documents[0])))):r=function(s){return Un(rx(s))}(t.query),new bi(r,t.targetId,0,t.lastListenSequenceNumber,e,n,tt.fromBase64String(t.resumeToken))}function hx(t,e){const n=Bs(e.snapshotVersion),r=Bs(e.lastLimboFreeSnapshotVersion);let i;i=Xh(e.target)?tx(t.ne,e.target):nx(t.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vv(t){const e=rx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rb(e,e.limit,"L"):e}function Pp(t,e){return new Bv(e.largestBatchId,bg(t.ne,e.overlayMutation))}function O1(t,e){const n=e.path.lastSegment();return[t,Qt(e.path.popLast()),n]}function L1(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Bs(r.readTime),documentKey:Qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${getBundleMetadata(e,n){return M1(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Vs(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return M1(e).put({bundleId:(r=n).id,createTime:Bs(lt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return F1(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:Vv(i.bundledQuery),readTime:Vs(i.readTime)};var i})}saveNamedQuery(e,n){return F1(e).put(function(r){return{name:r.name,readTime:Bs(lt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function M1(t){return dt(t,"bundles")}function F1(t){return dt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.wt=e,this.userId=n}static se(e,n){const r=n.uid||"";return new Xd(e,r)}getOverlay(e,n){return Ya(e).get(O1(this.userId,n)).next(r=>r?Pp(this.wt,r):null)}getOverlays(e,n){const r=dr();return T.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Bv(n,o);i.push(this.ie(e,a))}),T.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Qt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ya(e).W("collectionPathOverlayIndex",a))}),T.waitFor(s)}getOverlaysForCollection(e,n,r){const i=dr(),s=Qt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ya(e).K("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Pp(this.wt,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=dr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ya(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=Pp(this.wt,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ie(e,n){return Ya(e).put(function(r,i,s){const[o,a,l]=O1(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:wu(r.ne,s.mutation)}}(this.wt,this.userId,n))}}function Ya(t){return dt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(Me(e.integerValue));else if("doubleValue"in e){const r=Me(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),fu(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),typeof r=="string"?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(Os(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?bb(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):q()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),F.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}os.ye=new os;function r$(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function $1(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=r$(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class i${constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ie(r.value),r=n.next();this.Te()}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=n.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=n.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const n=this.Ve(e),r=$1(n);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}De(e){const n=this.Ve(e),r=$1(n);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ie(e){const n=255&e;n===0?(this.xe(0),this.xe(255)):n===255?(this.xe(255),this.xe(0)):this.xe(n)}Ae(e){const n=255&e;n===0?(this.ke(0),this.ke(255)):n===255?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class s${constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class o${constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Xa{constructor(){this.Me=new i$,this.Fe=new s$(this.Me),this.$e=new o$(this.Me)}seed(e){this.Me.seed(e)}Be(e){return e===0?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new as(this.indexId,this.documentKey,this.arrayValue,r)}}function Ji(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=U1(t.arrayValue,e.arrayValue),n!==0?n:(n=U1(t.directionalValue,e.directionalValue),n!==0?n:F.comparator(t.documentKey,e.documentKey)))}function U1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const n of e.filters){const r=n;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const n=Ig(e);if(n!==void 0&&!this.Qe(n))return!1;const r=rs(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(this.Ke!==void 0){const o=r[i];if(!this.je(this.Ke,o)||!this.We(this.Ue[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],o))return!1}return!0}Qe(e){for(const n of this.qe)if(this.je(n,e))return!0;return!1}je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}We(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(){this.ze=new zv}addToCollectionParentIndex(e,n){return this.ze.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(Sn.min())}updateCollectionGroup(e,n,r){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class zv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ge(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ge(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Uint8Array(0);class u${constructor(e,n){this.user=e,this.databaseId=n,this.He=new zv,this.Je=new Wi(r=>Fs(r),(r,i)=>Ku(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.He.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.He.add(n)});const s={collectionId:r,parent:Qt(i)};return B1(e).put(s)}return T.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[yb(n),""],!1,!0);return B1(e).K(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(fr(o.parent))}return r})}addFieldIndex(e,n){const r=Oc(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Za(e);return s.next(a=>{o.put(L1(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Oc(e),i=Za(e),s=Ja(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Ja(e);let i=!0;const s=new Map;return T.forEach(this.Ye(n),o=>this.Xe(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se();const a=[];return T.forEach(s,(l,u)=>{var c;D("IndexedDbIndexManager",`Using index ${c=l,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(g=>`${g.fieldPath}:${g.kind}`).join(",")}`} to execute ${Fs(n)}`);const h=function(g,S){const b=Ig(S);if(b===void 0)return null;for(const k of Jh(g,b.fieldPath))switch(k.op){case"array-contains-any":return k.value.arrayValue.values||[];case"array-contains":return[k.value]}return null}(u,l),d=function(g,S){const b=new Map;for(const k of rs(S))for(const C of Jh(g,k.fieldPath))switch(C.op){case"==":case"in":b.set(k.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return b.set(k.fieldPath.canonicalString(),C.value),Array.from(b.values())}return null}(u,l),f=function(g,S){const b=[];let k=!0;for(const C of rs(S)){const R=C.kind===0?w1(g,C.fieldPath,g.startAt):_1(g,C.fieldPath,g.startAt);b.push(R.value),k&&(k=R.inclusive)}return new Li(b,k)}(u,l),p=function(g,S){const b=[];let k=!0;for(const C of rs(S)){const R=C.kind===0?_1(g,C.fieldPath,g.endAt):w1(g,C.fieldPath,g.endAt);b.push(R.value),k&&(k=R.inclusive)}return new Li(b,k)}(u,l),v=this.Ze(l,u,f),E=this.Ze(l,u,p),m=this.tn(l,u,d),y=this.en(l.indexId,h,v,f.inclusive,E,p.inclusive,m);return T.forEach(y,g=>r.j(g,n.limit).next(S=>{S.forEach(b=>{const k=F.fromSegments(b.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return T.resolve(null)})}Ye(e){let n=this.Je.get(e);return n||(n=[e],this.Je.set(e,n),n)}en(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const d=n?this.nn(n[h/u]):Pc,f=this.sn(e,d,r[h%u],i),p=this.rn(e,d,s[h%u],o),v=a.map(E=>this.sn(e,d,E,!0));c.push(...this.createRange(f,p,v))}return c}sn(e,n,r,i){const s=new as(e,F.empty(),n,r);return i?s:s.Le()}rn(e,n,r,i){const s=new as(e,F.empty(),n,r);return i?s.Le():s}Xe(e,n){const r=new a$(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.Ge(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return T.forEach(this.Ye(n),i=>this.Xe(e,i).next(s=>{s?r!==0&&s.fields.length<function(o){let a=new ge(ze.comparator),l=!1;for(const u of o.filters){const c=u;c.field.isKeyField()||(c.op==="array-contains"||c.op==="array-contains-any"?l=!0:a=a.add(c.field))}for(const u of o.orderBy)u.field.isKeyField()||(a=a.add(u.field));return a.size+(l?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,n){const r=new Xa;for(const i of rs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Be(i.kind);os.ye.re(s,o)}return r.Oe()}nn(e){const n=new Xa;return os.ye.re(e,n.Be(0)),n.Oe()}un(e,n){const r=new Xa;return os.ye.re(Ms(this.databaseId,n),r.Be(function(i){const s=rs(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Oe()}tn(e,n,r){if(r===null)return[];let i=[];i.push(new Xa);let s=0;for(const o of rs(e)){const a=r[s++];for(const l of i)if(this.cn(n,o.fieldPath)&&mu(a))i=this.an(i,o,a);else{const u=l.Be(o.kind);os.ye.re(a,u)}}return this.hn(i)}Ze(e,n,r){return this.tn(e,n,r.position)}hn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Oe();return n}an(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Xa;l.seed(a.Oe()),os.ye.re(o,l.Be(n.kind)),s.push(l)}return s}cn(e,n){return!!e.filters.find(r=>r instanceof wt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Oc(e),i=Za(e);return(n?r.K("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.K()).next(s=>{const o=[];return T.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const h=c?new Yh(c.sequenceNumber,new Sn(Vs(c.readTime),new F(fr(c.documentKey)),c.largestBatchId)):Yh.empty(),d=u.fields.map(([f,p])=>new qM(ze.fromServerFormat(f),p));return new vb(u.indexId,u.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ie(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Oc(e),s=Za(e);return this.ln(e).next(o=>i.K("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>T.forEach(a,l=>s.put(L1(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return T.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?T.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),T.forEach(a,l=>this.fn(e,i,l).next(u=>{const c=this.dn(s,l);return u.isEqual(c)?T.resolve():this._n(e,s,l,u,c)}))))})}wn(e,n,r,i){return Ja(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,n.key),documentKey:n.key.path.toArray()})}mn(e,n,r,i){return Ja(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,n.key),n.key.path.toArray()])}fn(e,n,r){const i=Ja(e);let s=new ge(Ji);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,n)])},(o,a)=>{s=s.add(new as(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}dn(e,n){let r=new ge(Ji);const i=this.on(n,e);if(i==null)return r;const s=Ig(n);if(s!=null){const o=e.data.field(s.fieldPath);if(mu(o))for(const a of o.arrayValue.values||[])r=r.add(new as(n.indexId,e.key,this.nn(a),i))}else r=r.add(new as(n.indexId,e.key,Pc,i));return r}_n(e,n,r,i,s){D("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,c,h){const d=a.getIterator(),f=l.getIterator();let p=ho(d),v=ho(f);for(;p||v;){let E=!1,m=!1;if(p&&v){const y=u(p,v);y<0?m=!0:y>0&&(E=!0)}else p!=null?m=!0:E=!0;E?(c(v),v=ho(f)):m?(h(p),p=ho(d)):(p=ho(d),v=ho(f))}}(i,s,Ji,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.mn(e,n,r,a))}),T.waitFor(o)}ln(e){let n=1;return Za(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ji(o,a)).filter((o,a,l)=>!a||Ji(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ji(o,e),l=Ji(o,n);if(a===0)i[0]=e.Le();else if(a>0&&l<0)i.push(o),i.push(o.Le());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Pc,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Pc,[]]));return s}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(V1)}getMinOffset(e,n){return T.mapArray(this.Ye(n),r=>this.Xe(e,r).next(i=>i||q())).next(V1)}}function B1(t){return dt(t,"collectionParents")}function Ja(t){return dt(t,"indexEntries")}function Oc(t){return dt(t,"indexConfiguration")}function Za(t){return dt(t,"indexState")}function V1(t){J(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Av(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Sn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class nn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(c,h,d)=>(a++,d.delete()));s.push(l.next(()=>{J(a===1)}));const u=[];for(const c of n.mutations){const h=ox(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return T.waitFor(s).next(()=>u)}function ed(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw q();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Jd{constructor(e,n,r,i){this.userId=e,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,n,r,i){J(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Jd(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=yo(e),o=ai(e);return o.add({}).next(a=>{J(typeof a=="number");const l=new $v(a,n,r,i),u=function(d,f,p){const v=p.baseMutations.map(m=>wu(d.ne,m)),E=p.mutations.map(m=>wu(d.ne,m));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.wt,this.userId,l),c=[];let h=new ge((d,f)=>ie(d.canonicalString(),f.canonicalString()));for(const d of i){const f=ox(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,$F))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.gn[a]=l.keys()}),T.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return ai(e).get(n).next(r=>r?(J(r.userId===this.userId),ss(this.wt,r)):null)}yn(e,n){return this.gn[n]?T.resolve(this.gn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.gn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ai(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(J(a.batchId>=r),s=ss(this.wt,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ai(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).K("userMutationsIndex",n).next(r=>r.map(i=>ss(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=sh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return yo(e).J({range:i},(o,a,l)=>{const[u,c,h]=o,d=fr(c);if(u===this.userId&&n.path.isEqual(d))return ai(e).get(h).next(f=>{if(!f)throw q();J(f.userId===this.userId),s.push(ss(this.wt,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(ie);const i=[];return n.forEach(s=>{const o=sh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=yo(e).J({range:a},(u,c,h)=>{const[d,f,p]=u,v=fr(f);d===this.userId&&s.path.isEqual(v)?r=r.add(p):h.done()});i.push(l)}),T.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=sh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ge(ie);return yo(e).J({range:o},(l,u,c)=>{const[h,d,f]=l,p=fr(d);h===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):c.done()}).next(()=>this.pn(e,a))}pn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ai(e).get(s).next(o=>{if(o===null)throw q();J(o.userId===this.userId),r.push(ss(this.wt,o))}))}),T.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return dx(e.ee,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.In(n.batchId)}),T.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return T.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return yo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=fr(s[1]);i.push(l)}else a.done()}).next(()=>{J(i.length===0)})})}containsKey(e,n){return fx(e,this.userId,n)}Tn(e){return px(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fx(t,e,n){const r=sh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return yo(t).J({range:s,H:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function ai(t){return dt(t,"mutations")}function yo(t){return dt(t,"documentMutations")}function px(t){return dt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new zs(0)}static Rn(){return new zs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e,n){this.referenceDelegate=e,this.wt=n}allocateTargetId(e){return this.bn(e).next(n=>{const r=new zs(n.highestTargetId);return n.highestTargetId=r.next(),this.Pn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(n=>X.fromTimestamp(new Ae(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Pn(e,i)))}addTargetData(e,n){return this.vn(e,n).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(n,r),this.Pn(e,r))))}updateTargetData(e,n){return this.vn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>po(e).delete(n.targetId)).next(()=>this.bn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return po(e).J((o,a)=>{const l=ml(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>T.waitFor(s)).next(()=>i)}forEachTarget(e,n){return po(e).J((r,i)=>{const s=ml(i);n(s)})}bn(e){return j1(e).get("targetGlobalKey").next(n=>(J(n!==null),n))}Pn(e,n){return j1(e).put("targetGlobalKey",n)}vn(e,n){return po(e).put(hx(this.wt,n))}Vn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Fs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return po(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=ml(a);Ku(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=pi(e);return n.forEach(o=>{const a=Qt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),T.waitFor(i)}removeMatchingKeys(e,n,r){const i=pi(e);return T.forEach(n,s=>{const o=Qt(s.path);return T.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=pi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=pi(e);let s=se();return i.J({range:r,H:!0},(o,a,l)=>{const u=fr(o[1]),c=new F(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=Qt(n.path),i=IDBKeyRange.bound([r],[yb(r)],!1,!0);let s=0;return pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}te(e,n){return po(e).get(n).next(r=>r?ml(r):null)}}function po(t){return dt(t,"targets")}function j1(t){return dt(t,"targetGlobal")}function pi(t){return dt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1([t,e],[n,r]){const i=ie(t,n);return i===0?ie(e,r):i}class h${constructor(e){this.Sn=e,this.buffer=new ge(q1),this.Dn=0}Cn(){return++this.Dn}xn(e){const n=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();q1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class d${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Nn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return this.Nn!==null}kn(e){D("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Nn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ki(n)?D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Hi(n)}await this.kn(3e5)})}}class f${constructor(e,n){this.On=e,this.params=n}calculateTargetCount(e,n){return this.On.Mn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return T.resolve(ln.ot);const r=new h$(n);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.On.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.On.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),T.resolve(z1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z1):this.$n(e,n))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),_g()<=ce.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),T.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new f$(r,i)}(this,n)}Mn(e){const n=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Bn(e){let n=0;return this.Fn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Fn(e,n){return this.Ln(e,(r,i)=>n(i))}addReference(e,n,r){return Lc(e,r)}removeReference(e,n,r){return Lc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Lc(e,n)}Un(e,n){return function(r,i){let s=!1;return px(r).Y(o=>fx(r,o,i).next(a=>(a&&(s=!0),T.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(o,a)=>{if(a<=n){const l=this.Un(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,X.min()),pi(e).delete([0,Qt(o.path)])))});i.push(l)}}).next(()=>T.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Lc(e,n)}Ln(e,n){const r=pi(e);let i,s=ln.ot;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==ln.ot&&n(new F(fr(i)),s),s=u,i=l):s=ln.ot}).next(()=>{s!==ln.ot&&n(new F(fr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lc(t,e){return pi(t).put(function(n,r){return{targetId:0,path:Qt(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,we.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?T.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Zi(e).put(r)}removeEntry(e,n,r){return Zi(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Zh(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.qn(e,r)))}getEntry(e,n){let r=we.newInvalidDocument(n);return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(el(n))},(i,s)=>{r=this.Kn(n,s)}).next(()=>r)}Gn(e,n){let r={size:0,document:we.newInvalidDocument(n)};return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(el(n))},(i,s)=>{r={document:this.Kn(n,s),size:ed(s)}}).next(()=>r)}getEntries(e,n){let r=un();return this.Qn(e,n,(i,s)=>{const o=this.Kn(i,s);r=r.insert(i,o)}).next(()=>r)}jn(e,n){let r=un(),i=new Fe(F.comparator);return this.Qn(e,n,(s,o)=>{const a=this.Kn(s,o);r=r.insert(s,a),i=i.insert(s,ed(o))}).next(()=>({documents:r,Wn:i}))}Qn(e,n,r){if(n.isEmpty())return T.resolve();let i=new ge(W1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(el(i.first()),el(i.last())),o=i.getIterator();let a=o.getNext();return Zi(e).J({index:"documentKeyIndex",range:s},(l,u,c)=>{const h=F.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&W1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.q(el(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const i=[n.popLast().toArray(),n.lastSegment(),Zh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zi(e).K(IDBKeyRange.bound(i,s,!0)).next(o=>{let a=un();for(const l of o){const u=this.Kn(F.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(u.key,u)}return a})}getAllFromCollectionGroup(e,n,r,i){let s=un();const o=K1(n,r),a=K1(n,Sn.max());return Zi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.Kn(F.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new g$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return H1(e).get("remoteDocumentGlobalKey").next(n=>(J(!!n),n))}qn(e,n){return H1(e).put("remoteDocumentGlobalKey",n)}Kn(e,n){if(n){const r=t$(this.wt,n);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return we.newInvalidDocument(e)}}function gx(t){return new m$(t)}class g$ extends mx{constructor(e,n){super(),this.zn=e,this.trackRemovals=n,this.Hn=new Wi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new ge((s,o)=>ie(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Hn.get(s);if(n.push(this.zn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=P1(this.zn.wt,o);i=i.add(s.path.popLast()),r+=ed(l)-a.size,n.push(this.zn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=P1(this.zn.wt,o.convertToNoDocument(X.min()));n.push(this.zn.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.zn.updateMetadata(e,r)),T.waitFor(n)}getFromCache(e,n){return this.zn.Gn(e,n).next(r=>(this.Hn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.zn.jn(e,n).next(({documents:r,Wn:i})=>(i.forEach((s,o)=>{this.Hn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function H1(t){return dt(t,"remoteDocumentGlobal")}function Zi(t){return dt(t,"remoteDocumentsV14")}function el(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function K1(t,e){const n=e.documentKey.path.toArray();return[t,Zh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function W1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ie(n[s],r[s]),i)return i;return i=ie(n.length,r.length),i||(i=ie(n[n.length-2],r[r.length-2]),i||ie(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(r!==null&&Rl(r.mutation,i,In.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=dr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=pl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=dr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=un();const o=Nl(),a=Nl();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ei)?s=s.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),Rl(c.mutation,u,c.mutation.getFieldMask(),Ae.now()))}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new y$(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Nl();let i=new Fe((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||In.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||se()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Wb();c.forEach(d=>{if(!s.has(d)){const f=Vb(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return T.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return F.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ov(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):T.resolve(dr());let a=-1,l=s;return o.next(u=>T.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?T.resolve():this.getBaseDocument(e,c,h).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,se())).next(c=>({batchId:a,changes:Kb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(r=>{let i=pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=pl();return this.indexManager.getCollectionParents(e,i).next(o=>T.forEach(o,a=>{const l=function(u,c){return new Zr(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,we.newInvalidDocument(u)))});let o=pl();return i.forEach((a,l)=>{const u=s.get(a);u!==void 0&&Rl(u.mutation,l,In.empty(),Ae.now()),Lv(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):T.resolve(we.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return T.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:lt(r.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(r){return{name:r.name,query:Vv(r.bundledQuery),readTime:lt(r.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(){this.overlays=new Fe(F.comparator),this.Xn=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const r=dr();return T.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ie(e,n,s)}),T.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Xn.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),T.resolve()}getOverlaysForCollection(e,n,r){const i=dr(),s=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return T.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=dr(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=dr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return T.resolve(a)}ie(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Bv(n,r));let s=this.Xn.get(n);s===void 0&&(s=se(),this.Xn.set(n,s)),this.Xn.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.Zn=new ge(rt.ts),this.es=new ge(rt.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new rt(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new F(new ue([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new F(new ue([])),r=new rt(n,e),i=new rt(n,e+1);let s=se();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return F.comparator(e.key,n.key)||ie(e.ls,n.ls)}static ns(e,n){return ie(e.ls,n.ls)||F.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new ge(rt.ts)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $v(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ds=this.ds.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ws(r),s=i<0?0:i;return T.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const a=this._s(o.ls);s.push(a)}),T.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(ie);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{r=r.add(a.ls)})}),T.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;F.isDocumentKey(s)||(s=s.child(""));const o=new rt(new F(s),0);let a=new ge(ie);return this.ds.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.ls)),!0)},o),T.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(r=>{const i=this._s(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){J(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ds;return T.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new rt(n,0),i=this.ds.firstAfterOrEqual(r);return T.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e){this.ps=e,this.docs=new Fe(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return T.resolve(r?r.document.mutableCopy():we.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():we.newInvalidDocument(i))}),T.resolve(r)}getAllFromCollection(e,n,r){let i=un();const s=new F(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Av(_b(l),r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return T.resolve(i)}getAllFromCollectionGroup(e,n,r,i){q()}Is(e,n){return T.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new k$(this)}getSize(e){return T.resolve(this.size)}}class k$ extends mx{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),T.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.persistence=e,this.Ts=new Wi(n=>Fs(n),Ku),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Es=0,this.As=new jv,this.targetCount=0,this.Rs=zs.An()}forEachTarget(e,n){return this.Ts.forEach((r,i)=>n(i)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),T.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new zs(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.vn(n),T.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),T.waitFor(s).next(()=>i)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return T.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),T.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),T.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),T.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return T.resolve(r)}containsKey(e,n){return T.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n){this.bs={},this.overlays={},this.Ps=new ln(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new E$(this),this.indexManager=new l$,this.remoteDocumentCache=function(r){return new I$(r)}(r=>this.referenceDelegate.Ss(r)),this.wt=new cx(n),this.Ds=new v$(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new w$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new _$(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);const i=new S$(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,n){return T.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class S$ extends kb{constructor(e){super(),this.currentSequenceNumber=e}}class Zd{constructor(e){this.persistence=e,this.ks=new jv,this.Os=null}static Ms(e){return new Zd(e)}get Fs(){if(this.Os)return this.Os;throw q()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),T.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),T.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Os=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Fs,r=>{const i=F.fromPath(r);return this.$s(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Os=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return T.or([()=>T.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.wt=e}O(e,n,r,i){const s=new Wd("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D1,{unique:!0}),a.createObjectStore("documentMutations")}(e),G1(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=T.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),G1(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").K().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D1,{unique:!0});const c=l.store("mutations"),h=u.map(d=>c.put(d));return T.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Bs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(o=o.next(()=>this.Us(s))),r<8&&i>=8&&(o=o.next(()=>this.qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ks(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:YF});l.createIndex("collectionPathOverlayIndex",XF,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",JF,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:UF});l.createIndex("documentKeyIndex",BF),l.createIndex("collectionGroupIndex",VF)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Qs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:KF}).createIndex("sequenceNumberIndex",WF,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:GF}).createIndex("documentKeyIndex",QF,{unique:!1})}(e))),o}Ls(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=ed(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next(i=>T.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",o).next(a=>T.forEach(a,l=>{J(l.userId===s.userId);const u=ss(this.wt,l);return dx(e,s.userId,u).next(()=>{})}))}))}Us(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new ue(o),u=function(c){return[0,Qt(c)]}(l);s.push(n.get(u).next(c=>c?T.resolve():(h=>n.put({targetId:0,path:Qt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>T.waitFor(s))})}qs(e,n){e.createObjectStore("collectionParents",{keyPath:HF});const r=n.store("collectionParents"),i=new zv,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Qt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new ue(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const c=fr(a);return s(c.popLast())}))}Ks(e){const n=e.store("targets");return n.J((r,i)=>{const s=ml(i),o=hx(this.wt,s);return n.put(o)})}Gs(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new F(ue.fromString(u.document.name).popFirst(5)):u.noDocument?F.fromSegments(u.noDocument.path):u.unknownDocument?F.fromSegments(u.unknownDocument.path):q()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>T.waitFor(i))}Qs(e,n){const r=n.store("mutations"),i=gx(this.wt),s=new vx(Zd.Ms,this.wt.ne);return r.K().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:se();ss(this.wt,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),T.forEach(a,(l,u)=>{const c=new st(u),h=Xd.se(this.wt,c),d=s.getIndexManager(c),f=Jd.se(c,this.wt,d,s.referenceDelegate);return new yx(i,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new xg(n,ln.ot),l).next()})})}}function G1(t){t.createObjectStore("targetDocuments",{keyPath:jF}).createIndex("documentTargetsIndex",qF,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zF,{unique:!0}),t.createObjectStore("targetGlobal")}const Op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qv{constructor(e,n,r,i,s,o,a,l,u,c,h=14){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=s,this.window=o,this.document=a,this.Ws=u,this.zs=c,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=d=>Promise.resolve(),!qv.V())throw new N(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new p$(this,i),this.ei=n+"main",this.wt=new cx(l),this.ni=new Yn(this.ei,this.Hs,new T$(this.wt)),this.Vs=new c$(this.referenceDelegate,this.wt),this.remoteDocumentCache=gx(this.wt),this.Ds=new n$,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,c===!1&&We("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new N(x.FAILED_PRECONDITION,Op);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ln(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){return this.ti=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(async()=>{this.started&&await this.ii()}))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(n=>{n||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(n=>this.isPrimary&&!n?this.li(e).next(()=>!1):!!n&&this.fi(e).next(()=>!0))).catch(e=>{if(Ki(e))return D("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return D("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return tl(e).get("owner").next(n=>T.resolve(this.di(n)))}_i(e){return Mc(e).delete(this.clientId)}async wi(){if(this.isPrimary&&!this.mi(this.Zs,18e5)){this.Zs=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=dt(n,"clientMetadata");return r.K().next(i=>{const s=this.gi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return T.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.si)for(const n of e)this.si.removeItem(this.yi(n.clientId))}}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?T.resolve(!0):tl(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)){if(this.di(n)&&this.networkEnabled)return!0;if(!this.di(n)){if(!n.allowTabSynchronization)throw new N(x.FAILED_PRECONDITION,Op);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mc(e).K().next(r=>this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&D("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),await this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new xg(e,ln.ot);return this.li(n).next(()=>this._i(n))}),this.ni.close(),this.Ai()}gi(e,n){return e.filter(r=>this.mi(r.updateTimeMs,n)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Mc(e).K().next(n=>this.gi(n,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,n){return Jd.se(e,this.wt,n,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new u$(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Xd.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,n,r){D("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.Hs)===15?e$:o===14?ux:o===13?lx:o===12?ZF:o===11?ax:void q();var o;let a;return this.ni.runTransaction(e,i,s,l=>(a=new xg(l,this.Ps?this.Ps.next():ln.ot),n==="readwrite-primary"?this.ai(a).next(u=>!!u||this.hi(a)).next(u=>{if(!u)throw We(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new N(x.FAILED_PRECONDITION,Ib);return r(a)}).next(u=>this.fi(a).next(()=>u)):this.bi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}bi(e){return tl(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)&&!this.di(n)&&!(this.zs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new N(x.FAILED_PRECONDITION,Op)})}fi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tl(e).put("owner",n)}static V(){return Yn.V()}li(e){const n=tl(e);return n.get("owner").next(r=>this.di(r)?(D("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):T.resolve())}mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(We(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground=this.document.visibilityState==="visible")}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Js=()=>{this.Ii(),eO()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var n;try{const r=((n=this.si)===null||n===void 0?void 0:n.getItem(this.yi(e)))!==null;return D("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return We("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){We("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tl(t){return dt(t,"owner")}function Mc(t){return dt(t,"clientMetadata")}function Hv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=i}static Vi(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Kv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ci(e,n).next(s=>s||this.xi(e,n,i,r)).next(s=>s||this.Ni(e,n))}Ci(e,n){return T.resolve(null)}xi(e,n,r,i){return cF(n)||i.isEqual(X.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(n,s);return this.Oi(n,o,r,i)?this.Ni(e,n):(_g()<=ce.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sg(n)),this.Mi(e,o,n,wb(i,-1)))})}ki(e,n){let r=new ge(Pb(e));return n.forEach((i,s)=>{Lv(e,s)&&(r=r.add(s))}),r}Oi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,n){return _g()<=ce.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",Sg(n)),this.Di.getDocumentsMatchingQuery(e,n,Sn.min())}Mi(e,n,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e,n,r,i){this.persistence=e,this.Fi=n,this.wt=i,this.$i=new Fe(ie),this.Bi=new Wi(s=>Fs(s),Ku),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yx(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function _x(t,e,n,r){return new b$(t,e,n,r)}async function Ix(t,e){const n=B(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=se();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ki:u,removedBatchIds:o,addedBatchIds:a}))})})}function x$(t,e){const n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=T.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(p=>{const v=l.docVersions.get(f);J(v!==null),p.version.compareTo(v)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=se();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kx(t){const e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function C$(t,e){const n=B(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Vs.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Vs.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(tt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(h,f),function(p,v,E){return p.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(d,f,c)&&a.push(n.Vs.updateTargetData(s,f))});let l=un(),u=se();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Ex(s,o,e.documentUpdates).next(c=>{l=c.Gi,u=c.Qi})),!r.isEqual(X.min())){const c=n.Vs.getLastRemoteSnapshotVersion(s).next(h=>n.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return T.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.$i=i,s))}function Ex(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=un();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(X.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Gi:o,Qi:i}})}function A$(t,e){const n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function la(t,e){const n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Vs.getTargetData(r,e).next(s=>s?(i=s,T.resolve(i)):n.Vs.allocateTargetId(r).next(o=>(i=new bi(e,o,0,r.currentSequenceNumber),n.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.$i.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}async function ua(t,e,n){const r=B(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ki(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}function td(t,e,n){const r=B(t);let i=X.min(),s=se();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=B(a),h=c.Bi.get(u);return h!==void 0?T.resolve(c.$i.get(h)):c.Vs.getTargetData(l,u)}(r,o,Un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:se())).next(a=>(bx(r,Db(e),a),{documents:a,ji:s})))}function Sx(t,e){const n=B(t),r=B(n.Vs),i=n.$i.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(o=>o?o.target:null))}function Tx(t,e){const n=B(t),r=n.Li.get(e)||X.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ui.getAllFromCollectionGroup(i,e,wb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(bx(n,e,i),i))}function bx(t,e,n){let r=X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Li.set(e,r)}async function R$(t,e,n,r){const i=B(t);let s=se(),o=un();for(const u of n){const c=e.Wi(u.metadata.name);u.document&&(s=s.add(c));const h=e.zi(u);h.setReadTime(e.Hi(u.metadata.readTime)),o=o.insert(c,h)}const a=i.Ui.newChangeBuffer({trackRemovals:!0}),l=await la(i,function(u){return Un(Ta(ue.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Ex(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Vs.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Vs.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.Gi,c.Qi)).next(()=>c.Gi)))}async function N$(t,e,n=se()){const r=await la(t,Un(Vv(e.bundledQuery))),i=B(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=lt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ds.saveNamedQuery(s,e);const a=r.withResumeToken(tt.EMPTY_BYTE_STRING,o);return i.$i=i.$i.insert(a.targetId,a),i.Vs.updateTargetData(s,a).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){return`firestore_clients_${t}_${e}`}function Y1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Lp(t,e){return`firestore_targets_${t}_${e}`}class nd{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ji(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new N(i.error.code,i.error.message))),o?new nd(e,n,i.state,s):(We("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ji(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new N(r.error.code,r.error.message))),s?new Dl(e,r.state,i):(We("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ji(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Yd();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Tb(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new rd(e,s):(We("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Wv{constructor(e,n){this.clientId=e,this.onlineState=n}static Ji(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Wv(n.clientId,n.onlineState):(We("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Cg{constructor(){this.activeTargetIds=Yd()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mp{constructor(e,n,r,i,s){this.window=e,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Fe(ie),this.started=!1,this.ir=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=Q1(this.persistenceKey,this.tr),this.ur=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Cg),this.cr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.lr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.dr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ri();for(const r of e){if(r===this.tr)continue;const i=this.getItem(Q1(this.persistenceKey,r));if(i){const s=rd.Ji(r,i);s&&(this.sr=this.sr.insert(s.clientId,s))}}this._r();const n=this.storage.getItem(this.lr);if(n){const r=this.wr(n);r&&this.mr(r)}for(const r of this.ir)this.nr(r);this.ir=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let n=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,n,r){this.yr(e,n,r),this.pr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Lp(this.persistenceKey,e));if(r){const i=Dl.Ji(e,r);i&&(n=i.state)}}return this.Ir.Xi(e),this._r(),n}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lp(this.persistenceKey,e))}updateQueryState(e,n,r){this.Tr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return D("SharedClientState","READ",e,n),n}setItem(e,n){D("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){D("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){const n=e;if(n.storageArea===this.storage){if(D("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void We("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.cr.test(n.key)){if(n.newValue==null){const r=this.Rr(n.key);return this.br(r,null)}{const r=this.Pr(n.key,n.newValue);if(r)return this.br(r.clientId,r)}}else if(this.ar.test(n.key)){if(n.newValue!==null){const r=this.vr(n.key,n.newValue);if(r)return this.Vr(r)}}else if(this.hr.test(n.key)){if(n.newValue!==null){const r=this.Sr(n.key,n.newValue);if(r)return this.Dr(r)}}else if(n.key===this.lr){if(n.newValue!==null){const r=this.wr(n.newValue);if(r)return this.mr(r)}}else if(n.key===this.ur){const r=function(i){let s=ln.ot;if(i!=null)try{const o=JSON.parse(i);J(typeof o=="number"),s=o}catch(o){We("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==ln.ot&&this.sequenceNumberHandler(r)}else if(n.key===this.dr){const r=this.Cr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Nr(i)))}}}else this.ir.push(n)})}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,n,r){const i=new nd(this.currentUser,e,n,r),s=Y1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const n=Y1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Er(e){const n={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(n))}Tr(e,n,r){const i=Lp(this.persistenceKey,e),s=new Dl(e,n,r);this.setItem(i,s.Yi())}Ar(e){const n=JSON.stringify(Array.from(e));this.setItem(this.dr,n)}Rr(e){const n=this.cr.exec(e);return n?n[1]:null}Pr(e,n){const r=this.Rr(e);return rd.Ji(r,n)}vr(e,n){const r=this.ar.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return nd.Ji(new st(s),i,n)}Sr(e,n){const r=this.hr.exec(e),i=Number(r[1]);return Dl.Ji(i,n)}wr(e){return Wv.Ji(e)}Cr(e){return JSON.parse(e)}async Vr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.kr(e.batchId,e.state,e.error);D("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,n){const r=n?this.sr.insert(e,n):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Mr(o,a).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let n=Yd();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class xx{constructor(){this.Fr=new Cg,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Cg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,i,s){const o=this.oo(e,n);D("RestConnection","Sending: ",o,r);const a={};return this.uo(a,i,s),this.co(e,o,a,r).then(l=>(D("RestConnection","Received: ",l),l),l=>{throw cu("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}ao(e,n,r,i,s){return this.ro(e,n,r,i,s)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,n){const r=P$[e];return`${this.so}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,i){return new Promise((s,o)=>{const a=new DM;a.listenOnce(AM.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Dp.NO_ERROR:const u=a.getResponseJson();D("Connection","XHR received:",JSON.stringify(u)),s(u);break;case Dp.TIMEOUT:D("Connection",'RPC "'+e+'" timed out'),o(new N(x.DEADLINE_EXCEEDED,"Request time out"));break;case Dp.HTTP_ERROR:const c=a.getStatus();if(D("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(p)>=0?p:x.UNKNOWN}(h.status);o(new N(d,h.message))}else o(new N(x.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new N(x.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{D("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}ho(e,n,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xM(),o=CM(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new NM({})),this.uo(a.initMessageHeaders,n,r),nT()||Nd()||JP()||ev()||ZP()||Zy()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=i.join("");D("Connection","Creating WebChannel: "+l,a);const u=s.createWebChannel(l,a);let c=!1,h=!1;const d=new O$({jr:p=>{h?D("Connection","Not sending because WebChannel is closed:",p):(c||(D("Connection","Opening WebChannel transport."),u.open(),c=!0),D("Connection","WebChannel sending:",p),u.send(p))},Wr:()=>u.close()}),f=(p,v,E)=>{p.listen(v,m=>{try{E(m)}catch(y){setTimeout(()=>{throw y},0)}})};return f(u,Nc.EventType.OPEN,()=>{h||D("Connection","WebChannel transport opened.")}),f(u,Nc.EventType.CLOSE,()=>{h||(h=!0,D("Connection","WebChannel transport closed"),d.eo())}),f(u,Nc.EventType.ERROR,p=>{h||(h=!0,cu("Connection","WebChannel transport errored:",p),d.eo(new N(x.UNAVAILABLE,"The operation could not be completed")))}),f(u,Nc.EventType.MESSAGE,p=>{var v;if(!h){const E=p.data[0];J(!!E);const m=E,y=m.error||((v=m[0])===null||v===void 0?void 0:v.error);if(y){D("Connection","WebChannel received error:",y);const g=y.status;let S=function(k){const C=je[k];if(C!==void 0)return qb(C)}(g),b=y.message;S===void 0&&(S=x.INTERNAL,b="Unknown error status: "+g+" with message "+y.message),h=!0,d.eo(new N(S,b)),u.close()}else D("Connection","WebChannel received:",E),d.no(E)}}),f(o,RM.STAT_EVENT,p=>{p.stat===l1.PROXY?D("Connection","Detected buffering proxy"):p.stat===l1.NOPROXY&&D("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Zr()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){return typeof window!="undefined"?window:null}function oh(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t){return new bF(t,!0)}class Gv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,i,s,o,a,l){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Gv(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}async Oo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(We(n.toString()),We("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===n&&this.Uo(r,i)},r=>{e(()=>{const i=new N(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M$ extends Ax{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.wt=s}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=AF(this.wt,e),r=function(i){if(!("targetChange"in i))return X.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?lt(s.readTime):X.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=vu(this.wt),n.addTarget=function(i,s){let o;const a=s.target;return o=Xh(a)?{documents:tx(i,a)}:{query:nx(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Yb(i,s.resumeToken):s.snapshotVersion.compareTo(X.min())>0&&(o.readTime=gu(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=NF(this.wt,e);r&&(n.labels=r),this.Mo(n)}jo(e){const n={};n.database=vu(this.wt),n.removeTarget=e,this.Mo(n)}}class F$ extends Ax{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=RF(e.writeResults,e.commitTime),r=lt(e.commitTime);return this.listener.Jo(r,n)}return J(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=vu(this.wt),this.Mo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wu(this.wt,r))};this.Mo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $$ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new N(x.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new N(x.UNKNOWN,i.toString())})}ao(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ao(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new N(x.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class U${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(We(n),this.su=!1):D("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(o=>{r.enqueueAndForget(async()=>{Gi(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=B(a);l.lu.add(4),await Ca(l),l._u.set("Unknown"),l.lu.delete(4),await Ju(l)}(this))})}),this._u=new U$(r,i)}}async function Ju(t){if(Gi(t))for(const e of t.fu)await e(!0)}async function Ca(t){for(const e of t.fu)await e(!1)}function ef(t,e){const n=B(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),Xv(n)?Yv(n):Ra(n).Co()&&Qv(n,e))}function _u(t,e){const n=B(t),r=Ra(n);n.hu.delete(e),r.Co()&&Rx(n,e),n.hu.size===0&&(r.Co()?r.ko():Gi(n)&&n._u.set("Unknown"))}function Qv(t,e){t.wu.Nt(e.targetId),Ra(t).Qo(e)}function Rx(t,e){t.wu.Nt(e),Ra(t).jo(e)}function Yv(t){t.wu=new EF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),Ra(t).start(),t._u.iu()}function Xv(t){return Gi(t)&&!Ra(t).Do()&&t.hu.size>0}function Gi(t){return B(t).lu.size===0}function Nx(t){t.wu=void 0}async function V$(t){t.hu.forEach((e,n)=>{Qv(t,e)})}async function z$(t,e){Nx(t),Xv(t)?(t._u.uu(e),Yv(t)):t._u.set("Unknown")}async function j$(t,e,n){if(t._u.set("Online"),e instanceof Qb&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.hu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.hu.delete(o),r.wu.removeTarget(o))}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await id(t,r)}else if(e instanceof ih?t.wu.Ut(e):e instanceof Gb?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(X.min()))try{const r=await kx(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.hu.get(l);u&&i.hu.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.hu.get(a);if(!l)return;i.hu.set(a,l.withResumeToken(tt.EMPTY_BYTE_STRING,l.snapshotVersion)),Rx(i,a);const u=new bi(l.target,a,1,l.sequenceNumber);Qv(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){D("RemoteStore","Failed to raise snapshot:",r),await id(t,r)}}async function id(t,e,n){if(!Ki(e))throw e;t.lu.add(1),await Ca(t),t._u.set("Offline"),n||(n=()=>kx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await Ju(t)})}function Dx(t,e){return e().catch(n=>id(t,n,e))}async function Aa(t){const e=B(t),n=Mi(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;q$(e);)try{const i=await A$(e.localStore,r);if(i===null){e.au.length===0&&n.ko();break}r=i.batchId,H$(e,i)}catch(i){await id(e,i)}Px(e)&&Ox(e)}function q$(t){return Gi(t)&&t.au.length<10}function H$(t,e){t.au.push(e);const n=Mi(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function Px(t){return Gi(t)&&!Mi(t).Do()&&t.au.length>0}function Ox(t){Mi(t).start()}async function K$(t){Mi(t).Xo()}async function W$(t){const e=Mi(t);for(const n of t.au)e.Ho(n.mutations)}async function G$(t,e,n){const r=t.au.shift(),i=Uv.from(r,e,n);await Dx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Aa(t)}async function Q$(t,e){e&&Mi(t).zo&&await async function(n,r){if(i=r.code,jb(i)&&i!==x.ABORTED){const s=n.au.shift();Mi(n).No(),await Dx(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Aa(n)}var i}(t,e),Px(t)&&Ox(t)}async function J1(t,e){const n=B(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=Gi(n);n.lu.add(3),await Ca(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await Ju(n)}async function Ag(t,e){const n=B(t);e?(n.lu.delete(2),await Ju(n)):e||(n.lu.add(2),await Ca(n),n._u.set("Unknown"))}function Ra(t){return t.mu||(t.mu=function(e,n,r){const i=B(e);return i.tu(),new M$(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:V$.bind(null,t),Jr:z$.bind(null,t),Go:j$.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),Xv(t)?Yv(t):t._u.set("Unknown")):(await t.mu.stop(),Nx(t))})),t.mu}function Mi(t){return t.gu||(t.gu=function(e,n,r){const i=B(e);return i.tu(),new F$(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:K$.bind(null,t),Jr:Q$.bind(null,t),Yo:W$.bind(null,t),Jo:G$.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await Aa(t)):(await t.gu.stop(),t.au.length>0&&(D("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new at,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Jv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new N(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Na(t,e){if(We("AsyncQueue",`${e}: ${t}`),Ki(t))return new N(x.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=pl(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.yu=new Fe(F.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?e.type!==0&&r.type===3?this.yu=this.yu.insert(n,e):e.type===3&&r.type!==1?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.yu=this.yu.remove(n):e.type===1&&r.type===2?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):q():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class ca{constructor(e,n,r,i,s,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new ca(e,n,qo.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(){this.Iu=void 0,this.listeners=[]}}class X${constructor(){this.queries=new Wi(e=>Nb(e),Wu),this.onlineState="Unknown",this.Tu=new Set}}async function Zv(t,e){const n=B(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Y$),i)try{s.Iu=await n.onListen(r)}catch(o){const a=Na(o,`Initialization of query '${Sg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&tw(n)}async function ew(t,e){const n=B(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function J$(t,e){const n=B(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Au(i)&&(r=!0);o.Iu=i}}r&&tw(n)}function Z$(t,e,n){const r=B(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function tw(t){t.Tu.forEach(e=>{e.next()})}class nw{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Du||!r)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Su(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.payload=e,this.byteLength=n}Cu(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.wt=e}Wi(e){return yr(this.wt,e)}zi(e){return e.metadata.exists?ex(this.wt,e.document,!1):we.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return lt(e)}}class t2{constructor(e,n,r){this.xu=e,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lx(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const r=ue.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ku(e){const n=new Map,r=new eI(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||se()).add(s);n.set(o,a)}}return n}async complete(){const e=await R$(this.localStore,new eI(this.wt),this.documents,this.xu.id),n=this.ku(this.documents);for(const r of this.queries)await N$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:e}}}function Lx(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.key=e}}class Fx{constructor(e){this.key=e}}class $x{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=se(),this.mutatedKeys=se(),this.Lu=Pb(e),this.Uu=new qo(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new Z1,i=n?n.Uu:this.Uu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=Lv(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;d&&f?d.data.isEqual(f.data)?p!==v&&(r.track({type:3,doc:f}),E=!0):this.Qu(d,f)||(r.track({type:2,doc:f}),E=!0,(l&&this.Lu(f,l)>0||u&&this.Lu(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),E=!0):d&&!f&&(r.track({type:1,doc:d}),E=!0,(l||u)&&(a=!0)),E&&(f?(o=o.add(f),s=v?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Oi:a,mutatedKeys:s}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((u,c)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return f(h)-f(d)}(u.type,c.type)||this.Lu(u.doc,c.doc)),this.ju(r);const o=n?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,l=a!==this.$u;return this.$u=a,s.length!==0||l?{snapshot:new ca(this.query,e.Uu,i,s,e.mutatedKeys,a===0,l,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Z1,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=se(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new Fx(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new Mx(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=se();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return ca.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class n2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class r2{constructor(e){this.key=e,this.Xu=!1}}class i2{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Wi(a=>Nb(a),Wu),this.ec=new Map,this.nc=new Set,this.sc=new Fe(F.comparator),this.ic=new Map,this.rc=new jv,this.oc={},this.uc=new Map,this.cc=zs.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function s2(t,e){const n=aw(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=await la(n.localStore,Un(e));n.isPrimaryClient&&ef(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await rw(n,e,r,a==="current")}return i}async function rw(t,e,n,r){t.hc=(c,h,d)=>async function(f,p,v,E){let m=p.view.Ku(v);m.Oi&&(m=await td(f.localStore,p.query,!1).then(({documents:S})=>p.view.Ku(S,m)));const y=E&&E.targetChanges.get(p.targetId),g=p.view.applyChanges(m,f.isPrimaryClient,y);return Rg(f,p.targetId,g.zu),g.snapshot}(t,c,h,d);const i=await td(t.localStore,e,!0),s=new $x(e,i.ji),o=s.Ku(i.documents),a=Yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=s.applyChanges(o,t.isPrimaryClient,a);Rg(t,n,l.zu);const u=new n2(e,n,s);return t.tc.set(e,u),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),l.snapshot}async function o2(t,e){const n=B(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(s=>!Wu(s,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ua(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_u(n.remoteStore,r.targetId),ha(n,r.targetId)}).catch(Hi)):(ha(n,r.targetId),await ua(n.localStore,r.targetId,!0))}async function a2(t,e,n){const r=lw(t);try{const i=await function(s,o){const a=B(s),l=Ae.now(),u=o.reduce((d,f)=>d.add(f.key),se());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=un(),p=se();return a.Ui.getEntries(d,u).next(v=>{f=v,f.forEach((E,m)=>{m.isValidDocument()||(p=p.add(E))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(v=>{c=v;const E=[];for(const m of o){const y=yF(m,c.get(m.key).overlayedDocument);y!=null&&E.push(new ei(m.key,y,xb(y.value.mapValue),De.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,E,o)}).next(v=>{h=v;const E=v.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(d,v.batchId,E)})}).then(()=>({batchId:h.batchId,changes:Kb(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.oc[s.currentUser.toKey()];l||(l=new Fe(ie)),l=l.insert(o,a),s.oc[s.currentUser.toKey()]=l}(r,i.batchId,n),await ti(r,i.changes),await Aa(r.remoteStore)}catch(i){const s=Na(i,"Failed to persist write");n.reject(s)}}async function Ux(t,e){const n=B(t);try{const r=await C$(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ic.get(s);o&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?J(o.Xu):i.removedDocuments.size>0&&(J(o.Xu),o.Xu=!1))}),await ti(n,r,e)}catch(r){await Hi(r)}}function tI(t,e,n){const r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=B(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Eu(o)&&(l=!0)}),l&&tw(a)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function l2(t,e,n){const r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new Fe(F.comparator);o=o.insert(s,we.newNoDocument(s,X.min()));const a=se().add(s),l=new Qu(X.min(),new Map,new ge(ie),o,a);await Ux(r,l),r.sc=r.sc.remove(s),r.ic.delete(e),ow(r)}else await ua(r.localStore,e,!1).then(()=>ha(r,e,n)).catch(Hi)}async function u2(t,e){const n=B(t),r=e.batch.batchId;try{const i=await x$(n.localStore,e);sw(n,r,null),iw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ti(n,i)}catch(i){await Hi(i)}}async function c2(t,e,n){const r=B(t);try{const i=await function(s,o){const a=B(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(J(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);sw(r,e,n),iw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ti(r,i)}catch(i){await Hi(i)}}async function h2(t,e){const n=B(t);Gi(n.remoteStore)||D("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=B(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.uc.get(r)||[];i.push(e),n.uc.set(r,i)}catch(r){const i=Na(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function iw(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function sw(t,e,n){const r=B(t);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function ha(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||Bx(t,r)})}function Bx(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);n!==null&&(_u(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),ow(t))}function Rg(t,e,n){for(const r of n)r instanceof Mx?(t.rc.addReference(r.key,e),d2(t,r)):r instanceof Fx?(D("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||Bx(t,r.key)):q()}function d2(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(D("SyncEngine","New document in limbo: "+n),t.nc.add(r),ow(t))}function ow(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new F(ue.fromString(e)),r=t.cc.next();t.ic.set(r,new r2(n)),t.sc=t.sc.insert(n,r),ef(t.remoteStore,new bi(Un(Ta(n.path)),r,2,ln.ot))}}async function ti(t,e,n){const r=B(t),i=[],s=[],o=[];r.tc.isEmpty()||(r.tc.forEach((a,l)=>{o.push(r.hc(l,e,n).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),i.push(u);const c=Kv.Vi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Zu.Go(i),await async function(a,l){const u=B(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>T.forEach(l,h=>T.forEach(h.Pi,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>T.forEach(h.vi,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!Ki(c))throw c;D("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.$i.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);u.$i=u.$i.insert(h,p)}}}(r.localStore,s))}async function f2(t,e){const n=B(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=await Ix(n.localStore,e);n.currentUser=e,function(i,s){i.uc.forEach(o=>{o.forEach(a=>{a.reject(new N(x.CANCELLED,s))})}),i.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ti(n,r.Ki)}}function p2(t,e){const n=B(t),r=n.ic.get(e);if(r&&r.Xu)return se().add(r.key);{let i=se();const s=n.ec.get(e);if(!s)return i;for(const o of s){const a=n.tc.get(o);i=i.unionWith(a.view.qu)}return i}}async function m2(t,e){const n=B(t),r=await td(n.localStore,e.query,!0),i=e.view.Ju(r);return n.isPrimaryClient&&Rg(n,e.targetId,i.zu),i}async function g2(t,e){const n=B(t);return Tx(n.localStore,e).then(r=>ti(n,r))}async function y2(t,e,n,r){const i=B(t),s=await function(o,a){const l=B(o),u=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",c=>u.yn(c,a).next(h=>h?l.localDocuments.getDocuments(c,h):T.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Aa(i.remoteStore):n==="acknowledged"||n==="rejected"?(sw(i,e,r||null),iw(i,e),function(o,a){B(B(o).mutationQueue).In(a)}(i.localStore,e)):q(),await ti(i,s)):D("SyncEngine","Cannot apply mutation batch with id: "+e)}async function v2(t,e){const n=B(t);if(aw(n),lw(n),e===!0&&n.ac!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await nI(n,r.toArray());n.ac=!0,await Ag(n.remoteStore,!0);for(const s of i)ef(n.remoteStore,s)}else if(e===!1&&n.ac!==!1){const r=[];let i=Promise.resolve();n.ec.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ha(n,o),ua(n.localStore,o,!0))),_u(n.remoteStore,o)}),await i,await nI(n,r),function(s){const o=B(s);o.ic.forEach((a,l)=>{_u(o.remoteStore,l)}),o.rc.cs(),o.ic=new Map,o.sc=new Fe(F.comparator)}(n),n.ac=!1,await Ag(n.remoteStore,!1)}}async function nI(t,e,n){const r=B(t),i=[],s=[];for(const o of e){let a;const l=r.ec.get(o);if(l&&l.length!==0){a=await la(r.localStore,Un(l[0]));for(const u of l){const c=r.tc.get(u),h=await m2(r,c);h.snapshot&&s.push(h.snapshot)}}else{const u=await Sx(r.localStore,o);a=await la(r.localStore,u),await rw(r,Vx(u),o,!1)}i.push(a)}return r.Zu.Go(s),i}function Vx(t){return Ab(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function w2(t){const e=B(t);return B(B(e.localStore).persistence).Ri()}async function _2(t,e,n,r){const i=B(t);if(i.ac)return void D("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Tx(i.localStore,Db(s[0])),a=Qu.createSynthesizedRemoteEventForCurrentChange(e,n==="current");await ti(i,o,a);break}case"rejected":await ua(i.localStore,e,!0),ha(i,e,r);break;default:q()}}async function I2(t,e,n){const r=aw(t);if(r.ac){for(const i of e){if(r.ec.has(i)){D("SyncEngine","Adding an already active target "+i);continue}const s=await Sx(r.localStore,i),o=await la(r.localStore,s);await rw(r,Vx(s),o.targetId,!1),ef(r.remoteStore,o)}for(const i of n)r.ec.has(i)&&await ua(r.localStore,i,!1).then(()=>{_u(r.remoteStore,i),ha(r,i)}).catch(Hi)}}function aw(t){const e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ux.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l2.bind(null,e),e.Zu.Go=J$.bind(null,e.eventManager),e.Zu.lc=Z$.bind(null,e.eventManager),e}function lw(t){const e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c2.bind(null,e),e}function k2(t,e,n){const r=B(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(h,d){const f=B(h),p=lt(d.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",v=>f.Ds.getBundleMetadata(v,d.id)).then(v=>!!v&&v.createTime.compareTo(p)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(Lx(a));const l=new t2(a,i.localStore,s.wt);let u=await s.fc();for(;u;){const h=await l.Nu(u);h&&o._updateProgress(h),u=await s.fc()}const c=await l.complete();return await ti(i,c.Mu,void 0),await function(h,d){const f=B(h);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Ds.saveBundleMetadata(p,d))}(i.localStore,a),o._completeWith(c.progress),Promise.resolve(c.Ou)}catch(a){return cu("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class zx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=Xu(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return _x(this.persistence,new wx,e.initialUser,this.wt)}_c(e){return new vx(Zd.Ms,this.wt)}dc(e){return new xx}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jx extends zx{constructor(e,n,r){super(),this.yc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.yc.initialize(this,e),await lw(this.yc.syncEngine),await Aa(this.yc.remoteStore),await this.persistence.ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wc(e){return _x(this.persistence,new wx,e.initialUser,this.wt)}mc(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new d$(r,e.asyncQueue,n)}gc(e,n){const r=new GM(n,this.persistence);return new WM(e.asyncQueue,r)}_c(e){const n=Hv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new qv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Cx(),oh(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new xx}}class E2 extends jx{constructor(e,n){super(e,n,!1),this.yc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.yc.syncEngine;this.sharedClientState instanceof Mp&&(this.sharedClientState.syncEngine={kr:y2.bind(null,n),Or:_2.bind(null,n),Mr:I2.bind(null,n),Ri:w2.bind(null,n),Nr:g2.bind(null,n)},await this.sharedClientState.start()),await this.persistence.ci(async r=>{await v2(this.yc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}dc(e){const n=Cx();if(!Mp.V(n))throw new N(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Hv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class uw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f2.bind(null,this.syncEngine),await Ag(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new X$}createDatastore(e){const n=Xu(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new L$(i));var i;return function(s,o,a,l){return new $$(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>tI(this.syncEngine,a,0),o=X1.V()?new X1:new D$,new B$(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new i2(r,i,s,o,a,l);return u&&(c.ac=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=B(e);D("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await Ca(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.Ec=e,this.wt=n,this.metadata=new at,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}async getMetadata(){return this.metadata.promise}async fc(){return await this.getMetadata(),this.Rc()}async Rc(){const e=await this.bc();if(e===null)return null;const n=this.Ac.decode(e),r=Number(n);isNaN(r)&&this.Pc(`length string (${n}) is not valid number`);const i=await this.vc(r);return new e2(JSON.parse(i),e.length+r)}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async bc(){for(;this.Vc()<0&&!await this.Sc(););if(this.buffer.length===0)return null;const e=this.Vc();e<0&&this.Pc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async vc(e){for(;this.buffer.length<e;)await this.Sc()&&this.Pc("Reached the end of bundle when more is expected.");const n=this.Ac.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}async Sc(){const e=await this.Ec.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new N(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=B(r),o=vu(s.wt)+"/documents",a={documents:i.map(h=>yu(s.wt,h))},l=await s.ao("BatchGetDocuments",o,a),u=new Map;l.forEach(h=>{const d=CF(s.wt,h);u.set(d.key.toString(),d)});const c=[];return i.forEach(h=>{const d=u.get(h.toString());J(!!d),c.push(d)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=F.fromPath(r);this.mutations.push(new Mv(i,this.precondition(i)))}),await async function(n,r){const i=B(n),s=vu(i.wt)+"/documents",o={writes:r.map(a=>wu(i.wt,a))};await i.ro("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw q();n=X.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new N(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?De.updateTime(n):De.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(X.min()))throw new N(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return De.updateTime(n)}return De.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new Gv(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){this.So.Io(async()=>{const e=new T2(this.datastore),n=this.xc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Nc(i)}))}).catch(r=>{this.Nc(r)})})}xc(e){try{const n=this.updateFunction(e);return!Hu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||!jb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=gb.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{D("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new at;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Na(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qx(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ix(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function Hx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cw(t);D("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>J1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>J1(e.remoteStore,s)),t.onlineComponents=e}async function cw(t){return t.offlineComponents||(D("FirestoreClient","Using default OfflineComponentProvider"),await qx(t,new zx)),t.offlineComponents}async function nf(t){return t.onlineComponents||(D("FirestoreClient","Using default OnlineComponentProvider"),await Hx(t,new uw)),t.onlineComponents}function Kx(t){return cw(t).then(e=>e.persistence)}function hw(t){return cw(t).then(e=>e.localStore)}function Wx(t){return nf(t).then(e=>e.remoteStore)}function dw(t){return nf(t).then(e=>e.syncEngine)}async function da(t){const e=await nf(t),n=e.eventManager;return n.onListen=s2.bind(null,e.syncEngine),n.onUnlisten=o2.bind(null,e.syncEngine),n}function C2(t){return t.asyncQueue.enqueue(async()=>{const e=await Kx(t),n=await Wx(t);return e.setNetworkEnabled(!0),function(r){const i=B(r);return i.lu.delete(0),Ju(i)}(n)})}function A2(t){return t.asyncQueue.enqueue(async()=>{const e=await Kx(t),n=await Wx(t);return e.setNetworkEnabled(!1),async function(r){const i=B(r);i.lu.add(0),await Ca(i),i._u.set("Offline")}(n)})}function R2(t,e){const n=new at;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const u=B(a);return u.persistence.runTransaction("read document","readonly",c=>u.localDocuments.getDocument(c,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new N(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Na(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await hw(t),e,n)),n.promise}function Gx(t,e,n={}){const r=new at;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new tf({next:h=>{s.enqueueAndForget(()=>ew(i,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new N(x.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new N(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new nw(Ta(o.path),u,{includeMetadataChanges:!0,Du:!0});return Zv(i,c)}(await da(t),t.asyncQueue,e,n,r)),r.promise}function N2(t,e){const n=new at;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await td(r,i,!0),a=new $x(i,o.ji),l=a.Ku(o.documents),u=a.applyChanges(l,!1);s.resolve(u.snapshot)}catch(o){const a=Na(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await hw(t),e,n)),n.promise}function Qx(t,e,n={}){const r=new at;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new tf({next:h=>{s.enqueueAndForget(()=>ew(i,c)),h.fromCache&&a.source==="server"?l.reject(new N(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new nw(o,u,{includeMetadataChanges:!0,Du:!0});return Zv(i,c)}(await da(t),t.asyncQueue,e,n,r)),r.promise}function D2(t,e){const n=new tf(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){B(r).Tu.add(i),i.next()}(await da(t),n)),()=>{n.Tc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){B(r).Tu.delete(i)}(await da(t),n))}}function P2(t,e,n){const r=new at;return t.asyncQueue.enqueueAndForget(async()=>{const i=await function(s){return nf(s).then(o=>o.datastore)}(t);new b2(t.asyncQueue,i,n,e,r).run()}),r.promise}function O2(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(l,u){return new S2(l,u)}(function(l,u){if(l instanceof Uint8Array)return rI(l,u);if(l instanceof ArrayBuffer)return rI(new Uint8Array(l),u);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Xu(e));t.asyncQueue.enqueueAndForget(async()=>{k2(await dw(t),i,r)})}function L2(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=B(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(await hw(t),e))}const iI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e,n){if(!n)throw new N(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yx(t,e,n,r){if(e===!0&&r===!0)throw new N(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sI(t){if(!F.isDocumentKey(t))throw new N(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oI(t){if(F.isDocumentKey(t))throw new N(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function de(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new N(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(t);throw new N(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Xx(t,e){if(e<=0)throw new N(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new N(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new N(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Yx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aI({}),this._settingsFrozen=!1,e instanceof Qr?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new N(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(i.options.projectId)}(e))}get app(){if(!this._app)throw new N(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new N(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aI(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new LM;switch(n.type){case"gapi":const r=n.client;return J(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new UM(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new N(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=iI.get(e);n&&(D("ComponentProvider","Removing Datastore"),iI.delete(e),n.terminate())}(this),Promise.resolve()}}function M2(t,e,n,r={}){var i;const s=(t=de(t,Zu))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&cu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=st.MOCK_USER;else{o=tT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new N(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new st(l)}t._authCredentials=new MM(new mb(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Te(this.firestore,e,this._key)}}class Ot{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ot(this.firestore,e,this._query)}}class vr extends Ot{constructor(e,n,r){super(e,n,Ta(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Te(this.firestore,null,new F(e))}withConverter(e){return new vr(this.firestore,e,this._path)}}function Jx(t,e,...n){if(t=V(t),fw("collection","path",e),t instanceof Zu){const r=ue.fromString(e,...n);return oI(r),new vr(t,null,r)}{if(!(t instanceof Te||t instanceof vr))throw new N(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return oI(r),new vr(t.firestore,null,r)}}function F2(t,e){if(t=de(t,Zu),fw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new N(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ot(t,null,function(n){return new Zr(ue.emptyPath(),n)}(e))}function sd(t,e,...n){if(t=V(t),arguments.length===1&&(e=gb.I()),fw("doc","path",e),t instanceof Zu){const r=ue.fromString(e,...n);return sI(r),new Te(t,null,new F(r))}{if(!(t instanceof Te||t instanceof vr))throw new N(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return sI(r),new Te(t.firestore,t instanceof vr?t.converter:null,new F(r))}}function Zx(t,e){return t=V(t),e=V(e),(t instanceof Te||t instanceof vr)&&(e instanceof Te||e instanceof vr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function pw(t,e){return t=V(t),e=V(e),t instanceof Ot&&e instanceof Ot&&t.firestore===e.firestore&&Wu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Gv(this,"async_queue_retry"),this.Kc=()=>{const n=oh();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=oh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=oh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new at;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}async jc(){if(this.Mc.length!==0){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(e){if(!Ki(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.Mc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{this.Bc=r,this.Lc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw We("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Lc=!1,r))));return this.Oc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=Jv.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&q()}verifyOperationInProgress(){}async zc(){let e;do e=this.Oc,await e;while(e!==this.Oc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function Ng(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class U2{constructor(){this._progressObserver={},this._taskCompletionResolver=new at,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=-1;class $e extends Zu{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new $2,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||eC(this),this._firestoreClient.terminate()}}function ft(t){return t._firestoreClient||eC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eC(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new XM(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new x2(t._authCredentials,t._appCheckCredentials,t._queue,r)}function V2(t,e){nC(t=de(t,$e));const n=ft(t),r=t._freezeSettings(),i=new uw;return tC(n,i,new jx(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function z2(t){nC(t=de(t,$e));const e=ft(t),n=t._freezeSettings(),r=new uw;return tC(e,r,new E2(r,n.cacheSizeBytes))}function tC(t,e,n){const r=new at;return t.asyncQueue.enqueue(async()=>{try{await qx(t,n),await Hx(t,e),r.resolve()}catch(i){if(!function(s){return s.name==="FirebaseError"?s.code===x.FAILED_PRECONDITION||s.code===x.UNIMPLEMENTED:typeof DOMException!="undefined"&&s instanceof DOMException?s.code===22||s.code===20||s.code===11:!0}(i))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function j2(t){if(t._initialized&&!t._terminated)throw new N(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new at;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Yn.V())return Promise.resolve();const r=n+"main";await Yn.delete(r)}(Hv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function q2(t){return function(e){const n=new at;return e.asyncQueue.enqueueAndForget(async()=>h2(await dw(e),n)),n.promise}(ft(t=de(t,$e)))}function H2(t){return C2(ft(t=de(t,$e)))}function K2(t){return A2(ft(t=de(t,$e)))}function W2(t,e){const n=ft(t=de(t,$e)),r=new U2;return O2(n,t._databaseId,e,r),r}function G2(t,e){return L2(ft(t=de(t,$e)),e).then(n=>n?new Ot(t,null,n.query):null)}function nC(t){if(t._initialized||t._terminated)throw new N(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new N(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(tt.fromBase64String(e))}catch(n){throw new N(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Er(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new N(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new N(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=/^__.*__$/;class Y2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new ba(e,this.data,n,this.fieldTransforms)}}class rC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}class of{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return od(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(iC(this.Zc)&&Q2.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class X2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||Xu(e)}aa(e,n,r,i=!1){return new of({Zc:e,methodName:n,ca:r,path:ze.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function no(t){const e=t._freezeSettings(),n=Xu(t._databaseId);return new X2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function af(t,e,n,r,i,s={}){const o=t.aa(s.merge||s.mergeFields?2:0,e,n,i);vw("Data must be an object, but it was:",o,r);const a=aC(r,o);let l,u;if(s.merge)l=new In(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=Dg(e,h,n);if(!o.contains(d))throw new N(x.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);uC(c,d)||c.push(d)}l=new In(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new Y2(new vt(a),l,u)}class ec extends to{_toFieldTransform(e){if(e.Zc!==2)throw e.Zc===1?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ec}}function sC(t,e,n){return new of({Zc:3,ca:e.settings.ca,methodName:t._methodName,na:n},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class mw extends to{_toFieldTransform(e){return new Gu(e.path,new oa)}isEqual(e){return e instanceof mw}}class J2 extends to{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=sC(this,e,!0),r=this.ha.map(s=>ro(s,n)),i=new $s(r);return new Gu(e.path,i)}isEqual(e){return this===e}}class Z2 extends to{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=sC(this,e,!0),r=this.ha.map(s=>ro(s,n)),i=new Us(r);return new Gu(e.path,i)}isEqual(e){return this===e}}class eU extends to{constructor(e,n){super(e),this.la=n}_toFieldTransform(e){const n=new aa(e.wt,Mb(e.wt,this.la));return new Gu(e.path,n)}isEqual(e){return this===e}}function gw(t,e,n,r){const i=t.aa(1,e,n);vw("Data must be an object, but it was:",i,r);const s=[],o=vt.empty();eo(r,(l,u)=>{const c=ww(e,l,n);u=V(u);const h=i.ia(c);if(u instanceof ec)s.push(c);else{const d=ro(u,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new In(s);return new rC(o,a,i.fieldTransforms)}function yw(t,e,n,r,i,s){const o=t.aa(1,e,n),a=[Dg(e,r,n)],l=[i];if(s.length%2!=0)throw new N(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Dg(e,s[d])),l.push(s[d+1]);const u=[],c=vt.empty();for(let d=a.length-1;d>=0;--d)if(!uC(u,a[d])){const f=a[d];let p=l[d];p=V(p);const v=o.ia(f);if(p instanceof ec)u.push(f);else{const E=ro(p,v);E!=null&&(u.push(f),c.set(f,E))}}const h=new In(u);return new rC(c,h,o.fieldTransforms)}function oC(t,e,n,r=!1){return ro(n,t.aa(r?4:3,e))}function ro(t,e){if(lC(t=V(t)))return vw("Unsupported field value:",e,t),aC(t,e);if(t instanceof to)return function(n,r){if(!iC(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=ro(o,r.ra(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=V(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Mb(r.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ae.fromDate(n);return{timestampValue:gu(r.wt,i)}}if(n instanceof Ae){const i=new Ae(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:gu(r.wt,i)}}if(n instanceof sf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Er)return{bytesValue:Yb(r.wt,n._byteString)};if(n instanceof Te){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fv(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${rf(n)}`)}(t,e)}function aC(t,e){const n={};return Eb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(r,i)=>{const s=ro(i,e.ea(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function lC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof sf||t instanceof Er||t instanceof Te||t instanceof to)}function vw(t,e,n){if(!lC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=rf(n);throw r==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function Dg(t,e,n){if((e=V(e))instanceof Fi)return e._internalPath;if(typeof e=="string")return ww(t,e);throw od("Field path arguments must be of type string or ",t,!1,void 0,n)}const tU=new RegExp("[~\\*/\\[\\]]");function ww(t,e,n){if(e.search(tU)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fi(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function od(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new N(x.INVALID_ARGUMENT,a+t+l)}function uC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nU extends Iu{data(){return super.data()}}function lf(t,e){return typeof e=="string"?ww(t,e):e instanceof Fi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yr extends Iu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pl extends Yr{data(e={}){return super.data(e)}}class $i{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pl(this._firestore,this._userDataWriter,r.key,r,new ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new N(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Pl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ps(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Pl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ps(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:rU(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function rU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function cC(t,e){return t instanceof Yr&&e instanceof Yr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $i&&e instanceof $i&&t._firestore===e._firestore&&pw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new N(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tc{}function li(t,...e){for(const n of e)t=n._apply(t);return t}class iU extends tc{constructor(e,n,r){super(),this.fa=e,this.da=n,this._a=r,this.type="where"}_apply(e){const n=no(e.firestore),r=function(i,s,o,a,l,u,c){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new N(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){uI(c,u);const f=[];for(const p of c)f.push(lI(a,i,p));h={arrayValue:{values:f}}}else h=lI(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||uI(c,u),h=oC(o,s,c,u==="in"||u==="not-in");const d=wt.create(l,u,h);return function(f,p){if(p.ht()){const E=Pv(f);if(E!==null&&!E.isEqual(p.field))throw new N(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${E.toString()}' and '${p.field.toString()}'`);const m=Dv(f);m!==null&&gC(f,p.field,m)}const v=function(E,m){for(const y of E.filters)if(m.indexOf(y.op)>=0)return y.op;return null}(f,function(E){switch(E){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(v!==null)throw v===p.op?new N(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new N(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${v.toString()}' filters.`)}(i,d),d}(e._query,"where",n,e.firestore._databaseId,this.fa,this.da,this._a);return new Ot(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new Zr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function sU(t,e,n){const r=e,i=lf("where",t);return new iU(i,r,n)}class oU extends tc{constructor(e,n){super(),this.fa=e,this.wa=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new N(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new N(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new jo(i,s);return function(a,l){if(Dv(a)===null){const u=Pv(a);u!==null&&gC(a,u,l.field)}}(r,o),o}(e._query,this.fa,this.wa);return new Ot(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Zr(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function aU(t,e="asc"){const n=e,r=lf("orderBy",t);return new oU(r,n)}class dC extends tc{constructor(e,n,r){super(),this.type=e,this.ma=n,this.ga=r}_apply(e){return new Ot(e.firestore,e.converter,Rb(e._query,this.ma,this.ga))}}function lU(t){return Xx("limit",t),new dC("limit",t,"F")}function uU(t){return Xx("limitToLast",t),new dC("limitToLast",t,"L")}class fC extends tc{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=mC(e,this.type,this.ya,this.pa);return new Ot(e.firestore,e.converter,function(r,i){return new Zr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function cU(...t){return new fC("startAt",t,!0)}function hU(...t){return new fC("startAfter",t,!1)}class pC extends tc{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=mC(e,this.type,this.ya,this.pa);return new Ot(e.firestore,e.converter,function(r,i){return new Zr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function dU(...t){return new pC("endBefore",t,!1)}function fU(...t){return new pC("endAt",t,!0)}function mC(t,e,n,r){if(n[0]=V(n[0]),n[0]instanceof Iu)return function(i,s,o,a,l){if(!a)throw new N(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of sa(i))if(c.field.isKeyField())u.push(Ms(s,a.key));else{const h=a.data.field(c.field);if(Nv(h))throw new N(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=c.field.canonicalString();throw new N(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}u.push(h)}return new Li(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=no(t.firestore);return function(s,o,a,l,u,c){const h=s.explicitOrderBy;if(u.length>h.length)throw new N(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let f=0;f<u.length;f++){const p=u[f];if(h[f].field.isKeyField()){if(typeof p!="string")throw new N(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!Ov(s)&&p.indexOf("/")!==-1)throw new N(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const v=s.path.child(ue.fromString(p));if(!F.isDocumentKey(v))throw new N(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const E=new F(v);d.push(Ms(o,E))}else{const v=oC(a,l,p);d.push(v)}}return new Li(d,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function lI(t,e,n){if(typeof(n=V(n))=="string"){if(n==="")throw new N(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ov(e)&&n.indexOf("/")!==-1)throw new N(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!F.isDocumentKey(r))throw new N(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ms(t,new F(r))}if(n instanceof Te)return Ms(t,n._key);throw new N(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function uI(t,e){if(!Array.isArray(t)||t.length===0)throw new N(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new N(x.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gC(t,e,n){if(!n.isEqual(e))throw new N(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{convertValue(e,n="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw q()}}convertObject(e,n){const r={};return eo(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new sf(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(du(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);J(sx(r));const i=new Qr(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||We(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class mU extends _w{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=no(e)}set(e,n,r){this._verifyNotCommitted();const i=mi(e,this._firestore),s=uf(i.converter,n,r),o=af(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,De.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=mi(e,this._firestore);let o;return o=typeof(n=V(n))=="string"||n instanceof Fi?yw(this._dataReader,"WriteBatch.update",s._key,n,r,i):gw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,De.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mi(e,this._firestore);return this._mutations=this._mutations.concat(new xa(n._key,De.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new N(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mi(t,e){if((t=V(t)).firestore!==e)throw new N(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){t=de(t,Te);const e=de(t.firestore,$e);return Gx(ft(e),t._key).then(n=>Iw(e,t,n))}class io extends _w{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,n)}}function vU(t){t=de(t,Te);const e=de(t.firestore,$e),n=ft(e),r=new io(e);return R2(n,t._key).then(i=>new Yr(e,r,t._key,i,new ps(i!==null&&i.hasLocalMutations,!0),t.converter))}function wU(t){t=de(t,Te);const e=de(t.firestore,$e);return Gx(ft(e),t._key,{source:"server"}).then(n=>Iw(e,t,n))}function _U(t){t=de(t,Ot);const e=de(t.firestore,$e),n=ft(e),r=new io(e);return hC(t._query),Qx(n,t._query).then(i=>new $i(e,r,t,i))}function IU(t){t=de(t,Ot);const e=de(t.firestore,$e),n=ft(e),r=new io(e);return N2(n,t._query).then(i=>new $i(e,r,t,i))}function kU(t){t=de(t,Ot);const e=de(t.firestore,$e),n=ft(e),r=new io(e);return Qx(n,t._query,{source:"server"}).then(i=>new $i(e,r,t,i))}function cI(t,e,n){t=de(t,Te);const r=de(t.firestore,$e),i=uf(t.converter,e,n);return nc(r,[af(no(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,De.none())])}function hI(t,e,n,...r){t=de(t,Te);const i=de(t.firestore,$e),s=no(i);let o;return o=typeof(e=V(e))=="string"||e instanceof Fi?yw(s,"updateDoc",t._key,e,n,r):gw(s,"updateDoc",t._key,e),nc(i,[o.toMutation(t._key,De.exists(!0))])}function EU(t){return nc(de(t.firestore,$e),[new xa(t._key,De.none())])}function SU(t,e){const n=de(t.firestore,$e),r=sd(t),i=uf(t.converter,e);return nc(n,[af(no(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,De.exists(!1))]).then(()=>r)}function ad(t,...e){var n,r,i;t=V(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Ng(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Ng(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof Te)u=de(t.firestore,$e),c=Ta(t._key.path),l={next:h=>{e[o]&&e[o](Iw(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=de(t,Ot);u=de(h.firestore,$e),c=h._query;const d=new io(u);l={next:f=>{e[o]&&e[o](new $i(u,d,h,f))},error:e[o+1],complete:e[o+2]},hC(t._query)}return function(h,d,f,p){const v=new tf(p),E=new nw(d,v,f);return h.asyncQueue.enqueueAndForget(async()=>Zv(await da(h),E)),()=>{v.Tc(),h.asyncQueue.enqueueAndForget(async()=>ew(await da(h),E))}}(ft(u),c,a,l)}function TU(t,e){return D2(ft(t=de(t,$e)),Ng(e)?e:{next:e})}function nc(t,e){return function(n,r){const i=new at;return n.asyncQueue.enqueueAndForget(async()=>a2(await dw(n),r,i)),i.promise}(ft(t),e)}function Iw(t,e,n){const r=n.docs.get(e._key),i=new io(t);return new Yr(t,i,e._key,r,new ps(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=no(e)}get(e){const n=mi(e,this._firestore),r=new mU(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return q();const s=i[0];if(s.isFoundDocument())return new Iu(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Iu(this._firestore,r,n._key,null,n.converter);throw q()})}set(e,n,r){const i=mi(e,this._firestore),s=uf(i.converter,n,r),o=af(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=mi(e,this._firestore);let o;return o=typeof(n=V(n))=="string"||n instanceof Fi?yw(this._dataReader,"Transaction.update",s._key,n,r,i):gw(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=mi(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=mi(e,this._firestore),r=new io(this._firestore);return super.get(e).then(i=>new Yr(this._firestore,r,n._key,i._document,new ps(!1,!1),n.converter))}}function xU(t,e,n){t=de(t,$e);const r=Object.assign(Object.assign({},pU),n);return function(i){if(i.maxAttempts<1)throw new N(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),P2(ft(t),i=>e(new bU(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(){return new ec("deleteField")}function AU(){return new mw("serverTimestamp")}function RU(...t){return new J2("arrayUnion",t)}function NU(...t){return new Z2("arrayRemove",t)}function DU(t){return new eU("increment",t)}(function(t,e=!0){(function(n){Sa=n})(zi),fn(new ut("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new $e(i,new FM(n.getProvider("auth-internal")),new VM(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),Nt(u1,"3.4.10",t),Nt(u1,"3.4.10","esm2017")})();const PU="@firebase/firestore-compat",OU="0.1.19";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new N("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(){if(typeof Uint8Array=="undefined")throw new N("unimplemented","Uint8Arrays are not available in this environment.")}function fI(){if(!QM())throw new N("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ku{constructor(e){this._delegate=e}static fromBase64String(e){return fI(),new ku(Er.fromBase64String(e))}static fromUint8Array(e){return dI(),new ku(Er.fromUint8Array(e))}toBase64(){return fI(),this._delegate.toBase64()}toUint8Array(){return dI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){return LU(t,["next","error","complete"])}function LU(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{enableIndexedDbPersistence(e,n){return V2(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return z2(e._delegate)}clearIndexedDbPersistence(e){return j2(e._delegate)}}class yC{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&cu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){M2(this._delegate,e,n,r)}enableNetwork(){return H2(this._delegate)}disableNetwork(){return K2(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Yx("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return q2(this._delegate)}onSnapshotsInSync(e){return TU(this._delegate,e)}get app(){if(!this._appCompat)throw new N("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fa(this,Jx(this._delegate,e))}catch(n){throw Vt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Dn(this,sd(this._delegate,e))}catch(n){throw Vt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bt(this,F2(this._delegate,e))}catch(n){throw Vt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return xU(this._delegate,n=>e(new vC(this,n)))}batch(){return ft(this._delegate),new wC(new gU(this._delegate,e=>nc(this._delegate,e)))}loadBundle(e){return W2(this._delegate,e)}namedQuery(e){return G2(this._delegate,e).then(n=>n?new Bt(this,n):null)}}class cf extends _w{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(new Er(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Dn.forKey(n,this.firestore,null)}}function FU(t){PM(t)}class vC{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new cf(e)}get(e){const n=ms(e);return this._delegate.get(n).then(r=>new Eu(this._firestore,new Yr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=ms(e);return r?(kw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ms(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ms(e);return this._delegate.delete(n),this}}class wC{constructor(e){this._delegate=e}set(e,n,r){const i=ms(e);return r?(kw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ms(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ms(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class js{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Pl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Su(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=js.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new js(e,new cf(e),n),i.set(n,s)),s}}js.INSTANCES=new WeakMap;class Dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cf(e)}static forPath(e,n,r){if(e.length%2!==0)throw new N("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dn(n,new Te(n._delegate,r,new F(e)))}static forKey(e,n,r){return new Dn(n,new Te(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fa(this.firestore,Jx(this._delegate,e))}catch(n){throw Vt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=V(e),e instanceof Te?Zx(this._delegate,e):!1}set(e,n){n=kw("DocumentReference.set",n);try{return n?cI(this._delegate,e,n):cI(this._delegate,e)}catch(r){throw Vt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?hI(this._delegate,e):hI(this._delegate,e,n,...r)}catch(i){throw Vt(i,"updateDoc()","DocumentReference.update()")}}delete(){return EU(this._delegate)}onSnapshot(...e){const n=_C(e),r=IC(e,i=>new Eu(this.firestore,new Yr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ad(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=vU(this._delegate):(e==null?void 0:e.source)==="server"?n=wU(this._delegate):n=yU(this._delegate),n.then(r=>new Eu(this.firestore,new Yr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Vt(t,e,n){return t.message=t.message.replace(e,n),t}function _C(t){for(const e of t)if(typeof e=="object"&&!Pg(e))return e;return{}}function IC(t,e){var n,r;let i;return Pg(t[0])?i=t[0]:Pg(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Eu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return cC(this._delegate,e._delegate)}}class Su extends Eu{data(e){const n=this._delegate.data(e);return OM(n!==void 0),n}}class Bt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cf(e)}where(e,n,r){try{return new Bt(this.firestore,li(this._delegate,sU(e,n,r)))}catch(i){throw Vt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Bt(this.firestore,li(this._delegate,aU(e,n)))}catch(r){throw Vt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bt(this.firestore,li(this._delegate,lU(e)))}catch(n){throw Vt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Bt(this.firestore,li(this._delegate,uU(e)))}catch(n){throw Vt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bt(this.firestore,li(this._delegate,cU(...e)))}catch(n){throw Vt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bt(this.firestore,li(this._delegate,hU(...e)))}catch(n){throw Vt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bt(this.firestore,li(this._delegate,dU(...e)))}catch(n){throw Vt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bt(this.firestore,li(this._delegate,fU(...e)))}catch(n){throw Vt(n,"endAt()","Query.endAt()")}}isEqual(e){return pw(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=IU(this._delegate):(e==null?void 0:e.source)==="server"?n=kU(this._delegate):n=_U(this._delegate),n.then(r=>new Og(this.firestore,new $i(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=_C(e),r=IC(e,i=>new Og(this.firestore,new $i(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ad(this._delegate,n,r)}withConverter(e){return new Bt(this.firestore,e?this._delegate.withConverter(js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class $U{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Su(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Og{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Bt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Su(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new $U(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Su(this._firestore,r))})}isEqual(e){return cC(this._delegate,e._delegate)}}class fa extends Bt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dn(this.firestore,e):null}doc(e){try{return e===void 0?new Dn(this.firestore,sd(this._delegate)):new Dn(this.firestore,sd(this._delegate,e))}catch(n){throw Vt(n,"doc()","CollectionReference.doc()")}}add(e){return SU(this._delegate,e).then(n=>new Dn(this.firestore,n))}isEqual(e){return Zx(this._delegate,e._delegate)}withConverter(e){return new fa(this.firestore,e?this._delegate.withConverter(js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ms(t){return de(t,Te)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(...e){this._delegate=new Fi(...e)}static documentId(){return new Ew(ze.keyField().canonicalString())}isEqual(e){return e=V(e),e instanceof Fi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this._delegate=e}static serverTimestamp(){const e=AU();return e._methodName="FieldValue.serverTimestamp",new ls(e)}static delete(){const e=CU();return e._methodName="FieldValue.delete",new ls(e)}static arrayUnion(...e){const n=RU(...e);return n._methodName="FieldValue.arrayUnion",new ls(n)}static arrayRemove(...e){const n=NU(...e);return n._methodName="FieldValue.arrayRemove",new ls(n)}static increment(e){const n=DU(e);return n._methodName="FieldValue.increment",new ls(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU={Firestore:yC,GeoPoint:sf,Timestamp:Ae,Blob:ku,Transaction:vC,WriteBatch:wC,DocumentReference:Dn,DocumentSnapshot:Eu,Query:Bt,QueryDocumentSnapshot:Su,QuerySnapshot:Og,CollectionReference:fa,FieldPath:Ew,FieldValue:ls,setLogLevel:FU,CACHE_SIZE_UNLIMITED:B2};function BU(t,e){t.INTERNAL.registerComponent(new ut("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},UU)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t){BU(t,(e,n)=>new yC(e,n,new MU)),t.registerVersion(PU,OU)}VU(ot);function Sw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const nl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},mo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function kC(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jU=zU,qU=kC,EC=new br("auth","Firebase",kC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new Dd("@firebase/auth");function ah(t,...e){pI.logLevel<=ce.ERROR&&pI.error(`Auth (${zi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,...e){throw Tw(t,...e)}function Et(t,...e){return Tw(t,...e)}function SC(t,e,n){const r=Object.assign(Object.assign({},qU()),{[e]:n});return new br("auth","Firebase",r).create(e,{appName:t.name})}function Da(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tt(t,"argument-error"),SC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EC.create(t,...e)}function L(t,e,...n){if(!t)throw Tw(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ah(e),new Error(e)}function er(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new Map;function vn(t){er(t instanceof Function,"Expected a class definition");let e=mI.get(t);return e?(er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mI.set(t,e),e)}function HU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bw(){return gI()==="http:"||gI()==="https:"}function gI(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bw()||Zy()||"connection"in navigator)?navigator.onLine:!0}function WU(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=nT()||Nd()}get(){return KU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t,e){er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=new rc(3e4,6e4);function nt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pt(t,e,n,r,i={}){return bC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=wa(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),TC.fetch()(xC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function bC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GU),e);try{const i=new YU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gl(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw SC(t,c,u);Tt(t,c)}}catch(i){if(i instanceof Gt)throw i;Tt(t,"network-request-failed")}}async function ni(t,e,n,r,i={}){const s=await pt(t,e,n,r,i);return"mfaPendingCredential"in s&&Tt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function xC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?xw(t.config,i):`${t.config.apiScheme}://${i}`}class YU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Et(this.auth,"network-request-failed")),QU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Et(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e){return pt(t,"POST","/v1/accounts:delete",e)}async function JU(t,e){return pt(t,"POST","/v1/accounts:update",e)}async function ZU(t,e){return pt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eB(t,e=!1){const n=V(t),r=await n.getIdToken(e),i=hf(r);L(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ol(Fp(i.auth_time)),issuedAtTime:Ol(Fp(i.iat)),expirationTime:Ol(Fp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fp(t){return Number(t)*1e3}function hf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=GP(n);return i?JSON.parse(i):(ah("Failed to decode base64 JWT payload"),null)}catch(i){return ah("Caught error parsing JWT payload as JSON",i),null}}function tB(t){const e=hf(t);return L(e,"internal-error"),L(typeof e.exp!="undefined","internal-error"),L(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gt&&nB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xr(t,ZU(n,{idToken:r}));L(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oB(s.providerUserInfo):[],a=sB(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new CC(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function iB(t){const e=V(t);await bu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oB(t){return t.map(e=>{var{providerId:n}=e,r=Sw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aB(t,e){const n=await bC(t,{},async()=>{const r=wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=xC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",TC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken!="undefined","internal-error"),L(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):tB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return L(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await aB(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xu;return r&&(L(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(L(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(L(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xu,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e){L(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Is{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Sw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xr(this,this.stsTokenManager.getToken(this.auth,e));return L(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eB(this,e)}reload(){return iB(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Xr(this,XU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:g,emailVerified:S,isAnonymous:b,providerData:k,stsTokenManager:C}=n;L(g&&C,e,"internal-error");const R=xu.fromJSON(this.name,C);L(typeof g=="string",e,"internal-error"),ui(h,e.name),ui(d,e.name),L(typeof S=="boolean",e,"internal-error"),L(typeof b=="boolean",e,"internal-error"),ui(f,e.name),ui(p,e.name),ui(v,e.name),ui(E,e.name),ui(m,e.name),ui(y,e.name);const H=new Is({uid:g,auth:e,email:d,emailVerified:S,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:R,createdAt:m,lastLoginAt:y});return k&&Array.isArray(k)&&(H.providerData=k.map(G=>Object.assign({},G))),E&&(H._redirectEventId=E),H}static async _fromIdTokenResponse(e,n,r=!1){const i=new xu;i.updateFromServerResponse(n);const s=new Is({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bu(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}AC.type="NONE";const pa=AC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,e,n){return`firebase:${t}:${e}:${n}`}class Ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ks(this.userKey,i.apiKey,s),this.fullPersistenceKey=ks("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ho(vn(pa),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||vn(pa);const o=ks(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Is._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ho(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ho(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PC(e))return"Blackberry";if(OC(e))return"Webos";if(Cw(e))return"Safari";if((e.includes("chrome/")||NC(e))&&!e.includes("edge/"))return"Chrome";if(ic(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RC(t=be()){return/firefox\//i.test(t)}function Cw(t=be()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NC(t=be()){return/crios\//i.test(t)}function DC(t=be()){return/iemobile/i.test(t)}function ic(t=be()){return/android/i.test(t)}function PC(t=be()){return/blackberry/i.test(t)}function OC(t=be()){return/webos/i.test(t)}function Pa(t=be()){return/iphone|ipad|ipod/i.test(t)}function lB(t=be()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function uB(t=be()){var e;return Pa(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cB(){return ev()&&document.documentMode===10}function LC(t=be()){return Pa(t)||ic(t)||OC(t)||PC(t)||/windows phone/i.test(t)||DC(t)}function hB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e=[]){let n;switch(t){case"Browser":n=yI(be());break;case"Worker":n=`${yI(be())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){var n;if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(n=i)===null||n===void 0?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vI(this),this.idTokenSubscription=new vI(this),this.beforeStateQueue=new dB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bu(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?V(e):null;return n&&L(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(vn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new br("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vn(e)||this._popupRedirectResolver;L(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return L(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function ht(t){return V(t)}class vI{constructor(e){this.auth=e,this.observer=null,this.addObserver=rT(n=>this.observer=n)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pB(t,e,n){const r=ht(t);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=FC(e),{host:o,port:a}=mB(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||gB()}function FC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mB(t){const e=FC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wI(o)}}}function wI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(t,e){return pt(t,"POST","/v1/accounts:resetPassword",nt(t,e))}async function UC(t,e){return pt(t,"POST","/v1/accounts:update",e)}async function yB(t,e){return pt(t,"POST","/v1/accounts:update",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(t,e){return ni(t,"POST","/v1/accounts:signInWithPassword",nt(t,e))}async function df(t,e){return pt(t,"POST","/v1/accounts:sendOobCode",nt(t,e))}async function wB(t,e){return df(t,e)}async function _B(t,e){return df(t,e)}async function IB(t,e){return df(t,e)}async function kB(t,e){return df(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EB(t,e){return ni(t,"POST","/v1/accounts:signInWithEmailLink",nt(t,e))}async function SB(t,e){return ni(t,"POST","/v1/accounts:signInWithEmailLink",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends Oa{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Cu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Cu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return vB(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return EB(e,{email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return UC(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return SB(e,{idToken:n,email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(t,e){return ni(t,"POST","/v1/accounts:signInWithIdp",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="http://localhost";class Sr extends Oa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Sr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Sw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Sr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return jr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jr(e,n)}buildRequest(){const e={requestUri:TB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bB(t,e){return pt(t,"POST","/v1/accounts:sendVerificationCode",nt(t,e))}async function xB(t,e){return ni(t,"POST","/v1/accounts:signInWithPhoneNumber",nt(t,e))}async function CB(t,e){const n=await ni(t,"POST","/v1/accounts:signInWithPhoneNumber",nt(t,e));if(n.temporaryProof)throw gl(t,"account-exists-with-different-credential",n);return n}const AB={USER_NOT_FOUND:"user-not-found"};async function RB(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ni(t,"POST","/v1/accounts:signInWithPhoneNumber",nt(t,n),AB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Oa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Es({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Es({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return xB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return CB(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return RB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Es({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DB(t){const e=Ro(dl(t)).link,n=e?Ro(dl(e)).deep_link_id:null,r=Ro(dl(t)).deep_link_id;return(r?Ro(dl(r)).link:null)||r||n||e||t}class ff{constructor(e){var n,r,i,s,o,a;const l=Ro(dl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=NB((i=l.mode)!==null&&i!==void 0?i:null);L(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=DB(e);try{return new ff(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.providerId=Qi.PROVIDER_ID}static credential(e,n){return Cu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ff.parseLink(n);return L(r,"argument-error"),Cu._fromEmailAndCode(e,r.code,r.tenantId)}}Qi.PROVIDER_ID="password";Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends ri{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ko extends La{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return L("providerId"in n&&"signInMethod"in n,"argument-error"),Sr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return L(e.idToken||e.accessToken,"argument-error"),Sr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ko.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ko.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Ko(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends La{constructor(){super("facebook.com")}static credential(e){return Sr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends La{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Sr._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends La{constructor(){super("github.com")}static credential(e){return Sr._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB="http://localhost";class ma extends Oa{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return jr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new ma(r,s)}static _create(e,n){return new ma(e,n)}buildRequest(){return{requestUri:PB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB="saml.";class ld extends ri{constructor(e){L(e.startsWith(OB),"argument-error"),super(e)}static credentialFromResult(e){return ld.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ld.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=ma.fromJSON(e);return L(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return ma._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends La{constructor(){super("twitter.com")}static credential(e,n){return Sr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(t,e){return ni(t,"POST","/v1/accounts:signUp",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Is._fromIdTokenResponse(e,r,i),o=_I(r);return new Bn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_I(r);return new Bn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _I(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(t){var e;const n=ht(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Bn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await BC(n,{returnSecureToken:!0}),i=await Bn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends Gt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ud.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ud(e,n,r,i)}}function VC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ud._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(t,e){const n=V(t);await pf(!0,n,e);const{providerUserInfo:r}=await JU(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=zC(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Aw(t,e,n=!1){const r=await Xr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bn._forOperation(t,"link",r)}async function pf(t,e,n){await bu(e);const r=zC(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";L(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Xr(t,VC(r,i,e,t),n);L(s.idToken,r,"internal-error");const o=hf(s.idToken);L(o,r,"internal-error");const{sub:a}=o;return L(t.uid===a,r,"user-mismatch"),Bn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t,e,n=!1){const r="signIn",i=await VC(t,r,e),s=await Bn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function mf(t,e){return qC(ht(t),e)}async function HC(t,e){const n=V(t);return await pf(!1,n,e.providerId),Aw(n,e)}async function KC(t,e){return jC(V(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,e){return ni(t,"POST","/v1/accounts:signInWithCustomToken",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){const n=ht(t),r=await FB(n,{token:e,returnSecureToken:!0}),i=await Bn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Rw._fromServerResponse(e,n):Tt(e,"internal-error")}}class Rw extends gf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Rw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t,e,n){var r;L(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),L(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(L(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(L(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB(t,e,n){const r=V(t),i={requestType:"PASSWORD_RESET",email:e};n&&yf(r,i,n),await _B(r,i)}async function BB(t,e,n){await $C(V(t),{oobCode:e,newPassword:n})}async function VB(t,e){await yB(V(t),{oobCode:e})}async function WC(t,e){const n=V(t),r=await $C(n,{oobCode:e}),i=r.requestType;switch(L(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":L(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":L(r.mfaInfo,n,"internal-error");default:L(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=gf._fromServerResponse(ht(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function zB(t,e){const{data:n}=await WC(V(t),e);return n.email}async function jB(t,e,n){const r=ht(t),i=await BC(r,{returnSecureToken:!0,email:e,password:n}),s=await Bn._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function qB(t,e,n){return mf(V(t),Qi.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(t,e,n){const r=V(t),i={requestType:"EMAIL_SIGNIN",email:e};L(n.handleCodeInApp,r,"argument-error"),n&&yf(r,i,n),await IB(r,i)}function KB(t,e){const n=ff.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function WB(t,e,n){const r=V(t),i=Qi.credentialWithLink(e,n||Tu());return L(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),mf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e){return pt(t,"POST","/v1/accounts:createAuthUri",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(t,e){const n=bw()?Tu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await GB(V(t),r);return i||[]}async function YB(t,e){const n=V(t),r=await t.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};e&&yf(n.auth,i,e);const{email:s}=await wB(n.auth,i);s!==t.email&&await t.reload()}async function XB(t,e,n){const r=V(t),i=await t.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:e};n&&yf(r.auth,s,n);const{email:o}=await kB(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JB(t,e){return pt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=V(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Xr(r,JB(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function eV(t,e){return GC(V(t),e,null)}function tV(t,e){return GC(V(t),null,e)}async function GC(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Xr(t,UC(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=hf(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Wo(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new rV(s,i);case"github.com":return new iV(s,i);case"google.com":return new sV(s,i);case"twitter.com":return new oV(s,i,t.screenName||null);case"custom":case"anonymous":return new Wo(s,null);default:return new Wo(s,r,i)}}class Wo{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class QC extends Wo{constructor(e,n,r,i){super(e,n,r),this.username=i}}class rV extends Wo{constructor(e,n){super(e,"facebook.com",n)}}class iV extends QC{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class sV extends Wo{constructor(e,n){super(e,"google.com",n)}}class oV extends QC{constructor(e,n,r){super(e,"twitter.com",n,r)}}function aV(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:nV(n)}function lV(t,e,n,r){return V(t).onAuthStateChanged(e,n,r)}class gs{constructor(e,n){this.type=e,this.credential=n}static _fromIdtoken(e){return new gs("enroll",e)}static _fromMfaPendingCredential(e){return new gs("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return gs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return gs._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=ht(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>gf._fromServerResponse(r,a));L(i.mfaPendingCredential,r,"internal-error");const o=gs._fromMfaPendingCredential(i.mfaPendingCredential);return new Nw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await Bn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return L(n.user,r,"internal-error"),Bn._forOperation(n.user,n.operationType,u);default:Tt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function uV(t,e){var n;const r=V(t),i=e;return L(e.customData.operationType,r,"argument-error"),L((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Nw._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:start",nt(t,e))}function hV(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:finalize",nt(t,e))}function dV(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",nt(t,e))}class Dw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>gf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Dw(e)}async getSession(){return gs._fromIdtoken(await this.user.getIdToken())}async enroll(e,n){const r=e,i=await this.getSession(),s=await Xr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken(),i=await Xr(this.user,dV(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(s){if(s.code!=="auth/user-token-expired")throw s}}}const $p=new WeakMap;function fV(t){const e=V(t);return $p.has(e)||$p.set(e,Dw._fromUser(e)),$p.get(e)}const cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(){const t=be();return Cw(t)||Pa(t)}const mV=1e3,gV=10;class XC extends YC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pV()&&hB(),this.fallbackToPolling=LC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XC.type="LOCAL";const Pw=XC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC extends YC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JC.type="SESSION";const qs=JC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new vf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await yV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=sc("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return window}function wV(t){Xe().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){return typeof Xe().WorkerGlobalScope!="undefined"&&typeof Xe().importScripts=="function"}async function _V(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kV(){return Ow()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebaseLocalStorageDb",EV=1,hd="firebaseLocalStorage",eA="fbase_key";class oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wf(t,e){return t.transaction([hd],e?"readwrite":"readonly").objectStore(hd)}function SV(){const t=indexedDB.deleteDatabase(ZC);return new oc(t).toPromise()}function Lg(){const t=indexedDB.open(ZC,EV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hd,{keyPath:eA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hd)?e(r):(r.close(),await SV(),e(await Lg()))})})}async function II(t,e,n){const r=wf(t,!0).put({[eA]:e,value:n});return new oc(r).toPromise()}async function TV(t,e){const n=wf(t,!1).get(e),r=await new oc(n).toPromise();return r===void 0?null:r.value}function kI(t,e){const n=wf(t,!0).delete(e);return new oc(n).toPromise()}const bV=800,xV=3;class tA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ow()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(kV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _V(),!this.activeServiceWorker)return;this.sender=new vV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lg();return await II(e,cd,"1"),await kI(e,cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>II(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=wf(i,!1).getAll();return new oc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tA.type="LOCAL";const Au=tA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t,e){return pt(t,"POST","/v2/accounts/mfaSignIn:start",nt(t,e))}function AV(t,e){return pt(t,"POST","/v2/accounts/mfaSignIn:finalize",nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t){return(await pt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function nA(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Et("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",NV().appendChild(r)})}function rA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=500,PV=6e4,Fc=1e12;class OV{constructor(e){this.auth=e,this.counter=Fc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new LV(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Fc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Fc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Fc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class LV{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;L(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=MV(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},PV)},DV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function MV(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=rA("rcb"),FV=new rc(3e4,6e4),$V="https://www.google.com/recaptcha/api.js?";class UV{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xe().grecaptcha}load(e,n=""){return L(BV(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Xe().grecaptcha):new Promise((r,i)=>{const s=Xe().setTimeout(()=>{i(Et(e,"network-request-failed"))},FV.get());Xe()[Up]=()=>{Xe().clearTimeout(s),delete Xe()[Up];const a=Xe().grecaptcha;if(!a){i(Et(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const h=l(u,c);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${$V}?${wa({onload:Up,render:"explicit",hl:n})}`;nA(o).catch(()=>{clearTimeout(s),i(Et(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Xe().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function BV(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class VV{async load(e){return new OV(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="recaptcha",zV={theme:"light",type:"image"};class jV{constructor(e,n=Object.assign({},zV),r){this.parameters=n,this.type=iA,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(r),this.isInvisible=this.parameters.size==="invisible",L(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;L(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new VV:new UV,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){L(!this.parameters.sitekey,this.auth,"argument-error"),L(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),L(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Xe()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){L(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){L(bw()&&!Ow(),this.auth,"internal-error"),await qV(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await RV(this.auth);L(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return L(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function qV(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Es._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function HV(t,e,n){const r=ht(t),i=await _f(r,e,V(n));return new Lw(i,s=>mf(r,s))}async function KV(t,e,n){const r=V(t);await pf(!1,r,"phone");const i=await _f(r.auth,e,V(n));return new Lw(i,s=>HC(r,s))}async function WV(t,e,n){const r=V(t),i=await _f(r.auth,e,V(n));return new Lw(i,s=>KC(r,s))}async function _f(t,e,n){var r;const i=await n.verify();try{L(typeof i=="string",t,"argument-error"),L(n.type===iA,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return L(o.type==="enroll",t,"internal-error"),(await cV(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{L(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return L(a,t,"missing-multi-factor-info"),(await CV(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await bB(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function GV(t,e){await Aw(V(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.providerId=Jn.PROVIDER_ID,this.auth=ht(e)}verifyPhoneNumber(e,n){return _f(this.auth,e,V(n))}static credential(e,n){return Es._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Jn.credentialFromTaggedObject(n)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Es._fromTokenResponse(n,r):null}}Jn.PROVIDER_ID="phone";Jn.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t,e){return e?vn(e):(L(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Oa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QV(t){return qC(t.auth,new Mw(t),t.bypassAuthState)}function YV(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),jC(n,new Mw(t),t.bypassAuthState)}async function XV(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),Aw(n,new Mw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QV;case"linkViaPopup":case"linkViaRedirect":return XV;case"reauthViaPopup":case"reauthViaRedirect":return YV;default:Tt(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new rc(2e3,1e4);async function ZV(t,e,n){const r=ht(t);Da(t,e,ri);const i=so(r,n);return new $r(r,"signInViaPopup",e,i).executeNotNull()}async function ez(t,e,n){const r=V(t);Da(r.auth,e,ri);const i=so(r.auth,n);return new $r(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function tz(t,e,n){const r=V(t);Da(r.auth,e,ri);const i=so(r.auth,n);return new $r(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class $r extends sA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return L(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=sc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Et(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,JV.get())};e()}}$r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="pendingRedirect",Ll=new Map;class rz extends sA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ll.get(this.auth._key());if(!e){try{const r=await iz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ll.set(this.auth._key(),e)}return this.bypassAuthState||Ll.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iz(t,e){const n=aA(e),r=oA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Fw(t,e){return oA(t)._set(aA(e),"true")}function sz(){Ll.clear()}function $w(t,e){Ll.set(t._key(),e)}function oA(t){return vn(t._redirectPersistence)}function aA(t){return ks(nz,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(t,e,n){return az(t,e,n)}async function az(t,e,n){const r=ht(t);Da(t,e,ri);const i=so(r,n);return await Fw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function lz(t,e,n){return uz(t,e,n)}async function uz(t,e,n){const r=V(t);Da(r.auth,e,ri);const i=so(r.auth,n);await Fw(i,r.auth);const s=await lA(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function cz(t,e,n){return hz(t,e,n)}async function hz(t,e,n){const r=V(t);Da(r.auth,e,ri);const i=so(r.auth,n);await pf(!1,r,e.providerId),await Fw(i,r.auth);const s=await lA(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function dz(t,e){return await ht(t)._initializationPromise,If(t,e,!1)}async function If(t,e,n=!1){const r=ht(t),i=so(r,e),o=await new rz(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function lA(t){const e=sc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=10*60*1e3;class uA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Et(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fz&&this.cachedEventUids.clear(),this.cachedEventUids.has(EI(e))}saveEventToCache(e){this.cachedEventUids.add(EI(e)),this.lastProcessedEventTime=Date.now()}}function EI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t,e={}){return pt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gz=/^https?/;async function yz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hA(t);for(const n of e)try{if(vz(n))return}catch{}Tt(t,"unauthorized-domain")}function vz(t){const e=Tu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gz.test(n))return!1;if(mz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=new rc(3e4,6e4);function SI(){const t=Xe().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _z(t){return new Promise((e,n)=>{var r,i,s;function o(){SI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SI(),n(Et(t,"network-request-failed"))},timeout:wz.get()})}if(!((i=(r=Xe().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xe().gapi)===null||s===void 0)&&s.load)o();else{const a=rA("iframefcb");return Xe()[a]=()=>{gapi.load?o():n(Et(t,"network-request-failed"))},nA(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lh=null,e})}let lh=null;function Iz(t){return lh=lh||_z(t),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=new rc(5e3,15e3),Ez="__/auth/iframe",Sz="emulator/auth/iframe",Tz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xz(t){const e=t.config;L(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xw(e,Sz):`https://${t.config.authDomain}/${Ez}`,r={apiKey:e.apiKey,appName:t.name,v:zi},i=bz.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${wa(r).slice(1)}`}async function Cz(t){const e=await Iz(t),n=Xe().gapi;return L(n,t,"internal-error"),e.open({where:document.body,url:xz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tz,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Et(t,"network-request-failed"),a=Xe().setTimeout(()=>{s(o)},kz.get());function l(){Xe().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rz=500,Nz=600,Dz="_blank",Pz="http://localhost";class TI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Oz(t,e,n,r=Rz,i=Nz){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Az),{width:r.toString(),height:i.toString(),top:s,left:o}),u=be().toLowerCase();n&&(a=NC(u)?Dz:n),RC(u)&&(e=e||Pz,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(uB(u)&&a!=="_self")return Lz(e||"",a),new TI(null);const h=window.open(e||"",a,c);L(h,t,"popup-blocked");try{h.focus()}catch{}return new TI(h)}function Lz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz="__/auth/handler",Fz="emulator/auth/handler";function Mg(t,e,n,r,i,s){L(t.config.authDomain,t,"auth-domain-config-required"),L(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zi,eventId:i};if(e instanceof ri){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(s||{}))o[l]=u}if(e instanceof La){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${$z(t)}?${wa(a).slice(1)}`}function $z({config:t}){return t.emulator?xw(t,Fz):`https://${t.authDomain}/${Mz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="webStorageSupport";class Uz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qs,this._completeRedirectFn=If,this._overrideRedirectResult=$w}async _openPopup(e,n,r,i){var s;er((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=Mg(e,n,r,Tu(),i);return Oz(e,o,sc())}async _openRedirect(e,n,r,i){return await this._originValidation(e),wV(Mg(e,n,r,Tu(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(er(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Cz(e),r=new uA(e);return n.register("authEvent",i=>(L(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bp];o!==void 0&&n(!!o),Tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LC()||Cw()||Pa()}}const Bz=Uz;class Vz{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return pr("unexpected MultiFactorSessionType")}}}class Uw extends Vz{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Uw(e)}_finalizeEnroll(e,n,r){return hV(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return AV(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class dA{constructor(){}static assertion(e){return Uw._fromCredential(e)}}dA.FACTOR_ID="phone";var bI="@firebase/auth",xI="0.20.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function qz(t){fn(new ut("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{L(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),L(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(t)},c=new fB(a,l,u);return HU(c,n),c})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fn(new ut("auth-internal",e=>{const n=ht(e.getProvider("auth").getImmediate());return(r=>new zz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nt(bI,xI,jz(t)),Nt(bI,xI,"esm2017")}qz("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz=2e3;async function Kz(t,e,n){var r;const{BuildInfo:i}=Hs();er(e.sessionId,"AuthEvent did not contain a session ID");const s=await Xz(e.sessionId),o={};return Pa()?o.ibi=i.packageName:ic()?o.apn=i.packageName:Tt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Mg(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function Wz(t){const{BuildInfo:e}=Hs(),n={};Pa()?n.iosBundleId=e.packageName:ic()?n.androidPackageName=e.packageName:Tt(t,"operation-not-supported-in-this-environment"),await hA(t,n)}function Gz(t){const{cordova:e}=Hs();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,lB()?"_blank":"_system","location=yes"),n(i)})})}async function Qz(t,e,n){const{cordova:r}=Hs();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const d=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(Et(t,"redirect-cancelled-by-user"))},Hz))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),ic()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function Yz(t){var e,n,r,i,s,o,a,l,u,c;const h=Hs();L(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),L(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)!="undefined",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),L(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L(typeof((c=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Xz(t){const e=Jz(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Jz(t){if(er(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder!="undefined")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=20;class ej extends uA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function tj(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:ij(),postBody:null,tenantId:t.tenantId,error:Et(t,"no-auth-event")}}function nj(t,e){return Fg()._set($g(t),e)}async function CI(t){const e=await Fg()._get($g(t));return e&&await Fg()._remove($g(t)),e}function rj(t,e){var n,r;const i=oj(e);if(i.includes("/__/auth/callback")){const s=uh(i),o=s.firebaseError?sj(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Et(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function ij(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Zz;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Fg(){return vn(Pw)}function $g(t){return ks("authEvent",t.config.apiKey,t.name)}function sj(t){try{return JSON.parse(t)}catch{return null}}function oj(t){const e=uh(t),n=e.link?decodeURIComponent(e.link):void 0,r=uh(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return uh(i).link||i||r||n||t}function uh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Ro(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=500;class lj{constructor(){this._redirectPersistence=qs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=If,this._overrideRedirectResult=$w}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new ej(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Tt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){Yz(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),sz(),await this._originValidation(e);const o=tj(e,r,i);await nj(e,o);const a=await Kz(e,o,n),l=await Gz(a);return Qz(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Wz(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Hs(),o=setTimeout(async()=>{await CI(e),n.onEvent(AI())},aj),a=async c=>{clearTimeout(o);const h=await CI(e);let d=null;h&&(c==null?void 0:c.url)&&(d=rj(h,c.url)),n.onEvent(d||AI())};typeof r!="undefined"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;Hs().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(h){console.error(h)}}}}const uj=lj;function AI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Et("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t,e){ht(t)._logFramework(e)}var hj="@firebase/auth-compat",dj="0.2.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=1e3;function Ml(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function pj(){return Ml()==="http:"||Ml()==="https:"}function fA(t=be()){return!!((Ml()==="file:"||Ml()==="ionic:"||Ml()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mj(){return Nd()||Jy()}function gj(){return ev()&&(document==null?void 0:document.documentMode)===11}function yj(t=be()){return/Edge\/\d+/.test(t)}function vj(t=be()){return gj()||yj(t)}function pA(){try{const t=self.localStorage,e=sc();if(t)return t.setItem(e,"1"),t.removeItem(e),vj()?Rs():!0}catch{return Bw()&&Rs()}return!1}function Bw(){return typeof global!="undefined"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vp(){return(pj()||Zy()||fA())&&!mj()&&pA()&&!Bw()}function mA(){return fA()&&typeof document!="undefined"}async function wj(){return mA()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},fj);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function _j(){return typeof window!="undefined"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn={LOCAL:"local",NONE:"none",SESSION:"session"},rl=L,gA="persistence";function Ij(t,e){if(rl(Object.values(yn).includes(e),t,"invalid-persistence-type"),Nd()){rl(e!==yn.SESSION,t,"unsupported-persistence-type");return}if(Jy()){rl(e===yn.NONE,t,"unsupported-persistence-type");return}if(Bw()){rl(e===yn.NONE||e===yn.LOCAL&&Rs(),t,"unsupported-persistence-type");return}rl(e===yn.NONE||pA(),t,"unsupported-persistence-type")}async function Ug(t){await t._initializationPromise;const e=yA(),n=ks(gA,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function kj(t,e){const n=yA();if(!n)return[];const r=ks(gA,t,e);switch(n.getItem(r)){case yn.NONE:return[pa];case yn.LOCAL:return[Au,qs];case yn.SESSION:return[qs];default:return[]}}function yA(){var t;try{return((t=_j())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=L;class wi{constructor(){this.browserResolver=vn(Bz),this.cordovaResolver=vn(uj),this.underlyingResolver=null,this._redirectPersistence=qs,this._completeRedirectFn=If,this._overrideRedirectResult=$w}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return mA()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ej(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await wj();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){return t.unwrap()}function Sj(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t){return wA(t)}function bj(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if(e.code==="auth/multi-factor-auth-required"){const i=e;i.resolver=new xj(t,uV(t,e))}else if(r){const i=wA(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function wA(t){const{_tokenResponse:e}=t instanceof Gt?t.customData:t;if(!e)return null;if(!(t instanceof Gt)&&"temporaryProof"in e&&"phoneNumber"in e)return Jn.credentialFromResult(t);const n=e.providerId;if(!n||n===nl.PASSWORD)return null;let r;switch(n){case nl.GOOGLE:r=ar;break;case nl.FACEBOOK:r=or;break;case nl.GITHUB:r=lr;break;case nl.TWITTER:r=ur;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?ma._create(n,a):Sr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Ko(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Gt?r.credentialFromError(t):r.credentialFromResult(t)}function rn(t,e){return e.catch(n=>{throw n instanceof Gt&&bj(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:Tj(n),additionalUserInfo:aV(n),user:Ur.getOrCreate(i)}})}async function Bg(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>rn(t,n.confirm(r))}}class xj{constructor(e,n){this.resolver=n,this.auth=Sj(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return rn(vA(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._delegate=e,this.multiFactor=fV(e)}static getOrCreate(e){return Ur.USER_MAP.has(e)||Ur.USER_MAP.set(e,new Ur(e)),Ur.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return rn(this.auth,HC(this._delegate,e))}async linkWithPhoneNumber(e,n){return Bg(this.auth,KV(this._delegate,e,n))}async linkWithPopup(e){return rn(this.auth,tz(this._delegate,e,wi))}async linkWithRedirect(e){return await Ug(ht(this.auth)),cz(this._delegate,e,wi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return rn(this.auth,KC(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Bg(this.auth,WV(this._delegate,e,n))}reauthenticateWithPopup(e){return rn(this.auth,ez(this._delegate,e,wi))}async reauthenticateWithRedirect(e){return await Ug(ht(this.auth)),lz(this._delegate,e,wi)}sendEmailVerification(e){return YB(this._delegate,e)}async unlink(e){return await MB(this._delegate,e),this}updateEmail(e){return eV(this._delegate,e)}updatePassword(e){return tV(this._delegate,e)}updatePhoneNumber(e){return GV(this._delegate,e)}updateProfile(e){return ZB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return XB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ur.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=L;class Vg{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;il(r,"invalid-api-key",{appName:e.name}),il(r,"invalid-api-key",{appName:e.name});const i=typeof window!="undefined"?wi:void 0;this._delegate=n.initialize({options:{persistence:Cj(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(jU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ur.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){pB(this._delegate,e,n)}applyActionCode(e){return VB(this._delegate,e)}checkActionCode(e){return WC(this._delegate,e)}confirmPasswordReset(e,n){return BB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return rn(this._delegate,jB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return QB(this._delegate,e)}isSignInWithEmailLink(e){return KB(this._delegate,e)}async getRedirectResult(){il(Vp(),this._delegate,"operation-not-supported-in-this-environment");const e=await dz(this._delegate,wi);return e?rn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){cj(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=RI(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=RI(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return HB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return UB(this._delegate,e,n||void 0)}async setPersistence(e){Ij(this._delegate,e);let n;switch(e){case yn.SESSION:n=qs;break;case yn.LOCAL:n=await vn(Au)._isAvailable()?Au:Pw;break;case yn.NONE:n=pa;break;default:return Tt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return rn(this._delegate,LB(this._delegate))}signInWithCredential(e){return rn(this._delegate,mf(this._delegate,e))}signInWithCustomToken(e){return rn(this._delegate,$B(this._delegate,e))}signInWithEmailAndPassword(e,n){return rn(this._delegate,qB(this._delegate,e,n))}signInWithEmailLink(e,n){return rn(this._delegate,WB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Bg(this._delegate,HV(this._delegate,e,n))}async signInWithPopup(e){return il(Vp(),this._delegate,"operation-not-supported-in-this-environment"),rn(this._delegate,ZV(this._delegate,e,wi))}async signInWithRedirect(e){return il(Vp(),this._delegate,"operation-not-supported-in-this-environment"),await Ug(this._delegate),oz(this._delegate,e,wi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return zB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Vg.Persistence=yn;function RI(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Ur.getOrCreate(o)),error:e,complete:n}}function Cj(t,e){const n=kj(t,e);if(typeof self!="undefined"&&!n.includes(Au)&&n.push(Au),typeof window!="undefined")for(const r of[Pw,qs])n.includes(r)||n.push(r);return n.includes(pa)||n.push(pa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.providerId="phone",this._delegate=new Jn(vA(ot.auth()))}static credential(e,n){return Jn.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Vw.PHONE_SIGN_IN_METHOD=Jn.PHONE_SIGN_IN_METHOD;Vw.PROVIDER_ID=Jn.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=L;class Rj{constructor(e,n,r=ot.app()){var i;Aj((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new jV(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="auth-compat";function Dj(t){t.INTERNAL.registerComponent(new ut(Nj,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Vg(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:mo.EMAIL_SIGNIN,PASSWORD_RESET:mo.PASSWORD_RESET,RECOVER_EMAIL:mo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:mo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:mo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:mo.VERIFY_EMAIL}},EmailAuthProvider:Qi,FacebookAuthProvider:or,GithubAuthProvider:lr,GoogleAuthProvider:ar,OAuthProvider:Ko,SAMLAuthProvider:ld,PhoneAuthProvider:Vw,PhoneMultiFactorGenerator:dA,RecaptchaVerifier:Rj,TwitterAuthProvider:ur,Auth:Vg,AuthCredential:Oa,Error:Gt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(hj,dj)}Dj(ot);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firebasestorage.googleapis.com",IA="storageBucket",Pj=2*60*1e3,Oj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue extends Gt{constructor(e,n){super(zp(e),`Firebase Storage: ${n} (${zp(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ue.prototype)}_codeEquals(e){return zp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function zp(t){return"storage/"+t}function zw(){const t="An unknown error occurred, please check the error payload for server response.";return new Ue("unknown",t)}function Lj(t){return new Ue("object-not-found","Object '"+t+"' does not exist.")}function Mj(t){return new Ue("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Fj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ue("unauthenticated",t)}function $j(){return new Ue("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Uj(t){return new Ue("unauthorized","User does not have permission to access '"+t+"'.")}function Bj(){return new Ue("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function kA(){return new Ue("canceled","User canceled the upload/download.")}function Vj(t){return new Ue("invalid-url","Invalid URL '"+t+"'.")}function zj(t){return new Ue("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function jj(){return new Ue("no-default-bucket","No default bucket found. Did you set the '"+IA+"' property when initializing the app?")}function EA(){return new Ue("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qj(){return new Ue("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Hj(){return new Ue("no-download-url","The given file does not have any download URLs.")}function Go(t){return new Ue("invalid-argument",t)}function SA(){return new Ue("app-deleted","The Firebase app was deleted.")}function TA(t){return new Ue("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fl(t,e){return new Ue("invalid-format","String does not match format '"+t+"': "+e)}function sl(t){throw new Ue("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rt.makeFromUrl(e,n)}catch{return new Rt(e,"")}if(r.path==="")return r;throw zj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(S){S.path_=decodeURIComponent(S.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},v=n===_A?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",m=new RegExp(`^https?://${v}/${i}/${E}`,"i"),g=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:m,indices:{bucket:1,path:2},postModify:u}];for(let S=0;S<g.length;S++){const b=g[S],k=b.regex.exec(e);if(k){const C=k[b.indices.bucket];let R=k[b.indices.path];R||(R=""),r=new Rt(C,R),b.postModify(r);break}}if(r==null)throw Vj(e);return r}}class Kj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...E){u||(u=!0,e.apply(null,E))}function h(E){i=setTimeout(()=>{i=null,t(f,l())},E)}function d(){s&&clearTimeout(s)}function f(E,...m){if(u){d();return}if(E){d(),c.call(null,E,...m);return}if(l()||o){d(),c.call(null,E,...m);return}r<64&&(r*=2);let g;a===1?(a=2,g=0):g=(r+Math.random())*1e3,h(g)}let p=!1;function v(E){p||(p=!0,d(),!u&&(i!==null?(E||(a=2),clearTimeout(i),h(0)):E||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function Gj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){return t!==void 0}function Yj(t){return typeof t=="function"}function Xj(t){return typeof t=="object"&&!Array.isArray(t)}function kf(t){return typeof t=="string"||t instanceof String}function NI(t){return jw()&&t instanceof Blob}function jw(){return typeof Blob!="undefined"}function zg(t,e,n,r){if(r<e)throw Go(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Go(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function bA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ss;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ss||(Ss={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n,r,i,s,o,a,l,u,c,h){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new $c(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ss.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const c=s.getErrorCode()===Ss.ABORT;r(!1,new $c(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new $c(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Qj(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=zw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?SA():kA();o(l)}else{const l=Bj();o(l)}};this.canceled_?n(!1,new $c(!1,null,!0)):this.backoffId_=Wj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Gj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return n||i||s}}class $c{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Zj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function e4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function t4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function n4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function r4(t,e,n,r,i,s){const o=bA(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return t4(l,e),Zj(l,n),e4(l,s),n4(l,r),new Jj(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function s4(...t){const e=i4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(jw())return new Blob(t);throw new Ue("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function o4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jp{constructor(e,n){this.data=e,this.contentType=n||null}}function xA(t,e){switch(t){case Pn.RAW:return new jp(CA(e));case Pn.BASE64:case Pn.BASE64URL:return new jp(AA(t,e));case Pn.DATA_URL:return new jp(u4(e),c4(e))}throw zw()}function CA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function l4(t){let e;try{e=decodeURIComponent(t)}catch{throw Fl(Pn.DATA_URL,"Malformed data URL.")}return CA(e)}function AA(t,e){switch(t){case Pn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Fl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Pn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Fl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=a4(e)}catch{throw Fl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class RA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Fl(Pn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=h4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function u4(t){const e=new RA(t);return e.base64?AA(Pn.BASE64,e.rest):l4(e.rest)}function c4(t){return new RA(t).contentType}function h4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n){let r=0,i="";NI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(NI(this.data_)){const r=this.data_,i=o4(r,e,n);return i===null?null:new Pr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Pr(r,!0)}}static getBlob(...e){if(jw()){const n=e.map(r=>r instanceof Pr?r.data_:r);return new Pr(s4.apply(null,n))}else{const n=e.map(o=>kf(o)?xA(Pn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Pr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){let e;try{e=JSON.parse(t)}catch{return null}return Xj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function f4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function NA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t,e){return e}class $t{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||p4}}let Uc=null;function m4(t){return!kf(t)||t.length<2?t:NA(t)}function Ef(){if(Uc)return Uc;const t=[];t.push(new $t("bucket")),t.push(new $t("generation")),t.push(new $t("metageneration")),t.push(new $t("name","fullPath",!0));function e(s,o){return m4(o)}const n=new $t("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new $t("size");return i.xform=r,t.push(i),t.push(new $t("timeCreated")),t.push(new $t("updated")),t.push(new $t("md5Hash",null,!0)),t.push(new $t("cacheControl",null,!0)),t.push(new $t("contentDisposition",null,!0)),t.push(new $t("contentEncoding",null,!0)),t.push(new $t("contentLanguage",null,!0)),t.push(new $t("contentType",null,!0)),t.push(new $t("metadata","customMetadata",!0)),Uc=t,Uc}function g4(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Rt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function y4(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return g4(r,t),r}function DA(t,e,n){const r=qw(e);return r===null?null:y4(t,r,n)}function v4(t,e,n,r){const i=qw(e);if(i===null||!kf(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=Yi(d,n,r),p=bA({alt:"media",token:u});return f+p})[0]}function Hw(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="prefixes",PI="items";function w4(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[DI])for(const i of n[DI]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Rt(e,s));r.prefixes.push(o)}if(n[PI])for(const i of n[PI]){const s=t._makeStorageReference(new Rt(e,i.name));r.items.push(s)}return r}function _4(t,e,n){const r=qw(n);return r===null?null:w4(t,e,r)}class ii{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t){if(!t)throw zw()}function Sf(t,e){function n(r,i){const s=DA(t,i,e);return wr(s!==null),s}return n}function I4(t,e){function n(r,i){const s=_4(t,e,i);return wr(s!==null),s}return n}function k4(t,e){function n(r,i){const s=DA(t,i,e);return wr(s!==null),v4(s,i,t.host,t._protocol)}return n}function Ma(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=$j():i=Fj():n.getStatus()===402?i=Mj(t.bucket):n.getStatus()===403?i=Uj(t.path):i=r,i.serverResponse=r.serverResponse,i}return e}function Tf(t){const e=Ma(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Lj(t.path)),s.serverResponse=i.serverResponse,s}return n}function PA(t,e,n){const r=e.fullServerUrl(),i=Yi(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ii(i,s,Sf(t,n),o);return a.errorHandler=Tf(e),a}function E4(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Yi(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,c=new ii(a,l,I4(t,e.bucket),u);return c.urlParams=s,c.errorHandler=Ma(e),c}function S4(t,e,n){const r=e.fullServerUrl(),i=Yi(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ii(i,s,k4(t,n),o);return a.errorHandler=Tf(e),a}function T4(t,e,n,r){const i=e.fullServerUrl(),s=Yi(i,t.host,t._protocol),o="PATCH",a=Hw(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,c=new ii(s,o,Sf(t,r),u);return c.headers=l,c.body=a,c.errorHandler=Tf(e),c}function b4(t,e){const n=e.fullServerUrl(),r=Yi(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new ii(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Tf(e),a}function x4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function OA(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=x4(null,e)),r}function C4(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let g="";for(let S=0;S<2;S++)g=g+Math.random().toString().slice(2);return g}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=OA(e,r,i),c=Hw(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=Pr.getBlob(h,r,d);if(f===null)throw EA();const p={name:u.fullPath},v=Yi(s,t.host,t._protocol),E="POST",m=t.maxUploadRetryTime,y=new ii(v,E,Sf(t,n),m);return y.urlParams=p,y.headers=o,y.body=f.uploadData(),y.errorHandler=Ma(e),y}class dd{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Kw(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{wr(!1)}return wr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function A4(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=OA(e,r,i),a={name:o.fullPath},l=Yi(s,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=Hw(o,n),d=t.maxUploadRetryTime;function f(v){Kw(v);let E;try{E=v.getResponseHeader("X-Goog-Upload-URL")}catch{wr(!1)}return wr(kf(E)),E}const p=new ii(l,u,f,d);return p.urlParams=a,p.headers=c,p.body=h,p.errorHandler=Ma(e),p}function R4(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const c=Kw(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wr(!1)}h||wr(!1);const d=Number(h);return wr(!isNaN(d)),new dd(d,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ii(n,o,s,a);return l.headers=i,l.errorHandler=Ma(e),l}const OI=256*1024;function N4(t,e,n,r,i,s,o,a){const l=new dd(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw qj();const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c,p={"X-Goog-Upload-Command":c===u?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},v=r.slice(h,d);if(v===null)throw EA();function E(S,b){const k=Kw(S,["active","final"]),C=l.current+c,R=r.size();let H;return k==="final"?H=Sf(e,s)(S,b):H=null,new dd(C,R,k==="final",H)}const m="POST",y=e.maxUploadRetryTime,g=new ii(n,m,E,y);return g.headers=p,g.body=v.uploadData(),g.progressCallback=a||null,g.errorHandler=Ma(t),g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={STATE_CHANGED:"state_changed"},zt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qp(t){switch(t){case"running":case"pausing":case"canceling":return zt.RUNNING;case"paused":return zt.PAUSED;case"success":return zt.SUCCESS;case"canceled":return zt.CANCELED;case"error":return zt.ERROR;default:return zt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,r){if(Yj(e)||n!=null||r!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class O4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ss.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ss.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ss.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw sl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class L4 extends O4{initXhr(){this.xhr_.responseType="text"}}function cr(){return new L4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Ef(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=A4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=R4(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,cr,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=OI*this._chunkMultiplier,n=new dd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=N4(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,cr,i,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){OI*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=PA(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,cr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=C4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=kA(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=qp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new P4(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(qp(this._state)){case zt.SUCCESS:go(this._resolve.bind(null,this.snapshot))();break;case zt.CANCELED:case zt.ERROR:const n=this._reject;go(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qp(this._state)){case zt.RUNNING:case zt.PAUSED:e.next&&go(e.next.bind(e,this.snapshot))();break;case zt.SUCCESS:e.complete&&go(e.complete.bind(e))();break;case zt.CANCELED:case zt.ERROR:e.error&&go(e.error.bind(e,this._error))();break;default:e.error&&go(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this._service=e,n instanceof Rt?this._location=n:this._location=Rt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ks(e,n)}get root(){const e=new Rt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NA(this._location.path)}get storage(){return this._service}get parent(){const e=d4(this._location.path);if(e===null)return null;const n=new Rt(this._location.bucket,e);return new Ks(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TA(e)}}function M4(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new LA(t,new Pr(e),n)}function F4(t){const e={prefixes:[],items:[]};return MA(t,e).then(()=>e)}async function MA(t,e,n){const i=await FA(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await MA(t,e,i.nextPageToken)}function FA(t,e){e!=null&&typeof e.maxResults=="number"&&zg("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=E4(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,cr)}function $4(t){t._throwIfRoot("getMetadata");const e=PA(t.storage,t._location,Ef());return t.storage.makeRequestWithTokens(e,cr)}function U4(t,e){t._throwIfRoot("updateMetadata");const n=T4(t.storage,t._location,e,Ef());return t.storage.makeRequestWithTokens(n,cr)}function B4(t){t._throwIfRoot("getDownloadURL");const e=S4(t.storage,t._location,Ef());return t.storage.makeRequestWithTokens(e,cr).then(n=>{if(n===null)throw Hj();return n})}function V4(t){t._throwIfRoot("deleteObject");const e=b4(t.storage,t._location);return t.storage.makeRequestWithTokens(e,cr)}function $A(t,e){const n=f4(t._location.path,e),r=new Rt(t._location.bucket,n);return new Ks(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t){return/^[A-Za-z]+:\/\//.test(t)}function j4(t,e){return new Ks(t,e)}function UA(t,e){if(t instanceof Ww){const n=t;if(n._bucket==null)throw jj();const r=new Ks(n,n._bucket);return e!=null?UA(r,e):r}else return e!==void 0?$A(t,e):t}function q4(t,e){if(e&&z4(e)){if(t instanceof Ww)return j4(t,e);throw Go("To use ref(service, url), the first argument must be a Storage instance.")}else return UA(t,e)}function LI(t,e){const n=e==null?void 0:e[IA];return n==null?null:Rt.makeFromBucketSpec(n,t)}function H4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:tT(i,t.app.options.projectId))}class Ww{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=_A,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pj,this._maxUploadRetryTime=Oj,this._requests=new Set,i!=null?this._bucket=Rt.makeFromBucketSpec(i,this._host):this._bucket=LI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rt.makeFromBucketSpec(this._url,e):this._bucket=LI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ks(this,e)}_makeRequest(e,n,r,i){if(this._deleted)return new Kj(SA());{const s=r4(e,this._appId,r,i,n,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const MI="@firebase/storage",FI="0.9.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4="storage";function W4(t,e,n){return t=V(t),M4(t,e,n)}function G4(t){return t=V(t),$4(t)}function Q4(t,e){return t=V(t),U4(t,e)}function Y4(t,e){return t=V(t),FA(t,e)}function X4(t){return t=V(t),F4(t)}function J4(t){return t=V(t),B4(t)}function Z4(t){return t=V(t),V4(t)}function $I(t,e){return t=V(t),q4(t,e)}function e3(t,e){return $A(t,e)}function t3(t,e,n,r={}){H4(t,e,n,r)}function n3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ww(n,r,i,e,zi)}function r3(){fn(new ut(K4,n3,"PUBLIC").setMultipleInstances(!0)),Nt(MI,FI,""),Nt(MI,FI,"esm2017")}r3();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Bc(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Bc(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Bc(o,this,this._ref)):s={next:n.next?o=>n.next(new Bc(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class BI{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new qr(e,this._service))}get items(){return this._delegate.items.map(e=>new qr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=e3(this._delegate,e);return new qr(n,this.storage)}get root(){return new qr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new qr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new UI(W4(this._delegate,e,n),this)}putString(e,n=Pn.RAW,r){this._throwIfRoot("putString");const i=xA(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new UI(new LA(this._delegate,new Pr(i.data,!0),s),this)}listAll(){return X4(this._delegate).then(e=>new BI(e,this.storage))}list(e){return Y4(this._delegate,e||void 0).then(n=>new BI(n,this.storage))}getMetadata(){return G4(this._delegate)}updateMetadata(e){return Q4(this._delegate,e)}getDownloadURL(){return J4(this._delegate)}delete(){return this._throwIfRoot("delete"),Z4(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw TA(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(VI(e))throw Go("ref() expected a child path but got a URL, use refFromURL instead.");return new qr($I(this._delegate,e),this)}refFromURL(e){if(!VI(e))throw Go("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rt.makeFromUrl(e,this._delegate.host)}catch{throw Go("refFromUrl() expected a valid full URL but got an invalid one.")}return new qr($I(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){t3(this._delegate,e,n,r)}}function VI(t){return/^[A-Za-z]+:\/\//.test(t)}const i3="@firebase/storage-compat",s3="0.1.15";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="storage-compat";function a3(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new BA(n,r)}function l3(t){const e={TaskState:zt,TaskEvent:D4,StringFormat:Pn,Storage:BA,Reference:qr};t.INTERNAL.registerComponent(new ut(o3,a3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(i3,s3)}l3(ot);const VA="@firebase/installations",Gw="0.5.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1e4,jA=`w:${Gw}`,qA="FIS_v2",u3="https://firebaseinstallations.googleapis.com/v1",c3=60*60*1e3,h3="installations",d3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Ws=new br(h3,d3,f3);function HA(t){return t instanceof Gt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA({projectId:t}){return`${u3}/projects/${t}/installations`}function WA(t){return{token:t.token,requestStatus:2,expiresIn:m3(t.expiresIn),creationTime:Date.now()}}async function GA(t,e){const r=(await e.json()).error;return Ws.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function QA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function p3(t,{refreshToken:e}){const n=QA(t);return n.append("Authorization",g3(e)),n}async function YA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function m3(t){return Number(t.replace("s","000"))}function g3(t){return`${qA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=KA(t),i=QA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:qA,appId:t.appId,sdkVersion:jA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await YA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:WA(u.authToken)}}else throw await GA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=/^[cdef][\w-]{21}$/,jg="";function _3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=I3(t);return w3.test(n)?n:jg}catch{return jg}}function I3(t){return v3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new Map;function ZA(t,e){const n=bf(t);eR(n,e),k3(n,e)}function eR(t,e){const n=JA.get(t);if(!!n)for(const r of n)r(e)}function k3(t,e){const n=E3();n&&n.postMessage({key:t,fid:e}),S3()}let ys=null;function E3(){return!ys&&"BroadcastChannel"in self&&(ys=new BroadcastChannel("[Firebase] FID Change"),ys.onmessage=t=>{eR(t.data.key,t.data.fid)}),ys}function S3(){JA.size===0&&ys&&(ys.close(),ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="firebase-installations-database",b3=1,Gs="firebase-installations-store";let Hp=null;function Qw(){return Hp||(Hp=_a(T3,b3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Gs)}}})),Hp}async function fd(t,e){const n=bf(t),i=(await Qw()).transaction(Gs,"readwrite"),s=i.objectStore(Gs),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&ZA(t,e.fid),e}async function tR(t){const e=bf(t),r=(await Qw()).transaction(Gs,"readwrite");await r.objectStore(Gs).delete(e),await r.done}async function xf(t,e){const n=bf(t),i=(await Qw()).transaction(Gs,"readwrite"),s=i.objectStore(Gs),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&ZA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(t){let e;const n=await xf(t.appConfig,r=>{const i=x3(r),s=C3(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===jg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function x3(t){const e=t||{fid:_3(),registrationStatus:0};return nR(e)}function C3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ws.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=A3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:R3(t)}:{installationEntry:e}}async function A3(t,e){try{const n=await y3(t,e);return fd(t.appConfig,n)}catch(n){throw HA(n)&&n.customData.serverCode===409?await tR(t.appConfig):await fd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function R3(t){let e=await zI(t.appConfig);for(;e.registrationStatus===1;)await XA(100),e=await zI(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Yw(t);return r||n}return e}function zI(t){return xf(t,e=>{if(!e)throw Ws.create("installation-not-found");return nR(e)})}function nR(t){return N3(t)?{fid:t.fid,registrationStatus:0}:t}function N3(t){return t.registrationStatus===1&&t.registrationTime+zA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D3({appConfig:t,heartbeatServiceProvider:e},n){const r=P3(t,n),i=p3(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:jA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await YA(()=>fetch(r,a));if(l.ok){const u=await l.json();return WA(u)}else throw await GA("Generate Auth Token",l)}function P3(t,{fid:e}){return`${KA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(t,e=!1){let n;const r=await xf(t.appConfig,s=>{if(!rR(s))throw Ws.create("not-registered");const o=s.authToken;if(!e&&M3(o))return s;if(o.requestStatus===1)return n=O3(t,e),s;{if(!navigator.onLine)throw Ws.create("app-offline");const a=$3(s);return n=L3(t,a),a}});return n?await n:r.authToken}async function O3(t,e){let n=await jI(t.appConfig);for(;n.authToken.requestStatus===1;)await XA(100),n=await jI(t.appConfig);const r=n.authToken;return r.requestStatus===0?Xw(t,e):r}function jI(t){return xf(t,e=>{if(!rR(e))throw Ws.create("not-registered");const n=e.authToken;return U3(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function L3(t,e){try{const n=await D3(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await fd(t.appConfig,r),n}catch(n){if(HA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tR(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await fd(t.appConfig,r)}throw n}}function rR(t){return t!==void 0&&t.registrationStatus===2}function M3(t){return t.requestStatus===2&&!F3(t)}function F3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+c3}function $3(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function U3(t){return t.requestStatus===1&&t.requestTime+zA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3(t){const e=t,{installationEntry:n,registrationPromise:r}=await Yw(e);return r?r.catch(console.error):Xw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(t,e=!1){const n=t;return await z3(n),(await Xw(n,e)).token}async function z3(t){const{registrationPromise:e}=await Yw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){if(!t||!t.options)throw Kp("App Configuration");if(!t.name)throw Kp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Kp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Kp(t){return Ws.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="installations",q3="installations-internal",H3=t=>{const e=t.getProvider("app").getImmediate(),n=j3(e),r=Pd(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},K3=t=>{const e=t.getProvider("app").getImmediate(),n=Pd(e,iR).getImmediate();return{getId:()=>B3(n),getToken:i=>V3(n,i)}};function W3(){fn(new ut(iR,H3,"PUBLIC")),fn(new ut(q3,K3,"PRIVATE"))}W3();Nt(VA,Gw);Nt(VA,Gw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="/firebase-messaging-sw.js",Q3="/firebase-cloud-messaging-push-scope",sR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Y3="https://fcmregistrations.googleapis.com/v1",oR="google.c.a.c_id",X3="google.c.a.c_l",J3="google.c.a.ts",Z3="google.c.a.e";var qI;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(qI||(qI={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ru;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ru||(Ru={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function eq(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="fcm_token_details_db",tq=5,HI="fcm_token_object_Store";async function nq(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Wp))return null;let e=null;return(await _a(Wp,tq,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(HI))return;const l=o.objectStore(HI),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Rr(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Rr(c.auth),p256dh:Rr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Rr(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Rr(c.auth),p256dh:Rr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Rr(c.vapidKey)}}}}}})).close(),await Vo(Wp),await Vo("fcm_vapid_details_db"),await Vo("undefined"),rq(e)?e:null}function rq(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq="firebase-messaging-database",sq=1,Qs="firebase-messaging-store";let Gp=null;function Jw(){return Gp||(Gp=_a(iq,sq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Qs)}}})),Gp}async function aR(t){const e=e0(t),r=await(await Jw()).transaction(Qs).objectStore(Qs).get(e);if(r)return r;{const i=await nq(t.appConfig.senderId);if(i)return await Zw(t,i),i}}async function Zw(t,e){const n=e0(t),i=(await Jw()).transaction(Qs,"readwrite");return await i.objectStore(Qs).put(e,n),await i.done,e}async function oq(t){const e=e0(t),r=(await Jw()).transaction(Qs,"readwrite");await r.objectStore(Qs).delete(e),await r.done}function e0({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Yt=new br("messaging","Messaging",aq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lq(t,e){const n=await n0(t),r=uR(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(t0(t.appConfig),i)).json()}catch(o){throw Yt.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw Yt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Yt.create("token-subscribe-no-token");return s.token}async function uq(t,e){const n=await n0(t),r=uR(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${t0(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Yt.create("token-update-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw Yt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Yt.create("token-update-no-token");return s.token}async function lR(t,e){const n=await n0(t),r={method:"DELETE",headers:n};try{const s=await(await fetch(`${t0(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw Yt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Yt.create("token-unsubscribe-failed",{errorInfo:i})}}function t0({projectId:t}){return`${Y3}/projects/${t}/registrations`}async function n0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function uR({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==sR&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq=7*24*60*60*1e3;async function hq(t){const e=await fq(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Rr(e.getKey("auth")),p256dh:Rr(e.getKey("p256dh"))},r=await aR(t.firebaseDependencies);if(r){if(pq(r.subscriptionOptions,n))return Date.now()>=r.createTime+cq?dq(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await lR(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return KI(t.firebaseDependencies,n)}else return KI(t.firebaseDependencies,n)}async function cR(t){const e=await aR(t.firebaseDependencies);e&&(await lR(t.firebaseDependencies,e.token),await oq(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function dq(t,e){try{const n=await uq(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Zw(t.firebaseDependencies,r),n}catch(n){throw await cR(t),n}}async function KI(t,e){const r={token:await lq(t,e),createTime:Date.now(),subscriptionOptions:e};return await Zw(t,r),r.token}async function fq(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:eq(e)})}function pq(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return mq(e,t),gq(e,t),yq(e,t),e}function mq(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function gq(t,e){!e.data||(t.data=e.data)}function yq(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t){return typeof t=="object"&&!!t&&oR in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");hR("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function hR(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(t){if(!t||!t.options)throw Qp("App Configuration Object");if(!t.name)throw Qp("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Qp(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Qp(t){return Yt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=wq(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t){var e;try{t.swRegistration=await navigator.serviceWorker.register(G3,{scope:Q3}),t.swRegistration.update().catch(()=>{})}catch(n){throw Yt.create("failed-service-worker-registration",{browserErrorMessage:(e=n)===null||e===void 0?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq(t,e){if(!e&&!t.swRegistration&&await dR(t),!(!e&&!!t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Yt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kq(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=sR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e){if(!navigator)throw Yt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Yt.create("permission-blocked");return await kq(t,e==null?void 0:e.vapidKey),await Iq(t,e==null?void 0:e.serviceWorkerRegistration),hq(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eq(t,e,n){const r=Sq(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[oR],message_name:n[X3],message_time:n[J3],message_device_time:Math.floor(Date.now()/1e3)})}function Sq(t){switch(t){case Ru.NOTIFICATION_CLICKED:return"notification_open";case Ru.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tq(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ru.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(WI(n)):t.onMessageHandler.next(WI(n)));const r=n.data;vq(r)&&r[Z3]==="1"&&await Eq(t,n.messageType,r)}const GI="@firebase/messaging",QI="0.9.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=t=>{const e=new _q(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Tq(e,n)),e},xq=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>fR(e,r)}};function Cq(){fn(new ut("messaging",bq,"PUBLIC")),fn(new ut("messaging-internal",xq,"PRIVATE")),Nt(GI,QI),Nt(GI,QI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aq(t){if(!navigator)throw Yt.create("only-available-in-window");return t.swRegistration||await dR(t),cR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t,e){if(!navigator)throw Yt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function Nq(t,e){return t=V(t),fR(t,e)}function Dq(t){return t=V(t),Aq(t)}function Pq(t,e){return t=V(t),Rq(t,e)}Cq();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Oq="https://fcmregistrations.googleapis.com/v1",mR="FCM_MSG",Lq="google.c.a.c_id",Mq=3,Fq=1;var pd;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(pd||(pd={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var md;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(md||(md={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $q(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="fcm_token_details_db",Uq=5,YI="fcm_token_object_Store";async function Bq(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Yp))return null;let e=null;return(await _a(Yp,Uq,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(YI))return;const l=o.objectStore(YI),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Nr(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Nr(c.auth),p256dh:Nr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Nr(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Nr(c.auth),p256dh:Nr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Nr(c.vapidKey)}}}}}})).close(),await Vo(Yp),await Vo("fcm_vapid_details_db"),await Vo("undefined"),Vq(e)?e:null}function Vq(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq="firebase-messaging-database",jq=1,Ys="firebase-messaging-store";let Xp=null;function r0(){return Xp||(Xp=_a(zq,jq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ys)}}})),Xp}async function i0(t){const e=o0(t),r=await(await r0()).transaction(Ys).objectStore(Ys).get(e);if(r)return r;{const i=await Bq(t.appConfig.senderId);if(i)return await s0(t,i),i}}async function s0(t,e){const n=o0(t),i=(await r0()).transaction(Ys,"readwrite");return await i.objectStore(Ys).put(e,n),await i.done,e}async function qq(t){const e=o0(t),r=(await r0()).transaction(Ys,"readwrite");await r.objectStore(Ys).delete(e),await r.done}function o0({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},_r=new br("messaging","Messaging",Hq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq(t,e){const n=await l0(t),r=yR(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(a0(t.appConfig),i)).json()}catch(o){throw _r.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw _r.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw _r.create("token-subscribe-no-token");return s.token}async function Wq(t,e){const n=await l0(t),r=yR(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${a0(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw _r.create("token-update-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw _r.create("token-update-failed",{errorInfo:o})}if(!s.token)throw _r.create("token-update-no-token");return s.token}async function gR(t,e){const n=await l0(t),r={method:"DELETE",headers:n};try{const s=await(await fetch(`${a0(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw _r.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw _r.create("token-unsubscribe-failed",{errorInfo:i})}}function a0({projectId:t}){return`${Oq}/projects/${t}/registrations`}async function l0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function yR({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==pR&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=7*24*60*60*1e3;async function Qq(t){const e=await Xq(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Nr(e.getKey("auth")),p256dh:Nr(e.getKey("p256dh"))},r=await i0(t.firebaseDependencies);if(r){if(Jq(r.subscriptionOptions,n))return Date.now()>=r.createTime+Gq?Yq(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await gR(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return XI(t.firebaseDependencies,n)}else return XI(t.firebaseDependencies,n)}async function qg(t){const e=await i0(t.firebaseDependencies);e&&(await gR(t.firebaseDependencies,e.token),await qq(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function Yq(t,e){try{const n=await Wq(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await s0(t.firebaseDependencies,r),n}catch(n){throw await qg(t),n}}async function XI(t,e){const r={token:await Kq(t,e),createTime:Date.now(),subscriptionOptions:e};return await s0(t,r),r.token}async function Xq(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$q(e)})}function Jq(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return e6(e,t),t6(e,t),n6(e,t),e}function e6(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function t6(t,e){!e.data||(t.data=e.data)}function n6(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){return typeof t=="object"&&!!t&&Lq in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");vR("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function s6(t,e){const n=o6(e,await t.firebaseDependencies.installations.getId());a6(t,n)}function o6(t,e){var n,r;const i={};return t.from&&(i.project_number=t.from),t.fcmMessageId&&(i.message_id=t.fcmMessageId),i.instance_id=e,t.notification?i.message_type=pd.DISPLAY_NOTIFICATION.toString():i.message_type=pd.DATA_MESSAGE.toString(),i.sdk_platform=Mq.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(i.collapse_key=t.collapse_key),i.event=Fq.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(i.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function a6(t,e){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(e),t.logEvents.push(n)}function vR(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e){var n,r;const{newSubscription:i}=t;if(!i){await qg(e);return}const s=await i0(e.firebaseDependencies);await qg(e),e.vapidKey=(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:pR,await Qq(e)}async function u6(t,e){const n=d6(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await s6(e,n);const r=await wR();if(p6(r))return m6(r,n);if(n.notification&&await g6(h6(n)),!!e&&e.onBackgroundMessageHandler){const i=Zq(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function c6(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[mR];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const i=y6(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await f6(s);if(a?a=await a.focus():(a=await self.clients.openWindow(i),await i6(3e3)),!!a)return r.messageType=md.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function h6(t){const e=Object.assign({},t.notification);return e.data={[mR]:t},e}function d6({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function f6(t){const e=await wR();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function p6(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function m6(t,e){e.isFirebaseMessaging=!0,e.messageType=md.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function wR(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function g6(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function y6(t){var e,n,r;const i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(r6(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(t){if(!t||!t.options)throw Jp("App Configuration Object");if(!t.name)throw Jp("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Jp(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Jp(t){return _r.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=v6(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=t=>{const e=new w6(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(u6(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(l6(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(c6(n))}),e};function I6(){fn(new ut("messaging-sw",_6,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t,e){if(self.document!==void 0)throw _r.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function E6(t,e){return t=V(t),k6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */I6();const S6="@firebase/messaging-compat",T6="0.1.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(){return self&&"ServiceWorkerGlobalScope"in self?C6():x6()}function x6(){return typeof window!="undefined"&&Rs()&&nO()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function C6(){return Rs()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class JI{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return Nq(this._delegate,e)}async deleteToken(){return Dq(this._delegate)}onMessage(e){return Pq(this._delegate,e)}onBackgroundMessage(e){return E6(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=t=>self&&"ServiceWorkerGlobalScope"in self?new JI(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new JI(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),R6={isSupported:b6};function N6(){ot.INTERNAL.registerComponent(new ut("messaging-compat",A6,"PUBLIC").setServiceProps(R6))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */N6();ot.registerVersion(S6,T6);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function D6(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function P6(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Po=function(){return Po=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Po.apply(this,arguments)},_R=function(t){return{loading:t==null,value:t}},O6=function(){return function(t,e){switch(e.type){case"error":return Po(Po({},t),{error:e.error,loading:!1,value:void 0});case"reset":return _R(e.defaultValue);case"value":return Po(Po({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},L6=function(t){var e=t?t():void 0,n=Re.exports.useReducer(O6(),_R(e)),r=n[0],i=n[1],s=function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},o=function(l){i({type:"error",error:l})},a=function(l){i({type:"value",value:l})};return Re.exports.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},Hg=function(t,e){var n=L6(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;Re.exports.useEffect(function(){var u=lV(t,function(c){return D6(void 0,void 0,void 0,function(){var h;return P6(this,function(d){switch(d.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return d.sent(),[3,4];case 3:return h=d.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){u()}},[t]);var l=[a,i,r];return Re.exports.useMemo(function(){return l},l)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Oo=function(){return Oo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Oo.apply(this,arguments)},IR=function(t){return{loading:t==null,value:t}},M6=function(){return function(t,e){switch(e.type){case"error":return Oo(Oo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return IR(e.defaultValue);case"value":return Oo(Oo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},F6=function(t){var e=t?t():void 0,n=Re.exports.useReducer(M6(),IR(e)),r=n[0],i=n[1],s=function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},o=function(l){i({type:"error",error:l})},a=function(l){i({type:"value",value:l})};return Re.exports.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},$6=function(t,e,n){var r=Re.exports.useRef(t);return Re.exports.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},U6=function(t,e){var n=!t&&!e,r=!!t&&!!e&&pw(t,e);return n||r},B6=function(t,e){return $6(t,U6,e)},V6=function(t,e){var n=F6(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,l=n.value,u=B6(t,s);Re.exports.useEffect(function(){if(!u.current){a(void 0);return}var h=e!=null&&e.snapshotListenOptions?ad(u.current,e.snapshotListenOptions,a,o):ad(u.current,a,o);return function(){h()}},[u.current]);var c=[l,i,r];return Re.exports.useMemo(function(){return c},c)},kR=function(t,e){var n=e==null?void 0:e.snapshotOptions,r=V6(t,e),i=r[0],s=r[1],o=r[2],a=z6(i,n),l=[a,s,o,i];return Re.exports.useMemo(function(){return l},l)},z6=function(t,e){return Re.exports.useMemo(function(){return t==null?void 0:t.docs.map(function(n){return n.data(e)})},[t,e])};const ZI=["http","https","mailto","tel"];function j6(t){const e=(t||"").trim(),n=e.charAt(0);if(n==="#"||n==="/")return e;const r=e.indexOf(":");if(r===-1)return e;let i=-1;for(;++i<ZI.length;){const s=ZI[i];if(r===s.length&&e.slice(0,s.length).toLowerCase()===s)return e}return i=e.indexOf("?"),i!==-1&&r>i||(i=e.indexOf("#"),i!==-1&&r>i)?e:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ER=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)};function $l(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?ek(t.position):"start"in t||"end"in t?ek(t):"line"in t||"column"in t?Kg(t):""}function Kg(t){return tk(t&&t.line)+":"+tk(t&&t.column)}function ek(t){return Kg(t&&t.start)+"-"+Kg(t&&t.end)}function tk(t){return t&&typeof t=="number"?t:1}class Vn extends Error{constructor(e,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=$l(n)||"1:1",this.message=typeof e=="object"?e.message:e,this.stack=typeof e=="object"?e.stack:"",this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.source=i[0],this.ruleId=i[1],this.position=s,this.actual,this.expected,this.file,this.url,this.note}}Vn.prototype.file="";Vn.prototype.name="";Vn.prototype.reason="";Vn.prototype.message="";Vn.prototype.stack="";Vn.prototype.fatal=null;Vn.prototype.column=null;Vn.prototype.line=null;Vn.prototype.source=null;Vn.prototype.ruleId=null;Vn.prototype.position=null;const ir={basename:q6,dirname:H6,extname:K6,join:W6,sep:"/"};function q6(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ac(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.charCodeAt(i)===e.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function H6(t){if(ac(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.charCodeAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.charCodeAt(0)===47?"/":".":e===1&&t.charCodeAt(0)===47?"//":t.slice(0,e)}function K6(t){ac(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.charCodeAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function W6(...t){let e=-1,n;for(;++e<t.length;)ac(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":G6(n)}function G6(t){ac(t);const e=t.charCodeAt(0)===47;let n=Q6(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.charCodeAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Q6(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function ac(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Y6={cwd:X6};function X6(){return"/"}function Wg(t){return t!==null&&typeof t=="object"&&t.href&&t.origin}function J6(t){if(typeof t=="string")t=new URL(t);else if(!Wg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Z6(t)}function Z6(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.charCodeAt(n)===37&&e.charCodeAt(n+1)===50){const r=e.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Zp=["history","path","basename","stem","extname","dirname"];class SR{constructor(e){let n;e?typeof e=="string"||ER(e)?n={value:e}:Wg(e)?n={path:e}:n=e:n={},this.data={},this.messages=[],this.history=[],this.cwd=Y6.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Zp.length;){const s=Zp[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Zp.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(e){Wg(e)&&(e=J6(e)),tm(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return typeof this.path=="string"?ir.dirname(this.path):void 0}set dirname(e){nk(this.basename,"dirname"),this.path=ir.join(e||"",this.basename)}get basename(){return typeof this.path=="string"?ir.basename(this.path):void 0}set basename(e){tm(e,"basename"),em(e,"basename"),this.path=ir.join(this.dirname||"",e)}get extname(){return typeof this.path=="string"?ir.extname(this.path):void 0}set extname(e){if(em(e,"extname"),nk(this.dirname,"extname"),e){if(e.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ir.join(this.dirname,this.stem+(e||""))}get stem(){return typeof this.path=="string"?ir.basename(this.path,this.extname):void 0}set stem(e){tm(e,"stem"),em(e,"stem"),this.path=ir.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e)}message(e,n,r){const i=new Vn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=null,i}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}}function em(t,e){if(t&&t.includes(ir.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ir.sep+"`")}function tm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function nk(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function rk(t){if(t)throw t}var ch=Object.prototype.hasOwnProperty,TR=Object.prototype.toString,ik=Object.defineProperty,sk=Object.getOwnPropertyDescriptor,ok=function(e){return typeof Array.isArray=="function"?Array.isArray(e):TR.call(e)==="[object Array]"},ak=function(e){if(!e||TR.call(e)!=="[object Object]")return!1;var n=ch.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&ch.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i=="undefined"||ch.call(e,i)},lk=function(e,n){ik&&n.name==="__proto__"?ik(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},uk=function(e,n){if(n==="__proto__")if(ch.call(e,n)){if(sk)return sk(e,n).value}else return;return e[n]},ck=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=uk(a,n),i=uk(e,n),a!==i&&(c&&i&&(ak(i)||(s=ok(i)))?(s?(s=!1,o=r&&ok(r)?r:[]):o=r&&ak(r)?r:{},lk(a,{name:n,newValue:t(c,o,i)})):typeof i!="undefined"&&lk(a,{name:n,newValue:i}));return a};function Gg(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function eH(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?tH(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function tH(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l instanceof Promise?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const nH=xR().freeze(),bR={}.hasOwnProperty;function xR(){const t=eH(),e=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=e,s.use=l,s.parse=u,s.stringify=c,s.run=h,s.runSync=d,s.process=f,s.processSync=p,s;function s(){const v=xR();let E=-1;for(;++E<e.length;)v.use(...e[E]);return v.data(ck(!0,{},n)),v}function o(v,E){return typeof v=="string"?arguments.length===2?(im("data",r),n[v]=E,s):bR.call(n,v)&&n[v]||null:v?(im("data",r),n=v,s):n}function a(){if(r)return s;for(;++i<e.length;){const[v,...E]=e[i];if(E[0]===!1)continue;E[0]===!0&&(E[0]=void 0);const m=v.call(s,...E);typeof m=="function"&&t.use(m)}return r=!0,i=Number.POSITIVE_INFINITY,s}function l(v,...E){let m;if(im("use",r),v!=null)if(typeof v=="function")b(v,...E);else if(typeof v=="object")Array.isArray(v)?S(v):g(v);else throw new TypeError("Expected usable value, not `"+v+"`");return m&&(n.settings=Object.assign(n.settings||{},m)),s;function y(k){if(typeof k=="function")b(k);else if(typeof k=="object")if(Array.isArray(k)){const[C,...R]=k;b(C,...R)}else g(k);else throw new TypeError("Expected usable value, not `"+k+"`")}function g(k){S(k.plugins),k.settings&&(m=Object.assign(m||{},k.settings))}function S(k){let C=-1;if(k!=null)if(Array.isArray(k))for(;++C<k.length;){const R=k[C];y(R)}else throw new TypeError("Expected a list of plugins, not `"+k+"`")}function b(k,C){let R=-1,H;for(;++R<e.length;)if(e[R][0]===k){H=e[R];break}H?(Gg(H[1])&&Gg(C)&&(C=ck(!0,H[1],C)),H[1]=C):e.push([...arguments])}}function u(v){s.freeze();const E=ol(v),m=s.Parser;return nm("parse",m),hk(m,"parse")?new m(String(E),E).parse():m(String(E),E)}function c(v,E){s.freeze();const m=ol(E),y=s.Compiler;return rm("stringify",y),dk(v),hk(y,"compile")?new y(v,m).compile():y(v,m)}function h(v,E,m){if(dk(v),s.freeze(),!m&&typeof E=="function"&&(m=E,E=void 0),!m)return new Promise(y);y(null,m);function y(g,S){t.run(v,ol(E),b);function b(k,C,R){C=C||v,k?S(k):g?g(C):m(null,C,R)}}}function d(v,E){let m,y;return s.run(v,E,g),fk("runSync","run",y),m;function g(S,b){rk(S),m=b,y=!0}}function f(v,E){if(s.freeze(),nm("process",s.Parser),rm("process",s.Compiler),!E)return new Promise(m);m(null,E);function m(y,g){const S=ol(v);s.run(s.parse(S),S,(k,C,R)=>{if(k||!C||!R)b(k);else{const H=s.stringify(C,R);H==null||(sH(H)?R.value=H:R.result=H),b(k,R)}});function b(k,C){k||!C?g(k):y?y(C):E(null,C)}}}function p(v){let E;s.freeze(),nm("processSync",s.Parser),rm("processSync",s.Compiler);const m=ol(v);return s.process(m,y),fk("processSync","process",E),m;function y(g){E=!0,rk(g)}}}function hk(t,e){return typeof t=="function"&&t.prototype&&(rH(t.prototype)||e in t.prototype)}function rH(t){let e;for(e in t)if(bR.call(t,e))return!0;return!1}function nm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `Parser`")}function rm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `Compiler`")}function im(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function dk(t){if(!Gg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function fk(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function ol(t){return iH(t)?t:new SR(t)}function iH(t){return Boolean(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function sH(t){return typeof t=="string"||ER(t)}function oH(t,e){var{includeImageAlt:n=!0}=e||{};return CR(t,n)}function CR(t,e){return t&&typeof t=="object"&&(t.value||(e?t.alt:"")||"children"in t&&pk(t.children,e)||Array.isArray(t)&&pk(t,e))||""}function pk(t,e){for(var n=[],r=-1;++r<t.length;)n[r]=CR(t[r],e);return n.join("")}function Tr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),[].splice.apply(t,o);else for(n&&[].splice.apply(t,[e,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),[].splice.apply(t,o),s+=1e4,e+=1e4}function Rn(t,e){return t.length>0?(Tr(t,t.length,0,e),t):e}const mk={}.hasOwnProperty;function aH(t){const e={};let n=-1;for(;++n<t.length;)lH(e,t[n]);return e}function lH(t,e){let n;for(n in e){const i=(mk.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;for(o in s){mk.call(i,o)||(i[o]=[]);const a=s[o];uH(i[o],Array.isArray(a)?a:a?[a]:[])}}}function uH(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Tr(t,0,0,r)}const cH=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,hr=Xi(/[A-Za-z]/),Qg=Xi(/\d/),hH=Xi(/[\dA-Fa-f]/),wn=Xi(/[\dA-Za-z]/),dH=Xi(/[!-/:-@[-`{-~]/),gk=Xi(/[#-'*+\--9=?A-Z^-~]/);function Yg(t){return t!==null&&(t<32||t===127)}function Mn(t){return t!==null&&(t<0||t===32)}function Z(t){return t!==null&&t<-2}function He(t){return t===-2||t===-1||t===32}const fH=Xi(/\s/),pH=Xi(cH);function Xi(t){return e;function e(n){return n!==null&&t.test(String.fromCharCode(n))}}function ve(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return He(l)?(t.enter(n),a(l)):e(l)}function a(l){return He(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const mH={tokenize:gH};function gH(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),ve(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Z(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const yH={tokenize:vH},yk={tokenize:wH};function vH(t){const e=this,n=[];let r=0,i,s,o;return a;function a(g){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,l,u)(g)}return u(g)}function l(g){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&y();const S=e.events.length;let b=S,k;for(;b--;)if(e.events[b][0]==="exit"&&e.events[b][1].type==="chunkFlow"){k=e.events[b][1].end;break}m(r);let C=S;for(;C<e.events.length;)e.events[C][1].end=Object.assign({},k),C++;return Tr(e.events,b+1,0,e.events.slice(S)),e.events.length=C,u(g)}return a(g)}function u(g){if(r===n.length){if(!i)return d(g);if(i.currentConstruct&&i.currentConstruct.concrete)return p(g);e.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(yk,c,h)(g)}function c(g){return i&&y(),m(r),d(g)}function h(g){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(g)}function d(g){return e.containerState={},t.attempt(yk,f,p)(g)}function f(g){return r++,n.push([e.currentConstruct,e.containerState]),d(g)}function p(g){if(g===null){i&&y(),m(0),t.consume(g);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),v(g)}function v(g){if(g===null){E(t.exit("chunkFlow"),!0),m(0),t.consume(g);return}return Z(g)?(t.consume(g),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(g),v)}function E(g,S){const b=e.sliceStream(g);if(S&&b.push(null),g.previous=s,s&&(s.next=g),s=g,i.defineSkip(g.start),i.write(b),e.parser.lazy[g.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<o&&(!i.events[k][1].end||i.events[k][1].end.offset>o))return;const C=e.events.length;let R=C,H,G;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(H){G=e.events[R][1].end;break}H=!0}for(m(r),k=C;k<e.events.length;)e.events[k][1].end=Object.assign({},G),k++;Tr(e.events,R+1,0,e.events.slice(C)),e.events.length=k}}function m(g){let S=n.length;for(;S-- >g;){const b=n[S];e.containerState=b[1],b[0].exit.call(e,t)}n.length=g}function y(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function wH(t,e,n){return ve(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function vk(t){if(t===null||Mn(t)||fH(t))return 1;if(pH(t))return 2}function u0(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Xg={name:"attention",tokenize:IH,resolveAll:_H};function _H(t,e){let n=-1,r,i,s,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h=Object.assign({},t[r][1].end),d=Object.assign({},t[n][1].start);wk(h,-l),wk(d,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},t[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[n][1].start),end:d},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},t[r][1].end),end:Object.assign({},t[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},t[r][1].end=Object.assign({},o.start),t[n][1].start=Object.assign({},a.end),u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=Rn(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=Rn(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=Rn(u,u0(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=Rn(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=Rn(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,Tr(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function IH(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=vk(r);let s;return o;function o(l){return t.enter("attentionSequence"),s=l,a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),c=vk(l),h=!c||c===2&&i||n.includes(l),d=!i||i===2&&c||n.includes(r);return u._open=Boolean(s===42?h:h&&(i||!d)),u._close=Boolean(s===42?d:d&&(c||!h)),e(l)}}function wk(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const kH={name:"autolink",tokenize:EH};function EH(t,e,n){let r=1;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return hr(p)?(t.consume(p),o):gk(p)?u(p):n(p)}function o(p){return p===43||p===45||p===46||wn(p)?a(p):u(p)}function a(p){return p===58?(t.consume(p),l):(p===43||p===45||p===46||wn(p))&&r++<32?(t.consume(p),a):u(p)}function l(p){return p===62?(t.exit("autolinkProtocol"),f(p)):p===null||p===32||p===60||Yg(p)?n(p):(t.consume(p),l)}function u(p){return p===64?(t.consume(p),r=0,c):gk(p)?(t.consume(p),u):n(p)}function c(p){return wn(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,c):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",f(p)):d(p)}function d(p){return(p===45||wn(p))&&r++<63?(t.consume(p),p===45?d:h):n(p)}function f(p){return t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e}}const Cf={tokenize:SH,partial:!0};function SH(t,e,n){return ve(t,r,"linePrefix");function r(i){return i===null||Z(i)?e(i):n(i)}}const AR={name:"blockQuote",tokenize:TH,continuation:{tokenize:bH},exit:xH};function TH(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return He(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function bH(t,e,n){return ve(t,t.attempt(AR,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function xH(t){t.exit("blockQuote")}const RR={name:"characterEscape",tokenize:CH};function CH(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return dH(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const _k=document.createElement("i");function c0(t){const e="&"+t+";";_k.innerHTML=e;const n=_k.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}const NR={name:"characterReference",tokenize:AH};function AH(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=wn,c(h))}function u(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=hH,c):(t.enter("characterReferenceValue"),s=7,o=Qg,c(h))}function c(h){let d;return h===59&&i?(d=t.exit("characterReferenceValue"),o===wn&&!c0(r.sliceSerialize(d))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)):o(h)&&i++<s?(t.consume(h),c):n(h)}}const Ik={name:"codeFenced",tokenize:RH,concrete:!0};function RH(t,e,n){const r=this,i={tokenize:b,partial:!0},s={tokenize:S,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let l=0,u;return c;function c(k){return t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u=k,h(k)}function h(k){return k===u?(t.consume(k),l++,h):(t.exit("codeFencedFenceSequence"),l<3?n(k):ve(t,d,"whitespace")(k))}function d(k){return k===null||Z(k)?E(k):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(k))}function f(k){return k===null||Mn(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ve(t,p,"whitespace")(k)):k===96&&k===u?n(k):(t.consume(k),f)}function p(k){return k===null||Z(k)?E(k):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(k))}function v(k){return k===null||Z(k)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),E(k)):k===96&&k===u?n(k):(t.consume(k),v)}function E(k){return t.exit("codeFencedFence"),r.interrupt?e(k):m(k)}function m(k){return k===null?g(k):Z(k)?t.attempt(s,t.attempt(i,g,a?ve(t,m,"linePrefix",a+1):m),g)(k):(t.enter("codeFlowValue"),y(k))}function y(k){return k===null||Z(k)?(t.exit("codeFlowValue"),m(k)):(t.consume(k),y)}function g(k){return t.exit("codeFenced"),e(k)}function S(k,C,R){const H=this;return G;function G(Y){return k.enter("lineEnding"),k.consume(Y),k.exit("lineEnding"),U}function U(Y){return H.parser.lazy[H.now().line]?R(Y):C(Y)}}function b(k,C,R){let H=0;return ve(k,G,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function G(te){return k.enter("codeFencedFence"),k.enter("codeFencedFenceSequence"),U(te)}function U(te){return te===u?(k.consume(te),H++,U):H<l?R(te):(k.exit("codeFencedFenceSequence"),ve(k,Y,"whitespace")(te))}function Y(te){return te===null||Z(te)?(k.exit("codeFencedFence"),C(te)):R(te)}}}const sm={name:"codeIndented",tokenize:DH},NH={tokenize:PH,partial:!0};function DH(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),ve(t,s,"linePrefix",4+1)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):Z(u)?t.attempt(NH,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||Z(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function PH(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Z(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):ve(t,s,"linePrefix",4+1)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Z(o)?i(o):n(o)}}const OH={name:"codeText",tokenize:FH,resolve:LH,previous:MH};function LH(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function MH(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function FH(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===96?(s=t.enter("codeTextSequence"),i=0,c(h)):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):Z(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||Z(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),u)}function c(h){return h===96?(t.consume(h),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}function DR(t){const e={};let n=-1,r,i,s,o,a,l,u;for(;++n<t.length;){for(;n in e;)n=e[n];if(r=t[n],n&&r[1].type==="chunkFlow"&&t[n-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,$H(t,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=t[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(t[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},t[i][1].start),a=t.slice(i,n),a.unshift(r),Tr(t,i,n-i+1,a))}}return!u}function $H(t,e){const n=t[e][1],r=t[e][2];let i=e-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],u={};let c,h,d=-1,f=n,p=0,v=0;const E=[v];for(;f;){for(;t[++i][1]!==f;);s.push(i),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(v=d+1,E.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):E.pop(),d=E.length;d--;){const m=a.slice(E[d],E[d+1]),y=s.pop();l.unshift([y,y+m.length-1]),Tr(t,y,2,m)}for(d=-1;++d<l.length;)u[p+l[d][0]]=p+l[d][1],p+=l[d][1]-l[d][0]-1;return u}const UH={tokenize:zH,resolve:VH},BH={tokenize:jH,partial:!0};function VH(t){return DR(t),t}function zH(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Z(a)?t.check(BH,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function jH(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ve(t,s,"linePrefix")}function s(o){if(o===null||Z(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function PR(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(m){return m===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(m),t.exit(s),d):m===null||m===41||Yg(m)?n(m):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(m))}function d(m){return m===62?(t.enter(s),t.consume(m),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===62?(t.exit("chunkString"),t.exit(a),d(m)):m===null||m===60||Z(m)?n(m):(t.consume(m),m===92?p:f)}function p(m){return m===60||m===62||m===92?(t.consume(m),f):f(m)}function v(m){return m===40?++c>u?n(m):(t.consume(m),v):m===41?c--?(t.consume(m),v):(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(m)):m===null||Mn(m)?c?n(m):(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(m)):Yg(m)?n(m):(t.consume(m),m===92?E:v)}function E(m){return m===40||m===41||m===92?(t.consume(m),v):v(m)}}function OR(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(s),c}function c(f){return f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(f):f===93?(t.exit(s),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):Z(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||Z(f)||a++>999?(t.exit("chunkString"),c(f)):(t.consume(f),l=l||!He(f),f===92?d:h)}function d(f){return f===91||f===92||f===93?(t.consume(f),a++,h):h(f)}}function LR(t,e,n,r,i,s){let o;return a;function a(d){return t.enter(r),t.enter(i),t.consume(d),t.exit(i),o=d===40?41:d,l}function l(d){return d===o?(t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):(t.enter(s),u(d))}function u(d){return d===o?(t.exit(s),l(o)):d===null?n(d):Z(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),ve(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Z(d)?(t.exit("chunkString"),u(d)):(t.consume(d),d===92?h:c)}function h(d){return d===o||d===92?(t.consume(d),c):c(d)}}function Ul(t,e){let n;return r;function r(i){return Z(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):He(i)?ve(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}function Qo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const qH={name:"definition",tokenize:KH},HH={tokenize:WH,partial:!0};function KH(t,e,n){const r=this;let i;return s;function s(l){return t.enter("definition"),OR.call(r,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(l)}function o(l){return i=Qo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),l===58?(t.enter("definitionMarker"),t.consume(l),t.exit("definitionMarker"),Ul(t,PR(t,t.attempt(HH,ve(t,a,"whitespace"),ve(t,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(l)}function a(l){return l===null||Z(l)?(t.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),e(l)):n(l)}}function WH(t,e,n){return r;function r(o){return Mn(o)?Ul(t,i)(o):n(o)}function i(o){return o===34||o===39||o===40?LR(t,ve(t,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||Z(o)?e(o):n(o)}}const GH={name:"hardBreakEscape",tokenize:QH};function QH(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.enter("escapeMarker"),t.consume(s),i}function i(s){return Z(s)?(t.exit("escapeMarker"),t.exit("hardBreakEscape"),e(s)):n(s)}}const YH={name:"headingAtx",tokenize:JH,resolve:XH};function XH(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Tr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function JH(t,e,n){const r=this;let i=0;return s;function s(c){return t.enter("atxHeading"),t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(t.consume(c),o):c===null||Mn(c)?(t.exit("atxHeadingSequence"),r.interrupt?e(c):a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||Z(c)?(t.exit("atxHeading"),e(c)):He(c)?ve(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Mn(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const ZH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],kk=["pre","script","style","textarea"],eK={name:"htmlFlow",tokenize:rK,resolveTo:nK,concrete:!0},tK={tokenize:iK,partial:!0};function nK(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function rK(t,e,n){const r=this;let i,s,o,a,l;return u;function u(I){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(I),c}function c(I){return I===33?(t.consume(I),h):I===47?(t.consume(I),p):I===63?(t.consume(I),i=3,r.interrupt?e:Q):hr(I)?(t.consume(I),o=String.fromCharCode(I),s=!0,v):n(I)}function h(I){return I===45?(t.consume(I),i=2,d):I===91?(t.consume(I),i=5,o="CDATA[",a=0,f):hr(I)?(t.consume(I),i=4,r.interrupt?e:Q):n(I)}function d(I){return I===45?(t.consume(I),r.interrupt?e:Q):n(I)}function f(I){return I===o.charCodeAt(a++)?(t.consume(I),a===o.length?r.interrupt?e:U:f):n(I)}function p(I){return hr(I)?(t.consume(I),o=String.fromCharCode(I),v):n(I)}function v(I){return I===null||I===47||I===62||Mn(I)?I!==47&&s&&kk.includes(o.toLowerCase())?(i=1,r.interrupt?e(I):U(I)):ZH.includes(o.toLowerCase())?(i=6,I===47?(t.consume(I),E):r.interrupt?e(I):U(I)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):s?y(I):m(I)):I===45||wn(I)?(t.consume(I),o+=String.fromCharCode(I),v):n(I)}function E(I){return I===62?(t.consume(I),r.interrupt?e:U):n(I)}function m(I){return He(I)?(t.consume(I),m):H(I)}function y(I){return I===47?(t.consume(I),H):I===58||I===95||hr(I)?(t.consume(I),g):He(I)?(t.consume(I),y):H(I)}function g(I){return I===45||I===46||I===58||I===95||wn(I)?(t.consume(I),g):S(I)}function S(I){return I===61?(t.consume(I),b):He(I)?(t.consume(I),S):y(I)}function b(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),l=I,k):He(I)?(t.consume(I),b):(l=null,C(I))}function k(I){return I===null||Z(I)?n(I):I===l?(t.consume(I),R):(t.consume(I),k)}function C(I){return I===null||I===34||I===39||I===60||I===61||I===62||I===96||Mn(I)?S(I):(t.consume(I),C)}function R(I){return I===47||I===62||He(I)?y(I):n(I)}function H(I){return I===62?(t.consume(I),G):n(I)}function G(I){return He(I)?(t.consume(I),G):I===null||Z(I)?U(I):n(I)}function U(I){return I===45&&i===2?(t.consume(I),Zt):I===60&&i===1?(t.consume(I),en):I===62&&i===4?(t.consume(I),W):I===63&&i===3?(t.consume(I),Q):I===93&&i===5?(t.consume(I),M):Z(I)&&(i===6||i===7)?t.check(tK,W,Y)(I):I===null||Z(I)?Y(I):(t.consume(I),U)}function Y(I){return t.exit("htmlFlowData"),te(I)}function te(I){return I===null?w(I):Z(I)?t.attempt({tokenize:Qe,partial:!0},te,w)(I):(t.enter("htmlFlowData"),U(I))}function Qe(I,qn,pn){return tr;function tr(Ft){return I.enter("lineEnding"),I.consume(Ft),I.exit("lineEnding"),ye}function ye(Ft){return r.parser.lazy[r.now().line]?pn(Ft):qn(Ft)}}function Zt(I){return I===45?(t.consume(I),Q):U(I)}function en(I){return I===47?(t.consume(I),o="",Mt):U(I)}function Mt(I){return I===62&&kk.includes(o.toLowerCase())?(t.consume(I),W):hr(I)&&o.length<8?(t.consume(I),o+=String.fromCharCode(I),Mt):U(I)}function M(I){return I===93?(t.consume(I),Q):U(I)}function Q(I){return I===62?(t.consume(I),W):I===45&&i===2?(t.consume(I),Q):U(I)}function W(I){return I===null||Z(I)?(t.exit("htmlFlowData"),w(I)):(t.consume(I),W)}function w(I){return t.exit("htmlFlow"),e(I)}}function iK(t,e,n){return r;function r(i){return t.exit("htmlFlowData"),t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),t.attempt(Cf,e,n)}}const sK={name:"htmlText",tokenize:oK};function oK(t,e,n){const r=this;let i,s,o,a;return l;function l(w){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(w),u}function u(w){return w===33?(t.consume(w),c):w===47?(t.consume(w),C):w===63?(t.consume(w),b):hr(w)?(t.consume(w),G):n(w)}function c(w){return w===45?(t.consume(w),h):w===91?(t.consume(w),s="CDATA[",o=0,E):hr(w)?(t.consume(w),S):n(w)}function h(w){return w===45?(t.consume(w),d):n(w)}function d(w){return w===null||w===62?n(w):w===45?(t.consume(w),f):p(w)}function f(w){return w===null||w===62?n(w):p(w)}function p(w){return w===null?n(w):w===45?(t.consume(w),v):Z(w)?(a=p,M(w)):(t.consume(w),p)}function v(w){return w===45?(t.consume(w),W):p(w)}function E(w){return w===s.charCodeAt(o++)?(t.consume(w),o===s.length?m:E):n(w)}function m(w){return w===null?n(w):w===93?(t.consume(w),y):Z(w)?(a=m,M(w)):(t.consume(w),m)}function y(w){return w===93?(t.consume(w),g):m(w)}function g(w){return w===62?W(w):w===93?(t.consume(w),g):m(w)}function S(w){return w===null||w===62?W(w):Z(w)?(a=S,M(w)):(t.consume(w),S)}function b(w){return w===null?n(w):w===63?(t.consume(w),k):Z(w)?(a=b,M(w)):(t.consume(w),b)}function k(w){return w===62?W(w):b(w)}function C(w){return hr(w)?(t.consume(w),R):n(w)}function R(w){return w===45||wn(w)?(t.consume(w),R):H(w)}function H(w){return Z(w)?(a=H,M(w)):He(w)?(t.consume(w),H):W(w)}function G(w){return w===45||wn(w)?(t.consume(w),G):w===47||w===62||Mn(w)?U(w):n(w)}function U(w){return w===47?(t.consume(w),W):w===58||w===95||hr(w)?(t.consume(w),Y):Z(w)?(a=U,M(w)):He(w)?(t.consume(w),U):W(w)}function Y(w){return w===45||w===46||w===58||w===95||wn(w)?(t.consume(w),Y):te(w)}function te(w){return w===61?(t.consume(w),Qe):Z(w)?(a=te,M(w)):He(w)?(t.consume(w),te):U(w)}function Qe(w){return w===null||w===60||w===61||w===62||w===96?n(w):w===34||w===39?(t.consume(w),i=w,Zt):Z(w)?(a=Qe,M(w)):He(w)?(t.consume(w),Qe):(t.consume(w),i=void 0,Mt)}function Zt(w){return w===i?(t.consume(w),en):w===null?n(w):Z(w)?(a=Zt,M(w)):(t.consume(w),Zt)}function en(w){return w===62||w===47||Mn(w)?U(w):n(w)}function Mt(w){return w===null||w===34||w===39||w===60||w===61||w===96?n(w):w===62||Mn(w)?U(w):(t.consume(w),Mt)}function M(w){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),ve(t,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Q(w){return t.enter("htmlTextData"),a(w)}function W(w){return w===62?(t.consume(w),t.exit("htmlTextData"),t.exit("htmlText"),e):n(w)}}const h0={name:"labelEnd",tokenize:dK,resolveTo:hK,resolveAll:cK},aK={tokenize:fK},lK={tokenize:pK},uK={tokenize:mK};function cK(t){let e=-1,n;for(;++e<t.length;)n=t[e][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(t.splice(e+1,n.type==="labelImage"?4:2),n.type="data",e++);return t}function hK(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:Object.assign({},t[s][1].start),end:Object.assign({},t[t.length-1][1].end)},u={type:"label",start:Object.assign({},t[s][1].start),end:Object.assign({},t[o][1].end)},c={type:"labelText",start:Object.assign({},t[s+r+2][1].end),end:Object.assign({},t[o-2][1].start)};return a=[["enter",l,e],["enter",u,e]],a=Rn(a,t.slice(s+1,s+r+3)),a=Rn(a,[["enter",c,e]]),a=Rn(a,u0(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Rn(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=Rn(a,t.slice(o+1)),a=Rn(a,[["exit",l,e]]),Tr(t,s,t.length,a),t}function dK(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?u(c):(o=r.parser.defined.includes(Qo(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelEnd"),l):n(c)}function l(c){return c===40?t.attempt(aK,e,o?e:u)(c):c===91?t.attempt(lK,e,o?t.attempt(uK,e,u):u)(c):o?e(c):u(c)}function u(c){return s._balanced=!0,n(c)}}function fK(t,e,n){return r;function r(l){return t.enter("resource"),t.enter("resourceMarker"),t.consume(l),t.exit("resourceMarker"),Ul(t,i)}function i(l){return l===41?a(l):PR(t,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(l)}function s(l){return Mn(l)?Ul(t,o)(l):a(l)}function o(l){return l===34||l===39||l===40?LR(t,Ul(t,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(l):a(l)}function a(l){return l===41?(t.enter("resourceMarker"),t.consume(l),t.exit("resourceMarker"),t.exit("resource"),e):n(l)}}function pK(t,e,n){const r=this;return i;function i(o){return OR.call(r,t,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Qo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):n(o)}}function mK(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const gK={name:"labelStartImage",tokenize:yK,resolveAll:h0.resolveAll};function yK(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const vK={name:"labelStartLink",tokenize:wK,resolveAll:h0.resolveAll};function wK(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const om={name:"lineEnding",tokenize:_K};function _K(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),ve(t,e,"linePrefix")}}const hh={name:"thematicBreak",tokenize:IK};function IK(t,e,n){let r=0,i;return s;function s(l){return t.enter("thematicBreak"),i=l,o(l)}function o(l){return l===i?(t.enter("thematicBreakSequence"),a(l)):He(l)?ve(t,o,"whitespace")(l):r<3||l!==null&&!Z(l)?n(l):(t.exit("thematicBreak"),e(l))}function a(l){return l===i?(t.consume(l),r++,a):(t.exit("thematicBreakSequence"),o(l))}}const tn={name:"list",tokenize:SK,continuation:{tokenize:TK},exit:xK},kK={tokenize:CK,partial:!0},EK={tokenize:bK,partial:!0};function SK(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Qg(f)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(hh,n,u)(f):u(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return Qg(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),u(f)):n(f)}function u(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(Cf,r.interrupt?n:c,t.attempt(kK,d,h))}function c(f){return r.containerState.initialBlankLine=!0,s++,d(f)}function h(f){return He(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),d):n(f)}function d(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function TK(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Cf,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ve(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!He(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(EK,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ve(t,t.attempt(tn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function bK(t,e,n){const r=this;return ve(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function xK(t){t.exit(this.containerState.type)}function CK(t,e,n){const r=this;return ve(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(s){const o=r.events[r.events.length-1];return!He(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Ek={name:"setextUnderline",tokenize:RK,resolveTo:AK};function AK(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},t[i][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end=Object.assign({},t[s][1].end)):t[r][1]=o,t.push(["exit",o,e]),t}function RK(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(t.enter("setextHeadingLine"),t.enter("setextHeadingLineSequence"),s=c,l(c)):n(c)}function l(c){return c===s?(t.consume(c),l):(t.exit("setextHeadingLineSequence"),ve(t,u,"lineSuffix")(c))}function u(c){return c===null||Z(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const NK={tokenize:DK};function DK(t){const e=this,n=t.attempt(Cf,r,t.attempt(this.parser.constructs.flowInitial,i,ve(t,t.attempt(this.parser.constructs.flow,i,t.attempt(UH,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const PK={resolveAll:FR()},OK=MR("string"),LK=MR("text");function MR(t){return{tokenize:e,resolveAll:FR(t==="text"?MK:void 0)};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let d=-1;if(h)for(;++d<h.length;){const f=h[d];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function FR(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function MK(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}function FK(t,e,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const l={consume:y,enter:g,exit:S,attempt:C(b),check:C(k),interrupt:C(k,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:f,sliceSerialize:d,now:p,defineSkip:v,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(U){return o=Rn(o,U),E(),o[o.length-1]!==null?[]:(R(e,0),u.events=u0(s,u.events,u),u.events)}function d(U,Y){return UK(f(U),Y)}function f(U){return $K(o,U)}function p(){return Object.assign({},r)}function v(U){i[U.line]=U.column,G()}function E(){let U;for(;r._index<o.length;){const Y=o[r._index];if(typeof Y=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<Y.length;)m(Y.charCodeAt(r._bufferIndex));else m(Y)}}function m(U){c=c(U)}function y(U){Z(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,G()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=U}function g(U,Y){const te=Y||{};return te.type=U,te.start=p(),u.events.push(["enter",te,u]),a.push(te),te}function S(U){const Y=a.pop();return Y.end=p(),u.events.push(["exit",Y,u]),Y}function b(U,Y){R(U,Y.from)}function k(U,Y){Y.restore()}function C(U,Y){return te;function te(Qe,Zt,en){let Mt,M,Q,W;return Array.isArray(Qe)?I(Qe):"tokenize"in Qe?I([Qe]):w(Qe);function w(ye){return Ft;function Ft(xr){const ao=xr!==null&&ye[xr],lo=xr!==null&&ye.null,Kf=[...Array.isArray(ao)?ao:ao?[ao]:[],...Array.isArray(lo)?lo:lo?[lo]:[]];return I(Kf)(xr)}}function I(ye){return Mt=ye,M=0,ye.length===0?en:qn(ye[M])}function qn(ye){return Ft;function Ft(xr){return W=H(),Q=ye,ye.partial||(u.currentConstruct=ye),ye.name&&u.parser.constructs.disable.null.includes(ye.name)?tr():ye.tokenize.call(Y?Object.assign(Object.create(u),Y):u,l,pn,tr)(xr)}}function pn(ye){return U(Q,W),Zt}function tr(ye){return W.restore(),++M<Mt.length?qn(Mt[M]):en}}}function R(U,Y){U.resolveAll&&!s.includes(U)&&s.push(U),U.resolve&&Tr(u.events,Y,u.events.length-Y,U.resolve(u.events.slice(Y),u)),U.resolveTo&&(u.events=U.resolveTo(u.events,u))}function H(){const U=p(),Y=u.previous,te=u.currentConstruct,Qe=u.events.length,Zt=Array.from(a);return{restore:en,from:Qe};function en(){r=U,u.previous=Y,u.currentConstruct=te,u.events.length=Qe,a=Zt,G()}}function G(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function $K(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;return n===i?o=[t[n].slice(r,s)]:(o=t.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(t[i].slice(0,s))),o}function UK(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const BK={[42]:tn,[43]:tn,[45]:tn,[48]:tn,[49]:tn,[50]:tn,[51]:tn,[52]:tn,[53]:tn,[54]:tn,[55]:tn,[56]:tn,[57]:tn,[62]:AR},VK={[91]:qH},zK={[-2]:sm,[-1]:sm,[32]:sm},jK={[35]:YH,[42]:hh,[45]:[Ek,hh],[60]:eK,[61]:Ek,[95]:hh,[96]:Ik,[126]:Ik},qK={[38]:NR,[92]:RR},HK={[-5]:om,[-4]:om,[-3]:om,[33]:gK,[38]:NR,[42]:Xg,[60]:[kH,sK],[91]:vK,[92]:[GH,RR],[93]:h0,[95]:Xg,[96]:OH},KK={null:[Xg,PK]},WK={null:[42,95]},GK={null:[]};var QK=Object.freeze(Object.defineProperty({__proto__:null,document:BK,contentInitial:VK,flowInitial:zK,flow:jK,string:qK,text:HK,insideSpan:KK,attentionMarkers:WK,disable:GK},Symbol.toStringTag,{value:"Module"}));function YK(t={}){const e=aH([QK].concat(t.extensions||[])),n={defined:[],lazy:{},constructs:e,content:r(mH),document:r(yH),flow:r(NK),string:r(OK),text:r(LK)};return n;function r(i){return s;function s(o){return FK(n,i,o)}}}const Sk=/[\0\t\n\r]/g;function XK(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,h,d,f;for(s=e+s.toString(o),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(Sk.lastIndex=h,u=Sk.exec(s),d=u&&u.index!==void 0?u.index:s.length,f=s.charCodeAt(d),!u){e=s.slice(h);break}if(f===10&&h===d&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<d&&(l.push(s.slice(h,d)),t+=d-h),f){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=d+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}function JK(t){for(;!DR(t););return t}function $R(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCharCode(n)}const ZK=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eW(t){return t.replace(ZK,tW)}function tW(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return $R(n.slice(s?2:1),s?16:10)}return c0(n)||t}const Jg={}.hasOwnProperty,nW=function(t,e,n){return typeof e!="string"&&(n=e,e=void 0),rW(n)(JK(YK(n).document().write(XK()(t,e,!0))))};function rW(t={}){const e=UR({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(I0),autolinkProtocol:Y,autolinkEmail:Y,atxHeading:l(v0),blockQuote:l(pN),characterEscape:Y,characterReference:Y,codeFenced:l(y0),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(y0,u),codeText:l(mN,u),codeTextData:Y,data:Y,codeFlowValue:Y,definition:l(gN),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(yN),hardBreakEscape:l(w0),hardBreakTrailing:l(w0),htmlFlow:l(_0,u),htmlFlowData:Y,htmlText:l(_0,u),htmlTextData:Y,image:l(vN),label:u,link:l(I0),listItem:l(wN),listItemValue:v,listOrdered:l(k0,p),listUnordered:l(k0),paragraph:l(_N),reference:ye,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(v0),strong:l(IN),thematicBreak:l(EN)},exit:{atxHeading:h(),atxHeadingSequence:R,autolink:h(),autolinkEmail:Kf,autolinkProtocol:lo,blockQuote:h(),characterEscapeValue:te,characterReferenceMarkerHexadecimal:xr,characterReferenceMarkerNumeric:xr,characterReferenceValue:ao,codeFenced:h(g),codeFencedFence:y,codeFencedFenceInfo:E,codeFencedFenceMeta:m,codeFlowValue:te,codeIndented:h(S),codeText:h(M),codeTextData:te,data:te,definition:h(),definitionDestinationString:C,definitionLabelString:b,definitionTitleString:k,emphasis:h(),hardBreakEscape:h(Zt),hardBreakTrailing:h(Zt),htmlFlow:h(en),htmlFlowData:te,htmlText:h(Mt),htmlTextData:te,image:h(W),label:I,labelText:w,lineEnding:Qe,link:h(Q),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:Ft,resourceDestinationString:qn,resourceTitleString:pn,resource:tr,setextHeading:h(U),setextHeadingLineSequence:G,setextHeadingText:H,strong:h(),thematicBreak:h()}},t.mdastExtensions||[]),n={};return r;function r(A){let $={type:"root",children:[]};const re=[$],me=[],xn=[],$a={stack:re,tokenStack:me,config:e,enter:c,exit:d,buffer:u,resume:f,setData:s,getData:o};let Ie=-1;for(;++Ie<A.length;)if(A[Ie][1].type==="listOrdered"||A[Ie][1].type==="listUnordered")if(A[Ie][0]==="enter")xn.push(Ie);else{const mt=xn.pop();Ie=i(A,mt,Ie)}for(Ie=-1;++Ie<A.length;){const mt=e[A[Ie][0]];Jg.call(mt,A[Ie][1].type)&&mt[A[Ie][1].type].call(Object.assign({sliceSerialize:A[Ie][2].sliceSerialize},$a),A[Ie][1])}if(me.length>0){const mt=me[me.length-1];(mt[1]||Tk).call($a,void 0,mt[0])}for($.position={start:a(A.length>0?A[0][1].start:{line:1,column:1,offset:0}),end:a(A.length>0?A[A.length-2][1].end:{line:1,column:1,offset:0})},Ie=-1;++Ie<e.transforms.length;)$=e.transforms[Ie]($)||$;return $}function i(A,$,re){let me=$-1,xn=-1,$a=!1,Ie,mt,uo,Ua;for(;++me<=re;){const Be=A[me];if(Be[1].type==="listUnordered"||Be[1].type==="listOrdered"||Be[1].type==="blockQuote"?(Be[0]==="enter"?xn++:xn--,Ua=void 0):Be[1].type==="lineEndingBlank"?Be[0]==="enter"&&(Ie&&!Ua&&!xn&&!uo&&(uo=me),Ua=void 0):Be[1].type==="linePrefix"||Be[1].type==="listItemValue"||Be[1].type==="listItemMarker"||Be[1].type==="listItemPrefix"||Be[1].type==="listItemPrefixWhitespace"||(Ua=void 0),!xn&&Be[0]==="enter"&&Be[1].type==="listItemPrefix"||xn===-1&&Be[0]==="exit"&&(Be[1].type==="listUnordered"||Be[1].type==="listOrdered")){if(Ie){let Wf=me;for(mt=void 0;Wf--;){const Cr=A[Wf];if(Cr[1].type==="lineEnding"||Cr[1].type==="lineEndingBlank"){if(Cr[0]==="exit")continue;mt&&(A[mt][1].type="lineEndingBlank",$a=!0),Cr[1].type="lineEnding",mt=Wf}else if(!(Cr[1].type==="linePrefix"||Cr[1].type==="blockQuotePrefix"||Cr[1].type==="blockQuotePrefixWhitespace"||Cr[1].type==="blockQuoteMarker"||Cr[1].type==="listItemIndent"))break}uo&&(!mt||uo<mt)&&(Ie._spread=!0),Ie.end=Object.assign({},mt?A[mt][1].start:Be[1].end),A.splice(mt||me,0,["exit",Ie,Be[2]]),me++,re++}Be[1].type==="listItemPrefix"&&(Ie={type:"listItem",_spread:!1,start:Object.assign({},Be[1].start)},A.splice(me,0,["enter",Ie,Be[2]]),me++,re++,uo=void 0,Ua=!0)}}return A[$][1]._spread=$a,re}function s(A,$){n[A]=$}function o(A){return n[A]}function a(A){return{line:A.line,column:A.column,offset:A.offset}}function l(A,$){return re;function re(me){c.call(this,A(me),me),$&&$.call(this,me)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(A,$,re){return this.stack[this.stack.length-1].children.push(A),this.stack.push(A),this.tokenStack.push([$,re]),A.position={start:a($.start)},A}function h(A){return $;function $(re){A&&A.call(this,re),d.call(this,re)}}function d(A,$){const re=this.stack.pop(),me=this.tokenStack.pop();if(me)me[0].type!==A.type&&($?$.call(this,A,me[0]):(me[1]||Tk).call(this,A,me[0]));else throw new Error("Cannot close `"+A.type+"` ("+$l({start:A.start,end:A.end})+"): it\u2019s not open");return re.position.end=a(A.end),re}function f(){return oH(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function v(A){if(o("expectingFirstListItemValue")){const $=this.stack[this.stack.length-2];$.start=Number.parseInt(this.sliceSerialize(A),10),s("expectingFirstListItemValue")}}function E(){const A=this.resume(),$=this.stack[this.stack.length-1];$.lang=A}function m(){const A=this.resume(),$=this.stack[this.stack.length-1];$.meta=A}function y(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function g(){const A=this.resume(),$=this.stack[this.stack.length-1];$.value=A.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function S(){const A=this.resume(),$=this.stack[this.stack.length-1];$.value=A.replace(/(\r?\n|\r)$/g,"")}function b(A){const $=this.resume(),re=this.stack[this.stack.length-1];re.label=$,re.identifier=Qo(this.sliceSerialize(A)).toLowerCase()}function k(){const A=this.resume(),$=this.stack[this.stack.length-1];$.title=A}function C(){const A=this.resume(),$=this.stack[this.stack.length-1];$.url=A}function R(A){const $=this.stack[this.stack.length-1];if(!$.depth){const re=this.sliceSerialize(A).length;$.depth=re}}function H(){s("setextHeadingSlurpLineEnding",!0)}function G(A){const $=this.stack[this.stack.length-1];$.depth=this.sliceSerialize(A).charCodeAt(0)===61?1:2}function U(){s("setextHeadingSlurpLineEnding")}function Y(A){const $=this.stack[this.stack.length-1];let re=$.children[$.children.length-1];(!re||re.type!=="text")&&(re=kN(),re.position={start:a(A.start)},$.children.push(re)),this.stack.push(re)}function te(A){const $=this.stack.pop();$.value+=this.sliceSerialize(A),$.position.end=a(A.end)}function Qe(A){const $=this.stack[this.stack.length-1];if(o("atHardBreak")){const re=$.children[$.children.length-1];re.position.end=a(A.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&e.canContainEols.includes($.type)&&(Y.call(this,A),te.call(this,A))}function Zt(){s("atHardBreak",!0)}function en(){const A=this.resume(),$=this.stack[this.stack.length-1];$.value=A}function Mt(){const A=this.resume(),$=this.stack[this.stack.length-1];$.value=A}function M(){const A=this.resume(),$=this.stack[this.stack.length-1];$.value=A}function Q(){const A=this.stack[this.stack.length-1];o("inReference")?(A.type+="Reference",A.referenceType=o("referenceType")||"shortcut",delete A.url,delete A.title):(delete A.identifier,delete A.label),s("referenceType")}function W(){const A=this.stack[this.stack.length-1];o("inReference")?(A.type+="Reference",A.referenceType=o("referenceType")||"shortcut",delete A.url,delete A.title):(delete A.identifier,delete A.label),s("referenceType")}function w(A){const $=this.stack[this.stack.length-2],re=this.sliceSerialize(A);$.label=eW(re),$.identifier=Qo(re).toLowerCase()}function I(){const A=this.stack[this.stack.length-1],$=this.resume(),re=this.stack[this.stack.length-1];s("inReference",!0),re.type==="link"?re.children=A.children:re.alt=$}function qn(){const A=this.resume(),$=this.stack[this.stack.length-1];$.url=A}function pn(){const A=this.resume(),$=this.stack[this.stack.length-1];$.title=A}function tr(){s("inReference")}function ye(){s("referenceType","collapsed")}function Ft(A){const $=this.resume(),re=this.stack[this.stack.length-1];re.label=$,re.identifier=Qo(this.sliceSerialize(A)).toLowerCase(),s("referenceType","full")}function xr(A){s("characterReferenceType",A.type)}function ao(A){const $=this.sliceSerialize(A),re=o("characterReferenceType");let me;re?(me=$R($,re==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):me=c0($);const xn=this.stack.pop();xn.value+=me,xn.position.end=a(A.end)}function lo(A){te.call(this,A);const $=this.stack[this.stack.length-1];$.url=this.sliceSerialize(A)}function Kf(A){te.call(this,A);const $=this.stack[this.stack.length-1];$.url="mailto:"+this.sliceSerialize(A)}function pN(){return{type:"blockquote",children:[]}}function y0(){return{type:"code",lang:null,meta:null,value:""}}function mN(){return{type:"inlineCode",value:""}}function gN(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function yN(){return{type:"emphasis",children:[]}}function v0(){return{type:"heading",depth:void 0,children:[]}}function w0(){return{type:"break"}}function _0(){return{type:"html",value:""}}function vN(){return{type:"image",title:null,url:"",alt:null}}function I0(){return{type:"link",title:null,url:"",children:[]}}function k0(A){return{type:"list",ordered:A.type==="listOrdered",start:null,spread:A._spread,children:[]}}function wN(A){return{type:"listItem",spread:A._spread,checked:null,children:[]}}function _N(){return{type:"paragraph",children:[]}}function IN(){return{type:"strong",children:[]}}function kN(){return{type:"text",value:""}}function EN(){return{type:"thematicBreak"}}}function UR(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?UR(t,r):iW(t,r)}return t}function iW(t,e){let n;for(n in e)if(Jg.call(e,n)){const r=n==="canContainEols"||n==="transforms",s=(Jg.call(t,n)?t[n]:void 0)||(t[n]=r?[]:{}),o=e[n];o&&(r?t[n]=[...s,...o]:Object.assign(s,o))}}function Tk(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+$l({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+$l({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+$l({start:e.start,end:e.end})+") is still open")}function sW(t){Object.assign(this,{Parser:n=>{const r=this.data("settings");return nW(n,Object.assign({},r,t,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var et=function(t,e,n){var r={type:String(t)};return n==null&&(typeof e=="string"||Array.isArray(e))?n=e:Object.assign(r,e),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const dh={}.hasOwnProperty;function oW(t,e){const n=e.data||{};return"value"in e&&!(dh.call(n,"hName")||dh.call(n,"hProperties")||dh.call(n,"hChildren"))?t.augment(e,et("text",e.value)):t(e,"div",Lt(t,e))}function BR(t,e,n){const r=e&&e.type;let i;if(!r)throw new Error("Expected node, got `"+e+"`");return dh.call(t.handlers,r)?i=t.handlers[r]:t.passThrough&&t.passThrough.includes(r)?i=aW:i=t.unknownHandler,(typeof i=="function"?i:oW)(t,e,n)}function aW(t,e){return"children"in e?uc(si({},e),{children:Lt(t,e)}):e}function Lt(t,e){const n=[];if("children"in e){const r=e.children;let i=-1;for(;++i<r.length;){const s=BR(t,r[i],e);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const d0=function(t){if(t==null)return hW;if(typeof t=="string")return cW(t);if(typeof t=="object")return Array.isArray(t)?lW(t):uW(t);if(typeof t=="function")return Af(t);throw new Error("Expected function, string, or object as test")};function lW(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=d0(t[n]);return Af(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].call(this,...i))return!0;return!1}}function uW(t){return Af(e);function e(n){let r;for(r in t)if(n[r]!==t[r])return!1;return!0}}function cW(t){return Af(e);function e(n){return n&&n.type===t}}function Af(t){return e;function e(...n){return Boolean(t.call(this,...n))}}function hW(){return!0}const dW=!0,fW="skip",bk=!1,pW=function(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null);const i=d0(e),s=r?-1:1;o(t,null,[])();function o(a,l,u){const c=typeof a=="object"&&a!==null?a:{};let h;return typeof c.type=="string"&&(h=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})),d;function d(){let f=[],p,v,E;if((!e||i(a,l,u[u.length-1]||null))&&(f=mW(n(a,u)),f[0]===bk))return f;if(a.children&&f[0]!==fW)for(v=(r?a.children.length:-1)+s,E=u.concat(a);v>-1&&v<a.children.length;){if(p=o(a.children[v],v,E)(),p[0]===bk)return p;v=typeof p[1]=="number"?p[1]:v+s}return f}}};function mW(t){return Array.isArray(t)?t:typeof t=="number"?[dW,t]:[t]}const VR=function(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),pW(t,e,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},zR=qR("start"),jR=qR("end");function qR(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function gW(t){return!t||!t.position||!t.position.start||!t.position.start.line||!t.position.start.column||!t.position.end||!t.position.end.line||!t.position.end.column}const yW=!0,vW="skip",xk=!1,wW=function(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null);var i=d0(e),s=r?-1:1;o(t,null,[])();function o(a,l,u){var c=typeof a=="object"&&a!==null?a:{},h;return typeof c.type=="string"&&(h=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})),d;function d(){var f=[],p,v,E;if((!e||i(a,l,u[u.length-1]||null))&&(f=_W(n(a,u)),f[0]===xk))return f;if(a.children&&f[0]!==vW)for(v=(r?a.children.length:-1)+s,E=u.concat(a);v>-1&&v<a.children.length;){if(p=o(a.children[v],v,E)(),p[0]===xk)return p;v=typeof p[1]=="number"?p[1]:v+s}return f}}};function _W(t){return Array.isArray(t)?t:typeof t=="number"?[yW,t]:[t]}const IW=function(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),wW(t,e,i,r);function i(s,o){var a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},Ck={}.hasOwnProperty;function kW(t){const e=Object.create(null);if(!t||!t.type)throw new Error("mdast-util-definitions expected node");return IW(t,"definition",n),r;function n(i){const s=Ak(i.identifier);s&&!Ck.call(e,s)&&(e[s]=i)}function r(i){const s=Ak(i);return s&&Ck.call(e,s)?e[s]:null}}function Ak(t){return String(t||"").toUpperCase()}const EW={'"':"quot","&":"amp","<":"lt",">":"gt"};function SW(t){return t.replace(/["&<>]/g,e);function e(n){return"&"+EW[n]+";"}}function HR(t,e){const n=SW(TW(t||""));if(!e)return n;const r=n.indexOf(":"),i=n.indexOf("?"),s=n.indexOf("#"),o=n.indexOf("/");return r<0||o>-1&&r>o||i>-1&&r>i||s>-1&&r>s||e.test(n.slice(0,r))?n:""}function TW(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&wn(t.charCodeAt(n+1))&&wn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="\uFFFD"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Br(t,e){const n=[];let r=-1;for(e&&n.push(et("text",`
`));++r<t.length;)r&&n.push(et("text",`
`)),n.push(t[r]);return e&&t.length>0&&n.push(et("text",`
`)),n}function bW(t){let e=-1;const n=[];for(;++e<t.footnoteOrder.length;){const r=t.footnoteById[t.footnoteOrder[e].toUpperCase()];if(!r)continue;const i=Lt(t,r),s=String(r.identifier),o=HR(s.toLowerCase());let a=0;const l=[];for(;++a<=t.footnoteCounts[s];){const h={type:"element",tagName:"a",properties:{href:"#"+t.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:t.footnoteBackLabel},children:[{type:"text",value:"\u21A9"}]};a>1&&h.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),l.length>0&&l.push({type:"text",value:" "}),l.push(h)}const u=i[i.length-1];if(u&&u.type==="element"&&u.tagName==="p"){const h=u.children[u.children.length-1];h&&h.type==="text"?h.value+=" ":u.children.push({type:"text",value:" "}),u.children.push(...l)}else i.push(...l);const c={type:"element",tagName:"li",properties:{id:t.clobberPrefix+"fn-"+o},children:Br(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:"h2",properties:{id:"footnote-label",className:["sr-only"]},children:[et("text",t.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Br(n,!0)},{type:"text",value:`
`}]}}function xW(t,e){return t(e,"blockquote",Br(Lt(t,e),!0))}function CW(t,e){return[t(e,"br"),et("text",`
`)]}function AW(t,e){const n=e.value?e.value+`
`:"",r=e.lang&&e.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=t(e,"code",i,[et("text",n)]);return e.meta&&(s.data={meta:e.meta}),t(e.position,"pre",[s])}function RW(t,e){return t(e,"del",Lt(t,e))}function NW(t,e){return t(e,"em",Lt(t,e))}function KR(t,e){const n=String(e.identifier),r=HR(n.toLowerCase()),i=t.footnoteOrder.indexOf(n);let s;i===-1?(t.footnoteOrder.push(n),t.footnoteCounts[n]=1,s=t.footnoteOrder.length):(t.footnoteCounts[n]++,s=i+1);const o=t.footnoteCounts[n];return t(e,"sup",[t(e.position,"a",{href:"#"+t.clobberPrefix+"fn-"+r,id:t.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[et("text",String(s))])])}function DW(t,e){const n=t.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:e.children}],position:e.position},KR(t,{type:"footnoteReference",identifier:i,position:e.position})}function PW(t,e){return t(e,"h"+e.depth,Lt(t,e))}function OW(t,e){return t.dangerous?t.augment(e,et("raw",e.value)):null}var Rk={};function LW(t){var e,n,r=Rk[t];if(r)return r;for(r=Rk[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function Rf(t,e,n){var r,i,s,o,a,l="";for(typeof e!="string"&&(n=e,e=Rf.defaultChars),typeof n=="undefined"&&(n=!0),a=LW(e),r=0,i=t.length;r<i;r++){if(s=t.charCodeAt(r),n&&s===37&&r+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3))){l+=t.slice(r,r+3),r+=2;continue}if(s<128){l+=a[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&r+1<i&&(o=t.charCodeAt(r+1),o>=56320&&o<=57343)){l+=encodeURIComponent(t[r]+t[r+1]),r++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(t[r])}return l}Rf.defaultChars=";/?:@&=+$,-_.!~*'()#";Rf.componentChars="-_.!~*'()";var Nf=Rf;function WR(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return et("text","!["+e.alt+r);const i=Lt(t,e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(et("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(et("text",r)),i}function MW(t,e){const n=t.definition(e.identifier);if(!n)return WR(t,e);const r={src:Nf(n.url||""),alt:e.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),t(e,"img",r)}function FW(t,e){const n={src:Nf(e.url),alt:e.alt};return e.title!==null&&e.title!==void 0&&(n.title=e.title),t(e,"img",n)}function $W(t,e){return t(e,"code",[et("text",e.value.replace(/\r?\n|\r/g," "))])}function UW(t,e){const n=t.definition(e.identifier);if(!n)return WR(t,e);const r={href:Nf(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),t(e,"a",r,Lt(t,e))}function BW(t,e){const n={href:Nf(e.url)};return e.title!==null&&e.title!==void 0&&(n.title=e.title),t(e,"a",n,Lt(t,e))}function VW(t,e,n){const r=Lt(t,e),i=n?zW(n):GR(e),s={},o=[];if(typeof e.checked=="boolean"){let u;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?u=r[0]:(u=t(null,"p",[]),r.unshift(u)),u.children.length>0&&u.children.unshift(et("text"," ")),u.children.unshift(t(null,"input",{type:"checkbox",checked:e.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push(et("text",`
`)),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];return l&&(i||!("tagName"in l)||l.tagName!=="p")&&o.push(et("text",`
`)),t(e,"li",s,o)}function zW(t){let e=t.spread;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=GR(n[r]);return Boolean(e)}function GR(t){const e=t.spread;return e==null?t.children.length>1:e}function jW(t,e){const n={},r=e.ordered?"ol":"ul",i=Lt(t,e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return t(e,r,n,Br(i,!0))}function qW(t,e){return t(e,"p",Lt(t,e))}function HW(t,e){return t.augment(e,et("root",Br(Lt(t,e))))}function KW(t,e){return t(e,"strong",Lt(t,e))}function WW(t,e){const n=e.children;let r=-1;const i=e.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",l=[];let u=-1;const c=e.align?i.length:o.length;for(;++u<c;){const h=o[u];l.push(t(h,a,{align:i[u]},h?Lt(t,h):[]))}s[r]=t(n[r],"tr",Br(l,!0))}return t(e,"table",Br([t(s[0].position,"thead",Br([s[0]],!0))].concat(s[1]?t({start:zR(s[1]),end:jR(s[s.length-1])},"tbody",Br(s.slice(1),!0)):[]),!0))}function GW(t,e){return t.augment(e,et("text",String(e.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))}function QW(t,e){return t(e,"hr")}const YW={blockquote:xW,break:CW,code:AW,delete:RW,emphasis:NW,footnoteReference:KR,footnote:DW,heading:PW,html:OW,imageReference:MW,image:FW,inlineCode:$W,linkReference:UW,link:BW,listItem:VW,list:jW,paragraph:qW,root:HW,strong:KW,table:WW,text:GW,thematicBreak:QW,toml:Vc,yaml:Vc,definition:Vc,footnoteDefinition:Vc};function Vc(){return null}const XW={}.hasOwnProperty;function JW(t,e){const n=e||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=kW(t),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers=si(si({},YW),n.handlers),o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,VR(t,"footnoteDefinition",a=>{const l=String(a.identifier).toUpperCase();XW.call(i,l)||(i[l]=a)}),o;function s(a,l){if(a&&"data"in a&&a.data){const u=a.data;u.hName&&(l.type!=="element"&&(l={type:"element",tagName:"",properties:{},children:[]}),l.tagName=u.hName),l.type==="element"&&u.hProperties&&(l.properties=si(si({},l.properties),u.hProperties)),"children"in l&&l.children&&u.hChildren&&(l.children=u.hChildren)}if(a){const u="type"in a?a:{position:a};gW(u)||(l.position={start:zR(u),end:jR(u)})}return l}function o(a,l,u,c){return Array.isArray(u)&&(c=u,u={}),s(a,{type:"element",tagName:l,properties:u||{},children:c||[]})}}function QR(t,e){const n=JW(t,e),r=BR(n,t,null),i=bW(n);return i&&r.children.push(et("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const ZW=function(t,e){return t&&"run"in t?t5(t,e):n5(t||e)};var e5=ZW;function t5(t,e){return(n,r,i)=>{t.run(QR(n,e),r,s=>{i(s)})}}function n5(t){return e=>QR(e,t)}var YR={exports:{}},r5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",i5=r5,s5=i5;function XR(){}function JR(){}JR.resetWarningCache=XR;var o5=function(){function t(r,i,s,o,a,l){if(l!==s5){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:JR,resetWarningCache:XR};return n.PropTypes=n,n};YR.exports=o5();var ne=YR.exports;class lc{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}lc.prototype.property={};lc.prototype.normal={};lc.prototype.space=null;function ZR(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new lc(n,r,e)}function Zg(t){return t.toLowerCase()}class zn{constructor(e,n){this.property=e,this.attribute=n}}zn.prototype.space=null;zn.prototype.boolean=!1;zn.prototype.booleanish=!1;zn.prototype.overloadedBoolean=!1;zn.prototype.number=!1;zn.prototype.commaSeparated=!1;zn.prototype.spaceSeparated=!1;zn.prototype.commaOrSpaceSeparated=!1;zn.prototype.mustUseProperty=!1;zn.prototype.defined=!1;let a5=0;const oe=oo(),qe=oo(),eN=oo(),O=oo(),Ee=oo(),Yo=oo(),mn=oo();function oo(){return 2**++a5}var ey=Object.freeze(Object.defineProperty({__proto__:null,boolean:oe,booleanish:qe,overloadedBoolean:eN,number:O,spaceSeparated:Ee,commaSeparated:Yo,commaOrSpaceSeparated:mn},Symbol.toStringTag,{value:"Module"}));const am=Object.keys(ey);class f0 extends zn{constructor(e,n,r,i){let s=-1;if(super(e,n),Nk(this,"space",i),typeof r=="number")for(;++s<am.length;){const o=am[s];Nk(this,am[s],(r&ey[o])===ey[o])}}}f0.prototype.defined=!0;function Nk(t,e,n){n&&(t[e]=n)}const l5={}.hasOwnProperty;function Fa(t){const e={},n={};let r;for(r in t.properties)if(l5.call(t.properties,r)){const i=t.properties[r],s=new f0(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Zg(r)]=r,n[Zg(s.attribute)]=r}return new lc(e,n,t.space)}const tN=Fa({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),nN=Fa({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function rN(t,e){return e in t?t[e]:e}function iN(t,e){return rN(t,e.toLowerCase())}const sN=Fa({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:iN,properties:{xmlns:null,xmlnsXLink:null}}),oN=Fa({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:qe,ariaAutoComplete:null,ariaBusy:qe,ariaChecked:qe,ariaColCount:O,ariaColIndex:O,ariaColSpan:O,ariaControls:Ee,ariaCurrent:null,ariaDescribedBy:Ee,ariaDetails:null,ariaDisabled:qe,ariaDropEffect:Ee,ariaErrorMessage:null,ariaExpanded:qe,ariaFlowTo:Ee,ariaGrabbed:qe,ariaHasPopup:null,ariaHidden:qe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ee,ariaLevel:O,ariaLive:null,ariaModal:qe,ariaMultiLine:qe,ariaMultiSelectable:qe,ariaOrientation:null,ariaOwns:Ee,ariaPlaceholder:null,ariaPosInSet:O,ariaPressed:qe,ariaReadOnly:qe,ariaRelevant:null,ariaRequired:qe,ariaRoleDescription:Ee,ariaRowCount:O,ariaRowIndex:O,ariaRowSpan:O,ariaSelected:qe,ariaSetSize:O,ariaSort:null,ariaValueMax:O,ariaValueMin:O,ariaValueNow:O,ariaValueText:null,role:null}}),u5=Fa({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:iN,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Yo,acceptCharset:Ee,accessKey:Ee,action:null,allow:null,allowFullScreen:oe,allowPaymentRequest:oe,allowUserMedia:oe,alt:null,as:null,async:oe,autoCapitalize:null,autoComplete:Ee,autoFocus:oe,autoPlay:oe,capture:oe,charSet:null,checked:oe,cite:null,className:Ee,cols:O,colSpan:null,content:null,contentEditable:qe,controls:oe,controlsList:Ee,coords:O|Yo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:oe,defer:oe,dir:null,dirName:null,disabled:oe,download:eN,draggable:qe,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:oe,formTarget:null,headers:Ee,height:O,hidden:oe,high:O,href:null,hrefLang:null,htmlFor:Ee,httpEquiv:Ee,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:oe,itemId:null,itemProp:Ee,itemRef:Ee,itemScope:oe,itemType:Ee,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:oe,low:O,manifest:null,max:null,maxLength:O,media:null,method:null,min:null,minLength:O,multiple:oe,muted:oe,name:null,nonce:null,noModule:oe,noValidate:oe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:oe,optimum:O,pattern:null,ping:Ee,placeholder:null,playsInline:oe,poster:null,preload:null,readOnly:oe,referrerPolicy:null,rel:Ee,required:oe,reversed:oe,rows:O,rowSpan:O,sandbox:Ee,scope:null,scoped:oe,seamless:oe,selected:oe,shape:null,size:O,sizes:null,slot:null,span:O,spellCheck:qe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:O,step:null,style:null,tabIndex:O,target:null,title:null,translate:null,type:null,typeMustMatch:oe,useMap:null,value:qe,width:O,wrap:null,align:null,aLink:null,archive:Ee,axis:null,background:null,bgColor:null,border:O,borderColor:null,bottomMargin:O,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:oe,declare:oe,event:null,face:null,frame:null,frameBorder:null,hSpace:O,leftMargin:O,link:null,longDesc:null,lowSrc:null,marginHeight:O,marginWidth:O,noResize:oe,noHref:oe,noShade:oe,noWrap:oe,object:null,profile:null,prompt:null,rev:null,rightMargin:O,rules:null,scheme:null,scrolling:qe,standby:null,summary:null,text:null,topMargin:O,valueType:null,version:null,vAlign:null,vLink:null,vSpace:O,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:oe,disableRemotePlayback:oe,prefix:null,property:null,results:O,security:null,unselectable:null}}),c5=Fa({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:rN,properties:{about:mn,accentHeight:O,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:O,amplitude:O,arabicForm:null,ascent:O,attributeName:null,attributeType:null,azimuth:O,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:O,by:null,calcMode:null,capHeight:O,className:Ee,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:O,diffuseConstant:O,direction:null,display:null,dur:null,divisor:O,dominantBaseline:null,download:oe,dx:null,dy:null,edgeMode:null,editable:null,elevation:O,enableBackground:null,end:null,event:null,exponent:O,externalResourcesRequired:null,fill:null,fillOpacity:O,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Yo,g2:Yo,glyphName:Yo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:O,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:O,horizOriginX:O,horizOriginY:O,id:null,ideographic:O,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:O,k:O,k1:O,k2:O,k3:O,k4:O,kernelMatrix:mn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:O,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:O,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:O,overlineThickness:O,paintOrder:null,panose1:null,path:null,pathLength:O,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ee,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:O,pointsAtY:O,pointsAtZ:O,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mn,rev:mn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mn,requiredFeatures:mn,requiredFonts:mn,requiredFormats:mn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:O,specularExponent:O,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:O,strikethroughThickness:O,string:null,stroke:null,strokeDashArray:mn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:O,strokeOpacity:O,strokeWidth:null,style:null,surfaceScale:O,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mn,tabIndex:O,tableValues:null,target:null,targetX:O,targetY:O,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mn,to:null,transform:null,u1:null,u2:null,underlinePosition:O,underlineThickness:O,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:O,values:null,vAlphabetic:O,vMathematical:O,vectorEffect:null,vHanging:O,vIdeographic:O,version:null,vertAdvY:O,vertOriginX:O,vertOriginY:O,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:O,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),h5=/^data[-\w.:]+$/i,Dk=/-[a-z]/g,d5=/[A-Z]/g;function f5(t,e){const n=Zg(e);let r=e,i=zn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&h5.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Dk,m5);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Dk.test(s)){let o=s.replace(d5,p5);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=f0}return new i(r,e)}function p5(t){return"-"+t.toLowerCase()}function m5(t){return t.charAt(1).toUpperCase()}const Pk={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},g5=ZR([nN,tN,sN,oN,u5],"html"),y5=ZR([nN,tN,sN,oN,c5],"svg");function v5(t){if(t.allowedElements&&t.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(t.allowedElements||t.disallowedElements||t.allowElement)return e=>{VR(e,"element",(n,r,i)=>{const s=i;let o;if(t.allowedElements?o=!t.allowedElements.includes(n.tagName):t.disallowedElements&&(o=t.disallowedElements.includes(n.tagName)),!o&&t.allowElement&&typeof r=="number"&&(o=!t.allowElement(n,r,s)),o&&typeof r=="number")return t.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var aN={exports:{}},pe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=Symbol.for("react.element"),m0=Symbol.for("react.portal"),Df=Symbol.for("react.fragment"),Pf=Symbol.for("react.strict_mode"),Of=Symbol.for("react.profiler"),Lf=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),w5=Symbol.for("react.server_context"),Ff=Symbol.for("react.forward_ref"),$f=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),Bf=Symbol.for("react.memo"),Vf=Symbol.for("react.lazy"),_5=Symbol.for("react.offscreen"),lN;lN=Symbol.for("react.module.reference");function jn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case p0:switch(t=t.type,t){case Df:case Of:case Pf:case $f:case Uf:return t;default:switch(t=t&&t.$$typeof,t){case w5:case Mf:case Ff:case Vf:case Bf:case Lf:return t;default:return e}}case m0:return e}}}pe.ContextConsumer=Mf;pe.ContextProvider=Lf;pe.Element=p0;pe.ForwardRef=Ff;pe.Fragment=Df;pe.Lazy=Vf;pe.Memo=Bf;pe.Portal=m0;pe.Profiler=Of;pe.StrictMode=Pf;pe.Suspense=$f;pe.SuspenseList=Uf;pe.isAsyncMode=function(){return!1};pe.isConcurrentMode=function(){return!1};pe.isContextConsumer=function(t){return jn(t)===Mf};pe.isContextProvider=function(t){return jn(t)===Lf};pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===p0};pe.isForwardRef=function(t){return jn(t)===Ff};pe.isFragment=function(t){return jn(t)===Df};pe.isLazy=function(t){return jn(t)===Vf};pe.isMemo=function(t){return jn(t)===Bf};pe.isPortal=function(t){return jn(t)===m0};pe.isProfiler=function(t){return jn(t)===Of};pe.isStrictMode=function(t){return jn(t)===Pf};pe.isSuspense=function(t){return jn(t)===$f};pe.isSuspenseList=function(t){return jn(t)===Uf};pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Df||t===Of||t===Pf||t===$f||t===Uf||t===_5||typeof t=="object"&&t!==null&&(t.$$typeof===Vf||t.$$typeof===Bf||t.$$typeof===Lf||t.$$typeof===Mf||t.$$typeof===Ff||t.$$typeof===lN||t.getModuleId!==void 0)};pe.typeOf=jn;aN.exports=pe;var I5=aN.exports;function k5(t){var e=t&&typeof t=="object"&&t.type==="text"?t.value||"":t;return typeof e=="string"&&e.replace(/[ \t\n\f\r]/g,"")===""}function E5(t){return t.join(" ").trim()}function S5(t,e){var n=e||{};return t[t.length-1]===""&&(t=t.concat("")),t.join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var Ok=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,T5=/\n/g,b5=/^\s*/,x5=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,C5=/^:\s*/,A5=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,R5=/^[;\s]*/,N5=/^\s+|\s+$/g,D5=`
`,Lk="/",Mk="*",us="",P5="comment",O5="declaration",L5=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(p){var v=p.match(T5);v&&(n+=v.length);var E=p.lastIndexOf(D5);r=~E?p.length-E:r+p.length}function s(){var p={line:n,column:r};return function(v){return v.position=new o(p),u(),v}}function o(p){this.start=p,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(p){var v=new Error(e.source+":"+n+":"+r+": "+p);if(v.reason=p,v.filename=e.source,v.line=n,v.column=r,v.source=t,!e.silent)throw v}function l(p){var v=p.exec(t);if(!!v){var E=v[0];return i(E),t=t.slice(E.length),v}}function u(){l(b5)}function c(p){var v;for(p=p||[];v=h();)v!==!1&&p.push(v);return p}function h(){var p=s();if(!(Lk!=t.charAt(0)||Mk!=t.charAt(1))){for(var v=2;us!=t.charAt(v)&&(Mk!=t.charAt(v)||Lk!=t.charAt(v+1));)++v;if(v+=2,us===t.charAt(v-1))return a("End of comment missing");var E=t.slice(2,v-2);return r+=2,i(E),t=t.slice(v),r+=2,p({type:P5,comment:E})}}function d(){var p=s(),v=l(x5);if(!!v){if(h(),!l(C5))return a("property missing ':'");var E=l(A5),m=p({type:O5,property:Fk(v[0].replace(Ok,us)),value:E?Fk(E[0].replace(Ok,us)):us});return l(R5),m}}function f(){var p=[];c(p);for(var v;v=d();)v!==!1&&(p.push(v),c(p));return p}return u(),f()};function Fk(t){return t?t.replace(N5,us):us}var M5=L5;function F5(t,e){var n=null;if(!t||typeof t!="string")return n;for(var r,i=M5(t),s=typeof e=="function",o,a,l=0,u=i.length;l<u;l++)r=i[l],o=r.property,a=r.value,s?e(o,a,r):a&&(n||(n={}),n[o]=a);return n}var $5=F5;const ty={}.hasOwnProperty,U5=new Set(["table","thead","tbody","tfoot","tr"]);function uN(t,e){const n=[];let r=-1,i;for(;++r<e.children.length;)i=e.children[r],i.type==="element"?n.push(B5(t,i,r,e)):i.type==="text"?(e.type!=="element"||!U5.has(e.tagName)||!k5(i))&&n.push(i.value):i.type==="raw"&&!t.options.skipHtml&&n.push(i.value);return n}function B5(t,e,n,r){const i=t.options,s=t.schema,o=e.tagName,a={};let l=s,u;if(s.space==="html"&&o==="svg"&&(l=y5,t.schema=l),e.properties)for(u in e.properties)ty.call(e.properties,u)&&z5(a,u,e.properties[u],t);(o==="ol"||o==="ul")&&t.listDepth++;const c=uN(t,e);(o==="ol"||o==="ul")&&t.listDepth--,t.schema=s;const h=e.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},d=i.components&&ty.call(i.components,o)?i.components[o]:o,f=typeof d=="string"||d===vs.Fragment;if(!I5.isValidElementType(d))throw new TypeError(`Component for name \`${o}\` not defined or is not renderable`);if(a.key=[o,h.start.line,h.start.column,n].join("-"),o==="a"&&i.linkTarget&&(a.target=typeof i.linkTarget=="function"?i.linkTarget(String(a.href||""),e.children,typeof a.title=="string"?a.title:null):i.linkTarget),o==="a"&&i.transformLinkUri&&(a.href=i.transformLinkUri(String(a.href||""),e.children,typeof a.title=="string"?a.title:null)),!f&&o==="code"&&r.type==="element"&&r.tagName!=="pre"&&(a.inline=!0),!f&&(o==="h1"||o==="h2"||o==="h3"||o==="h4"||o==="h5"||o==="h6")&&(a.level=Number.parseInt(o.charAt(1),10)),o==="img"&&i.transformImageUri&&(a.src=i.transformImageUri(String(a.src||""),String(a.alt||""),typeof a.title=="string"?a.title:null)),!f&&o==="li"&&r.type==="element"){const p=V5(e);a.checked=p&&p.properties?Boolean(p.properties.checked):null,a.index=lm(r,e),a.ordered=r.tagName==="ol"}return!f&&(o==="ol"||o==="ul")&&(a.ordered=o==="ol",a.depth=t.listDepth),(o==="td"||o==="th")&&(a.align&&(a.style||(a.style={}),a.style.textAlign=a.align,delete a.align),f||(a.isHeader=o==="th")),!f&&o==="tr"&&r.type==="element"&&(a.isHeader=Boolean(r.tagName==="thead")),i.sourcePos&&(a["data-sourcepos"]=H5(h)),!f&&i.rawSourcePos&&(a.sourcePosition=e.position),!f&&i.includeElementIndex&&(a.index=lm(r,e),a.siblingCount=lm(r)),f||(a.node=e),c.length>0?vs.createElement(d,a,c):vs.createElement(d,a)}function V5(t){let e=-1;for(;++e<t.children.length;){const n=t.children[e];if(n.type==="element"&&n.tagName==="input")return n}return null}function lm(t,e){let n=-1,r=0;for(;++n<t.children.length&&t.children[n]!==e;)t.children[n].type==="element"&&r++;return r}function z5(t,e,n,r){const i=f5(r.schema,e);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?S5(s):E5(s)),i.property==="style"&&typeof s=="string"&&(s=j5(s)),i.space&&i.property?t[ty.call(Pk,i.property)?Pk[i.property]:i.property]=s:i.attribute&&(t[i.attribute]=s))}function j5(t){const e={};try{$5(t,n)}catch{}return e;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;e[s.replace(/-([a-z])/g,q5)]=i}}function q5(t,e){return e.toUpperCase()}function H5(t){return[t.start.line,":",t.start.column,"-",t.end.line,":",t.end.column].map(e=>String(e)).join("")}const $k={}.hasOwnProperty,K5="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",zc={plugins:{to:"plugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function g0(t){for(const s in zc)if($k.call(zc,s)&&$k.call(t,s)){const o=zc[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${K5}#${o.id}> for more info)`),delete zc[s]}const e=nH().use(sW).use(t.remarkPlugins||[]).use(e5,uc(si({},t.remarkRehypeOptions),{allowDangerousHtml:!0})).use(t.rehypePlugins||[]).use(v5,t),n=new SR;typeof t.children=="string"?n.value=t.children:t.children!==void 0&&t.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${t.children}\`)`);const r=e.runSync(e.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=vs.createElement(vs.Fragment,{},uN({options:t,schema:g5,listDepth:0},r));return t.className&&(i=vs.createElement("div",{className:t.className},i)),i}g0.defaultProps={transformLinkUri:j6};g0.propTypes={children:ne.string,className:ne.string,allowElement:ne.func,allowedElements:ne.arrayOf(ne.string),disallowedElements:ne.arrayOf(ne.string),unwrapDisallowed:ne.bool,remarkPlugins:ne.arrayOf(ne.oneOfType([ne.object,ne.func,ne.arrayOf(ne.oneOfType([ne.bool,ne.string,ne.object,ne.func,ne.arrayOf(ne.any)]))])),rehypePlugins:ne.arrayOf(ne.oneOfType([ne.object,ne.func,ne.arrayOf(ne.oneOfType([ne.bool,ne.string,ne.object,ne.func,ne.arrayOf(ne.any)]))])),sourcePos:ne.bool,rawSourcePos:ne.bool,skipHtml:ne.bool,includeElementIndex:ne.bool,transformLinkUri:ne.oneOfType([ne.func,ne.bool]),linkTarget:ne.oneOfType([ne.func,ne.string]),transformImageUri:ne.func,components:ne.object};try{self["workbox:window:6.5.2"]&&_()}catch{}function ny(t,e){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(i){n(i.data)},t.postMessage(e,[r.port2])})}function W5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G5(t,e){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(i,s){if(i){if(typeof i=="string")return Uk(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Uk(i,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var um=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function cm(t,e){var n=location.href;return new URL(t,n).href===new URL(e,n).href}var al=function(t,e){this.type=t,Object.assign(this,e)};function jc(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function Q5(){}var Y5={type:"SKIP_WAITING"};function Bk(t,e){if(!e)return t&&t.then?t.then(Q5):Promise.resolve()}var X5=function(t){var e,n;function r(a,l){var u,c;return l===void 0&&(l={}),(u=t.call(this)||this).nn={},u.tn=0,u.rn=new um,u.en=new um,u.on=new um,u.un=0,u.an=new Set,u.cn=function(){var h=u.fn,d=h.installing;u.tn>0||!cm(d.scriptURL,u.sn.toString())||performance.now()>u.un+6e4?(u.vn=d,h.removeEventListener("updatefound",u.cn)):(u.hn=d,u.an.add(d),u.rn.resolve(d)),++u.tn,d.addEventListener("statechange",u.ln)},u.ln=function(h){var d=u.fn,f=h.target,p=f.state,v=f===u.vn,E={sw:f,isExternal:v,originalEvent:h};!v&&u.mn&&(E.isUpdate=!0),u.dispatchEvent(new al(p,E)),p==="installed"?u.wn=self.setTimeout(function(){p==="installed"&&d.waiting===f&&u.dispatchEvent(new al("waiting",E))},200):p==="activating"&&(clearTimeout(u.wn),v||u.en.resolve(f))},u.dn=function(h){var d=u.hn,f=d!==navigator.serviceWorker.controller;u.dispatchEvent(new al("controlling",{isExternal:f,originalEvent:h,sw:d,isUpdate:u.mn})),f||u.on.resolve(d)},u.gn=(c=function(h){var d=h.data,f=h.ports,p=h.source;return jc(u.getSW(),function(){u.an.has(p)&&u.dispatchEvent(new al("message",{data:d,originalEvent:h,ports:f,sw:p}))})},function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];try{return Promise.resolve(c.apply(this,h))}catch(f){return Promise.reject(f)}}),u.sn=a,u.nn=l,navigator.serviceWorker.addEventListener("message",u.gn),u}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,s,o=r.prototype;return o.register=function(a){var l=(a===void 0?{}:a).immediate,u=l!==void 0&&l;try{var c=this;return function(h,d){var f=h();return f&&f.then?f.then(d):d(f)}(function(){if(!u&&document.readyState!=="complete")return Bk(new Promise(function(h){return window.addEventListener("load",h)}))},function(){return c.mn=Boolean(navigator.serviceWorker.controller),c.yn=c.pn(),jc(c.bn(),function(h){c.fn=h,c.yn&&(c.hn=c.yn,c.en.resolve(c.yn),c.on.resolve(c.yn),c.yn.addEventListener("statechange",c.ln,{once:!0}));var d=c.fn.waiting;return d&&cm(d.scriptURL,c.sn.toString())&&(c.hn=d,Promise.resolve().then(function(){c.dispatchEvent(new al("waiting",{sw:d,wasWaitingBeforeRegister:!0}))}).then(function(){})),c.hn&&(c.rn.resolve(c.hn),c.an.add(c.hn)),c.fn.addEventListener("updatefound",c.cn),navigator.serviceWorker.addEventListener("controllerchange",c.dn),c.fn})})}catch(h){return Promise.reject(h)}},o.update=function(){try{return this.fn?Bk(this.fn.update()):void 0}catch(a){return Promise.reject(a)}},o.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(a){try{return jc(this.getSW(),function(l){return ny(l,a)})}catch(l){return Promise.reject(l)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&ny(this.fn.waiting,Y5)},o.pn=function(){var a=navigator.serviceWorker.controller;return a&&cm(a.scriptURL,this.sn.toString())?a:void 0},o.bn=function(){try{var a=this;return function(l,u){try{var c=l()}catch(h){return u(h)}return c&&c.then?c.then(void 0,u):c}(function(){return jc(navigator.serviceWorker.register(a.sn,a.nn),function(l){return a.un=performance.now(),l})},function(l){throw l})}catch(l){return Promise.reject(l)}},i=r,(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&W5(i.prototype,s),r}(function(){function t(){this.Pn=new Map}var e=t.prototype;return e.addEventListener=function(n,r){this.Sn(n).add(r)},e.removeEventListener=function(n,r){this.Sn(n).delete(r)},e.dispatchEvent=function(n){n.target=this;for(var r,i=G5(this.Sn(n.type));!(r=i()).done;)(0,r.value)(n)},e.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function J5(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisterError:s}=t;let o,a;const l=async(u=!0)=>{u&&(o==null||o.addEventListener("controlling",c=>{c.isUpdate&&window.location.reload()})),a&&a.waiting&&await ny(a.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){o=new X5("/sw.js",{scope:"/",type:"classic"}),o.addEventListener("activated",u=>{u.isUpdate||r==null||r()});{const u=()=>{n==null||n()};o.addEventListener("waiting",u),o.addEventListener("externalwaiting",u)}o.register({immediate:e}).then(u=>{a=u,i==null||i(u)}).catch(u=>{s==null||s(u)})}return l}var zf={exports:{}},jf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z5=Re.exports,eG=Symbol.for("react.element"),tG=Symbol.for("react.fragment"),nG=Object.prototype.hasOwnProperty,rG=Z5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iG={key:!0,ref:!0,__self:!0,__source:!0};function cN(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nG.call(e,r)&&!iG.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eG,type:t,key:s,ref:o,props:i,_owner:rG.current}}jf.Fragment=tG;jf.jsx=cN;jf.jsxs=cN;zf.exports=jf;const K=zf.exports.jsx,Ht=zf.exports.jsxs,qf=zf.exports.Fragment;J5({});const hN=new Audio("/noti.wav");hN.loop=!1;ot.apps.length?ot.app():ot.initializeApp({apiKey:"AIzaSyBpWmtGTqluiA1gC0CEFHrQcZncNRYtjbg",authDomain:"private-school-chat.firebaseapp.com",databaseURL:"https://private-school-chat.firebaseio.com",projectId:"private-school-chat",storageBucket:"private-school-chat.appspot.com",messagingSenderId:"113930891891",appId:"1:113930891891:web:88a3cb1a24e25b06017006"});const Ir=ot.auth(),Hf=ot.firestore();var ry=ot.storage().ref();const Vk=ot.messaging();var iy="",zk=!1;const hm=()=>{const t=document.getElementById("favicon");t.href="/favicon.svg",document.title="HB Chat2"},jk=()=>{iy=="kimi"&&(document.getElementsByClassName("softBlockOverlay")[0].style.display="flex")},sG=()=>(Re.exports.useEffect(()=>(window.addEventListener("focus",hm),window.addEventListener("blur",jk),hm(),()=>{window.removeEventListener("focus",hm),window.removeEventListener("blur",jk)}),[]),K(qf,{}));function oG(t){const e=t.updateMethod,n=t.changeRoom;return Ht(qf,{children:[K("button",{onClick:()=>{Ir.signOut(),n(!1)},children:"log out"}),K("button",{onClick:e,children:"Rooms"})]})}function aG(){const[t,e]=Hg(Ir),[n,r]=Re.exports.useState(!1),{uid:i,photoURL:s}=Ir.currentUser;var a=new URLSearchParams(window.location.search).get("room");(a===""||a===null)&&(a="_start"),zk||Vk.getToken(Vk,{vapidKey:"BJpP6JS8xn9lkBrB0M88LmpChsj46h4YjIoW6rrdgf6rpsl1nWvZ1nBGT7-qyKFmlhdguDvzzcMLXlX4SItN_9k"}).then(h=>{h!=null&&(console.log("Got permission "+h),zk=!0,Hf.collection("fcm").doc(i).set({token:h}))}).catch(h=>{console.log(h)}),iy=a;function l(){r(!n)}function u(){const[h]=Hg(Ir);return K(qf,{children:h?K(hG,{}):K(fN,{})})}function c(){location.reload()}return Ht("div",{className:"App",children:[Ht("div",{className:"navbar",children:[K("img",{src:"favicon.svg",alt:"app logo"}),K("button",{onClick:c,children:"\u27F3"}),t?K(oG,{changeRoom:r,updateMethod:l}):K("p",{children:"You are not logged in"})]}),a==="_start"?K(uG,{}):K(u,{user:t}),n?K(cG,{}):K("span",{}),iy=="kimi"?K(lG,{}):K("span",{}),e?K(dN,{text:"Logging in..."}):K("span",{}),K(sG,{})]})}function dN(t){return K("div",{className:"loadingOverlay",children:Ht("div",{className:"loadingOverlayContent",children:[t.text,K("img",{src:"loading.gif",alt:"loading"})]})})}function lG(){function t(e){e.preventDefault();var n=document.getElementById("softBlockInput").value;n=="020322"&&(document.getElementsByClassName("softBlockOverlay")[0].style.display="none",document.getElementById("softBlockInput").value="")}return K("div",{className:"softBlockOverlay",children:Ht("div",{className:"softBlockContent",children:[K("h1",{children:"CRITICAL ERROR"}),K("p",{children:"An error occured while trying to log you in. (Do you have permission to be in this room?)"}),K("p",{children:"Switch to another room or refresh to retry."}),K("p",{children:"Or, if you're an programmer, input your code to bypass this error."}),K("form",{onSubmit:t,children:K("input",{id:"softBlockInput",type:"number",onSubmit:t})})]})})}function uG(){const[t]=Hg(Ir);var e="";return t!==null&&(e=t.displayName),Ht("div",{className:"startScreen",children:[K("img",{src:"./favicon.svg",alt:"app logo"}),Ht("h1",{children:["Welcome to HyberBhat",K("br",{}),e]}),K("p",{children:"By using this application you consent to the use of cookies."}),t?K("p",{children:"Use the room button above to go to a chatroom."}):K(fN,{})]})}function fN(){return Ht("div",{className:"startScreen",children:[K("h2",{children:"You are not signed in!"}),K("button",{onClick:()=>{const e=new ot.auth.GoogleAuthProvider;Ir.signInWithPopup(e).catch(function(n){alert(n),console.log(n)})},children:"Sign in with Google"})]})}function cG(){const e=Hf.collection("rooms").limitToLast(50).orderBy("createdAt"),[n]=kR(e,{idField:"id"});function r(i){const{roomName:s,roomSysName:o}=i.room;return K("a",{href:"/?room="+o,children:s})}return K(qf,{children:K("div",{id:"roomListOverlay",children:K("div",{id:"roomListContent",children:n&&n.map(i=>K(r,{room:i},i.id))})})})}function hG(){const t=Re.exports.useRef(),e=new URLSearchParams(window.location.search);var n=e.get("room");(n===""||n===null)&&(n="_start");var r=e.get("limit");r===""||r===null?r=25:r=parseInt(r),Re.exports.useEffect(()=>{t.current.scrollIntoView()});const s=Hf.collection(n).limitToLast(r).orderBy("createdAt"),[o,a]=kR(s,{idField:"id"});return Ht("div",{className:"chatroom",children:[o&&o.map(l=>K(dG,{message:l},l.id)),K("span",{ref:t}),K(fG,{}),a?K(dN,{text:"Loading messages..."}):K("span",{})]})}function dG(t){const{text:e,uid:n,photoURL:r,createdAt:i,name:s,attatchment:o,attatchmentType:a}=t.message;var l=n===Ir.currentUser.uid?"message Sent":"message Received",u;s!==void 0?s!==Ir.currentUser.displayName?u=s+" \u2022 ":(u="You \u2022 ",s==="Ciara Lee"&&(u="You, aka the cutest person ever \u2022 ")):u="Name missing \u2022 ";var c="Sending...";if(i!=null){c=new Date(i.toDate());var h=c.toTimeString(),d=h.split(":"),f=" ";if(d[0]>=13){var p=parseInt(d[0]);p=p-12,d[0]=p.toString(),f="PM"}else f="AM";c=`${c.toDateString()}  ${d[0]}:${d[1]} ${f}`}function v(E){const[m,y]=Re.exports.useState("");function g(S){S.preventDefault(),window.open(m,"_blank")}if(a==="image")if(m=="")ry.child(E.attatchment).getDownloadURL().then(function(S){console.log("pog: "+S),y(S)}).catch(function(S){console.log("error: "+S)});else return K("a",{className:"messageAttatchment",children:Ht("button",{onClick:g,children:[K("img",{src:"/picture.svg",alt:"Picture Icon"}),"Open Picture"]})});if(a==="video")if(m=="")ry.child(E.attatchment).getDownloadURL().then(function(S){console.log("pog: "+S),y(S)}).catch(function(S){console.log("error: "+S)});else return K("a",{className:"messageAttatchment",children:Ht("button",{onClick:g,children:[K("img",{src:"/video.svg",alt:"Video Icon"}),"Open Video"]})});if(m=="")return K("span",{className:"messageAttatchment",children:Ht("button",{children:[K("img",{src:"/loading.gif",alt:"loading animation"}),"Loading..."]})})}return Re.exports.useEffect(()=>{l=="message Received"&&hN.play()}),Ht("div",{className:l,children:[K("img",{className:"pfp",src:r,alt:"profile picture"}),K(g0,{children:e}),o!=""?K(v,{attatchment:o,attatchmentType:a}):K("span",{}),K("div",{className:"timestamp",children:Ht("i",{children:[u,c]})})]})}function fG(){var e=new URLSearchParams(window.location.search).get("room");(e===""||e===null)&&(e="_start");const[n,r]=Re.exports.useState("Attatch"),i=Hf.collection(e),s=async l=>{l.preventDefault();const{uid:u,photoURL:c}=Ir.currentUser;var h=Ir.currentUser.displayName,d="",f=document.getElementById("MSGINPUT").value;if(document.getElementById("MSGINPUT").value="",f!=="")if(document.getElementById("attatchImg").value=="")i.add({text:f,createdAt:ot.firestore.FieldValue.serverTimestamp(),uid:u,photoURL:c,name:h,attatchment:d,attatchmentType:"none"}).catch(g=>{console.log("Error sending message: "+g),alert("Error sending message: "+g)});else{var p=Math.floor(Math.random()*69696969+1),v=document.getElementById("attatchImg").files[0],E=document.getElementById("attatchImg").files[0].name,m=v.type.split("/")[0];document.getElementById("attatchImg").value="",r("Attatch");var y="images/";e=="kimi"&&(y="lockedRoom/"),ry.child(y+p+E).put(v).then(function(g){var S={customMetadata:{}};e=="kimi"&&(S={customMetadata:{user1:"kGdiwRJy0EWjhAUMV1izyJfXTTY2",user2:"FNvEwEkXbsVNV4VE6nn71w2smaa2"}},console.log(S)),i.add({text:f,createdAt:ot.firestore.FieldValue.serverTimestamp(),uid:u,photoURL:c,name:h,attatchment:y+p+E,attatchmentType:m}).then(()=>{console.log("Successfully uploaded image"),g.ref.updateMetadata(S).then(function(b){console.log(b),r("Attatch")}).catch(function(b){console.log(b),console.log("Error updating metadata for image: "+b),alert("Error updating metadata for image: "+b),r("Attatch")})}).catch(function(b){console.log("Error sending message: "+b),alert("Error sending message: "+b),r("Attatch")})}).catch(g=>{console.log("Error uploading image: "+g),alert("Error uploading image: "+g),r("Attatch")})}};function o(l){l.preventDefault(),document.getElementById("attatchImg").value==""?document.getElementById("attatchImg").click():(document.getElementById("attatchImg").value="",r("Attatch"))}function a(l){l.preventDefault();var u=document.getElementById("attatchImg").files[0];u!=null&&(u.type.split("/")[0]=="image"?r("Remove Image"):u.type.split("/")[0]=="video"?r("Remove Video"):(r("Remove Binary File"),alert("This file type is not supported, it will be sent as binary data.")))}return Re.exports.useEffect(()=>{const l=u=>{u.code==="Enter"&&u.shiftKey&&(u.preventDefault(),s(u))};document.addEventListener("keydown",l)}),Ht("form",{onSubmit:s,children:[K("textarea",{id:"MSGINPUT",placeholder:"input message pls"}),K("button",{onClick:s,children:"Send"}),K("button",{onClick:o,children:n}),K("input",{type:"file",id:"attatchImg",onChange:a,hidden:!0})]})}dm.createRoot(document.getElementById("root")).render(K(vs.StrictMode,{children:K(aG,{})}));
